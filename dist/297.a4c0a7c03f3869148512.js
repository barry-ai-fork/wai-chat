"use strict";(self.webpackChunkwai=self.webpackChunkwai||[]).push([[297],{70172:(e,t,n)=>{n.d(t,{Z:()=>g});var r=n(60748),o=n(33555),i=n(6137),s=n(83716),a=n(77361),c=n(56112),l=n(2155),d=n(46752),u=n(32340),m=n(6202),f=n(31212),h=n(59107),p=n(3657),b=n(35148);const v=(0,d.y)("Avatar");v.media=v("media"),v.icon=v("icon");const g=(0,r.X$)((({className:e,size:t="large",chat:n,user:g,photo:_,userStatus:y,text:I,isSavedMessages:Z,withVideo:P,noLoop:C,loopIndefinitely:w,lastSyncTime:B,showVideoOverwrite:E,animationLevel:A,noPersonalPhoto:H,observeIntersection:S,onClick:N})=>{const{loadFullUser:T}=(0,o.Sv)(),k=(0,r.sO)(null),D=(0,r.sO)(0),x=(0,p.Op)(k,S),U=g&&(0,c.NB)(g),L=g&&(0,c.pK)(g.id),O=n?.isForum;let R,q;const M=!a.as&&A===s.zy8&&g?.isPremium&&g?.hasVideoAvatar,V=E&&_?.isVideo,F=x&&P&&(V||M),j=g?.fullInfo?.personalPhoto||g?.fullInfo?.profilePhoto||g?.fullInfo?.fallbackPhoto,$=j?.isVideo,G=F&&($||V),J="jumbo"===t;Z||U||(g&&!H?R=(0,c.RT)(g,J?"big":void 0):n?R=(0,c.RT)(n,J?"big":void 0):_&&(R=`photo${_.id}?size=m`,_.isVideo&&P&&(q=`videoAvatar${_.id}?size=u`)),$&&(q=(0,c.RT)(g,void 0,"video")));const K=(0,m.Z)(R,!1,i.IU.BlobUrl,B),z=(0,m.Z)(q,!G,i.IU.BlobUrl,B),X=Boolean(K||z),W=Boolean(x&&z&&G),{transitionClassNames:Y}=(0,f.Z)(X,void 0,X,"slow"),Q=(0,r.I4)((e=>{const t=e.currentTarget;z&&(w||(D.current+=1,(D.current>=3||C)&&(t.style.display="none")))}),[w,C,z]),ee=g?.id;(0,r.d4)((()=>{ee&&F&&!j&&T({userId:ee})}),[T,j,ee,F]);const te=(0,h.Z)();let ne;const re=g?(0,c.Js)(g):n?(0,c.U)(te,n):I;if(Z)ne=r.ZP.createElement("i",{className:(0,d.Z)(v.icon,"icon-avatar-saved-messages"),role:"img","aria-label":re});else if(U)ne=r.ZP.createElement("i",{className:(0,d.Z)(v.icon,"icon-avatar-deleted-account"),role:"img","aria-label":re});else if(L)ne=r.ZP.createElement("i",{className:(0,d.Z)(v.icon,"icon-reply-filled"),role:"img","aria-label":re});else if(X)ne=r.ZP.createElement(r.ZP.Fragment,null,r.ZP.createElement("img",{src:K,className:(0,d.Z)(v.media,"avatar-media",Y,z&&"poster"),alt:re,decoding:"async"}),W&&r.ZP.createElement(b.Z,{canPlay:!0,src:z,className:(0,d.Z)(v.media,"avatar-media","poster"),muted:!0,loop:w,autoPlay:!0,disablePictureInPicture:!0,playsInline:!0,onEnded:Q}));else if(g){const e=(0,c.Js)(g);ne=e?(0,l.Xv)(e,2):void 0}else if(n){const e=(0,c.U)(te,n);ne=e&&(0,l.Xv)(e,(0,c.YC)(n.id)?2:1)}else I&&(ne=(0,l.Xv)(I,2));const oe=!Z&&g&&y&&(0,c.kM)(g,y),ie=(0,d.Z)(`Avatar size-${t}`,e,`color-bg-${(0,c.Rs)(g||n)}`,Z&&"saved-messages",U&&"deleted-account",L&&"replies-bot-account",O&&"forum",oe&&"online",N&&"interactive",!Z&&!K&&"no-photo"),se=Boolean(Z||K),ae=(0,r.I4)((e=>{N&&N(e,se)}),[N,se]),ce=(g||n)&&(g||n).id;return r.ZP.createElement("div",{ref:k,className:ie,onClick:ae,"data-test-sender-id":s.Cgt?ce:void 0,"aria-label":"string"==typeof ne?re:void 0},"string"==typeof ne?(0,u.Z)(ne,["jumbo"===t?"hq_emoji":"emoji"]):ne)}))},22275:(e,t,n)=>{n.d(t,{Z:()=>d});var r=n(60748),o=n(33555),i=n(11192),s=n(56112),a=n(32340),c=n(59107),l=n(17551);const d=(0,r.X$)((0,o.c$)(((e,{userId:t})=>{const n=(0,i.jr)(e),r=t&&(0,i.dy)(e,t);return{chat:n,contactName:r?(0,s.Vl)(r):void 0}}))((({isOpen:e,chat:t,userId:n,contactName:i,onClose:s})=>{const{deleteChatMember:d}=(0,o.Sv)(),u=(0,c.Z)(),m=(0,r.I4)((()=>{d({chatId:t.id,userId:n}),s()}),[t,d,s,n]);if(t&&n)return r.ZP.createElement(l.Z,{isOpen:e,onClose:s,title:u("GroupRemoved.Remove"),textParts:(0,a.Z)(u("PeerInfo.Confirm.RemovePeer",i)),confirmLabel:u("lng_box_remove"),confirmHandler:m,confirmIsDestructive:!0})})))},17551:(e,t,n)=>{n.d(t,{Z:()=>c});var r=n(60748),o=n(59107),i=n(72313),s=n(13103),a=n(231);const c=(0,r.X$)((({isOpen:e,onClose:t,onCloseAnimationEnd:n,title:c,header:l,text:d,textParts:u,confirmLabel:m="Confirm",confirmHandler:f,confirmIsDestructive:h,areButtonsInColumn:p,children:b})=>{const v=(0,o.Z)(),g=(0,r.sO)(null),_=(0,r.I4)((e=>{-1===e&&f()}),[f]),y=(0,i.Z)(g,e,_,".Button");return r.ZP.createElement(s.Z,{className:"confirm",title:c||v("Wai"),header:l,isOpen:e,onClose:t,onCloseAnimationEnd:n},d&&d.split("\\n").map((e=>r.ZP.createElement("p",null,e))),u||b,r.ZP.createElement("div",{className:p?"dialog-buttons-column":"dialog-buttons mt-2",ref:g,onKeyDown:y},r.ZP.createElement(a.Z,{className:"confirm-dialog-button",isText:!0,onClick:f,color:h?"danger":"primary"},m),r.ZP.createElement(a.Z,{className:"confirm-dialog-button",isText:!0,onClick:t},v("Cancel"))))}))},21273:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(91713),o=n(60748),i=n(69118),s=n(87675),a=n(77361),c=n(80036);const l=({ref:e,className:t,items:n,itemSelector:l=".ListItem",preloadBackwards:d=20,sensitiveArea:u=800,withAbsolutePositioning:m,maxHeight:f,noScrollRestore:h=!1,noScrollRestoreOnTop:p=!1,noFastList:b,cacheBuster:v,beforeChildren:g,children:_,onLoadMore:y,onScroll:I,onKeyDown:Z,onDragOver:P,onDragLeave:C})=>{let w=(0,o.sO)(null);e&&(w=e);const B=(0,o.sO)({}),[E,A]=(0,o.Ye)((()=>y?[(0,i.Ds)(((e=!1)=>{y({direction:r.Uq.Backwards,noScroll:e})}),1e3,!0,!1),(0,i.Ds)((()=>{y({direction:r.Uq.Forwards})}),1e3,!0,!1)]:[]),[y,n]);(0,o.d4)((()=>{if(!E)return;if(d>0&&(!n||n.length<d))return void E(!0);const{scrollHeight:e,clientHeight:t}=w.current;t&&e<=t&&E()}),[n,E,d]),(0,o.bt)((()=>{const e=w.current,t=B.current;let n;if(t.listItemElements=e.querySelectorAll(l),t.currentAnchor&&Array.from(t.listItemElements).includes(t.currentAnchor)){const{scrollTop:r}=e;n=r+(t.currentAnchor.getBoundingClientRect().top-t.currentAnchorTop)}else{const e=t.listItemElements[0];e&&(t.currentAnchor=e,t.currentAnchorTop=e.getBoundingClientRect().top)}m||h||p&&0===e.scrollTop||((0,s.Z)(e,n),t.isScrollTopJustUpdated=!0)}),[n,l,h,p,v,m]);const H=(0,o.I4)((e=>{if(A&&E){const{isScrollTopJustUpdated:e,currentAnchor:t,currentAnchorTop:n}=B.current,r=B.current.listItemElements;if(e)return void(B.current.isScrollTopJustUpdated=!1);const o=r.length,i=w.current,{scrollTop:s,scrollHeight:a,offsetHeight:c}=i,l=s<=(o?r[0].offsetTop:0)+u,d=(o?r[o-1].offsetTop+r[o-1].offsetHeight:a)-(s+c)<=u;let m=!1;if(l){const e=r[0];if(e){const r=e.getBoundingClientRect().top,o=t?.offsetParent&&t!==e?t.getBoundingClientRect().top:r;t&&void 0!==n&&o>n&&(B.current.currentAnchor=e,B.current.currentAnchorTop=r,m=!0,A())}}if(d){const e=r[o-1];if(e){const r=e.getBoundingClientRect().top,o=t?.offsetParent&&t!==e?t.getBoundingClientRect().top:r;t&&void 0!==n&&o<n&&(B.current.currentAnchor=e,B.current.currentAnchorTop=r,m=!0,E())}}if(!m)if(t?.offsetParent)B.current.currentAnchorTop=t.getBoundingClientRect().top;else{const e=r[0];e&&(B.current.currentAnchor=e,B.current.currentAnchorTop=e.getBoundingClientRect().top)}}I&&I(e)}),[E,A,I,u]);return o.ZP.createElement("div",{ref:w,className:t,onScroll:H,teactFastList:!b&&!m,onKeyDown:Z,onDragOver:P,onDragLeave:C},g,m&&n?.length?o.ZP.createElement("div",{teactFastList:!b,style:(0,c.Z)("position: relative",a.wZ&&`height: ${f}px`)},_):_)}},13103:(e,t,n)=>{n.d(t,{Z:()=>h});var r=n(60748),o=n(517),i=n(46752),s=n(98069),a=n(18674),c=n(31212),l=n(274),d=n(59107),u=n(46590),m=n(231),f=n(62898);const h=({dialogRef:e,title:t,className:n,isOpen:h,isSlim:p,header:b,hasCloseButton:v,noBackdrop:g,noBackdropClose:_,children:y,style:I,onClose:Z,onCloseAnimationEnd:P,onEnter:C,shouldSkipHistoryAnimations:w})=>{const{shouldRender:B,transitionClassNames:E}=(0,c.Z)(h,P,w,void 0,w),A=(0,r.sO)(null);(0,r.d4)((()=>{if(h)return(0,s.l_)(),s.In}),[h]),(0,r.d4)((()=>h?(0,o.Z)({onEsc:Z,onEnter:C}):void 0),[h,Z,C]),(0,r.d4)((()=>h&&A.current?function(e){function t(t){if("Tab"!==t.key)return;t.preventDefault(),t.stopPropagation();const n=Array.from(e.querySelectorAll('button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])'));if(!n.length)return;const r=n.findIndex((e=>e.isSameNode(document.activeElement)));let o=0;r>=0&&(o=t.shiftKey?r>0?r-1:n.length-1:r<n.length-1?r+1:0),n[o].focus()}return document.addEventListener("keydown",t,!1),()=>{document.removeEventListener("keydown",t,!1)}}(A.current):void 0),[h]),(0,u.Z)({isActive:h,onBack:Z}),(0,l.Z)((([e])=>(document.body.classList.toggle("has-open-dialog",Boolean(h)),(h||!h&&void 0!==e)&&(0,a.YW)(200),()=>{document.body.classList.remove("has-open-dialog")})),[h]);const H=(0,d.Z)();if(!B)return;const S=(0,i.Z)("Modal",n,E,g&&"transparent-backdrop",p&&"slim");return r.ZP.createElement(f.Z,null,r.ZP.createElement("div",{ref:A,className:S,tabIndex:-1,role:"dialog"},r.ZP.createElement("div",{className:"modal-container"},r.ZP.createElement("div",{className:"modal-backdrop",onClick:_?void 0:Z}),r.ZP.createElement("div",{className:"modal-dialog",ref:e},b||(t?r.ZP.createElement("div",{className:"modal-header"},v&&r.ZP.createElement(m.Z,{round:!0,color:"translucent",size:"smaller",ariaLabel:H("Close"),onClick:Z},r.ZP.createElement("i",{className:"icon-close"})),r.ZP.createElement("div",{className:"modal-title"},t)):void 0),r.ZP.createElement("div",{className:"modal-content custom-scroll",style:I},y)))))}},42431:(e,t,n)=>{n.d(t,{$5:()=>a,Bj:()=>s,GU:()=>c,Ht:()=>l,fu:()=>u,mU:()=>d});var r=n(14342),o=n(56112),i=n(86087);function s(e,t){const n=(0,r.Z1)(e,t);if(n&&n.fullInfo&&n.fullInfo.groupCallId)return a(e,n.fullInfo.groupCallId)}function a(e,t){return e.groupCalls.byId[t]}function c(e,t,n){return a(e,t)?.participants[n]}function l(e){const t=d(e)?.chatId;if(!t)return!1;const n=(0,r.Z1)(e,t);return!!n&&((0,o.G9)(n)&&n.isCreator||Boolean(n.adminRights?.manageCall))}function d(e){const{groupCalls:{activeGroupCallId:t}}=e;if(t)return a(e,t)}function u(e){const{phoneCall:t,currentUserId:n}=e;if(!t||!t.participantId||!t.adminId)return;const r=t.adminId===n?t.participantId:t.adminId;return(0,i.dy)(e,r)}},9211:(e,t,n)=>{n.d(t,{M:()=>i,P:()=>s});var r=n(86087),o=n(83716);function i(e,t){var n;const{appConfig:i}=e;if(!i)return o.prK[t][0];const s=(0,r.wV)(e),{limits:a}=i,c=null!==(n=a[t][s?1:0])&&void 0!==n?n:o.prK[t][s?1:0];return"dialogFilters"===t?c+1:c}function s(e,t){const{appConfig:n}=e;if(!n)return o.prK[t][1];const{limits:r}=n;return r[t][1]}},27407:(e,t,n)=>{n.d(t,{Z:()=>l});var r=n(60748),o=n(91713),i=n(60782),s=n(65326),a=n(87204);function c(e,t,n,r){const{length:i}=e,s=r?e.indexOf(r):0,a=t===o.Uq.Forwards?s:s+1||i,c=Math.max(0,a-n),l=a+n-1,d=e.slice(Math.max(0,c),l+1);let u,m;switch(t){case o.Uq.Forwards:u=a>0,m=c>=0;break;case o.Uq.Backwards:u=a<i,m=l<=i-1}return{newViewportIds:d,areSomeLocal:u,areAllLocal:m}}const l=(e,t,n=!1,l=30)=>{const d=(0,r.sO)(),u=(0,r.sO)((()=>{if(!t||d.current)return;const{newViewportIds:e}=c(t,o.Uq.Forwards,l,t[0]);return e})()),m=(0,s.Z)();n&&(d.current={});const f=(0,a.Z)(t),h=(0,a.Z)(n);if(!t||n||t===f&&n===h)t||(u.current=void 0);else{const{offsetId:e=t[0],direction:n=o.Uq.Forwards}=d.current||{},{newViewportIds:r}=c(t,n,l,e);u.current&&(0,i.et)(u.current,r)||(u.current=r)}const p=(0,r.I4)((({direction:n,noScroll:r})=>{const s=u.current,a=s?n===o.Uq.Backwards?s[s.length-1]:s[0]:void 0;if(!t)return void(e&&e({offsetId:a}));r||(d.current={...d.current,direction:n,offsetId:a});const{newViewportIds:f,areSomeLocal:h,areAllLocal:p}=c(t,n,l,a);!h||s&&(0,i.et)(s,f)||(u.current=f,m()),!p&&e&&e({offsetId:a})}),[t,l,e,m]);return n?[t]:[u.current,p]}},62357:(e,t,n)=>{n.d(t,{Z:()=>o});var r=n(60748);const o=function(e,t,n=!1){const o=(0,r.sO)(e);(0,r.bt)((()=>{o.current=e}),[e]),(0,r.d4)((()=>{if(void 0===t)return;const e=setInterval((()=>o.current()),t);return n||o.current(),()=>clearInterval(e)}),[t,n])}},82752:(e,t,n)=>{n.d(t,{Mt:()=>f,On:()=>h,ZP:()=>y,_b:()=>a,_f:()=>c,es:()=>g,mS:()=>b,rI:()=>v,sB:()=>p});var r=n(48764).Buffer;function o(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,"string");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const i=n(73679);let s=[];function a(){const e=s.pop();return e?(e.offset=e.limit=0,e):{bytes:new Uint8Array(64),offset:0,limit:0}}function c(e){let t=e.bytes,n=e.limit;return t.length===n?t:t.subarray(0,n)}function l(e,t){let n=e.bytes,r=e.offset,o=e.limit,i=r+t;if(i>n.length){let t=new Uint8Array(2*i);t.set(n),e.bytes=t}return e.offset=i,i>o&&(e.limit=i),r}function d(e,t){let n=e.offset;if(n+t>e.limit)throw new Error("Read past limit");return e.offset+=t,n}function u(e){let t=d(e,4),n=e.bytes;return n[t]<<24|n[t+1]<<16|n[t+2]<<8|n[t+3]}function m(e,t){let n=l(e,4),r=e.bytes;r[n+3]=t,r[n+2]=t>>8,r[n+1]=t>>16,r[n]=t>>24}function f(e){let t=d(e,2),n=e.bytes;return n[t]<<8|n[t+1]}function h(e,t){let n=l(e,2),r=e.bytes;r[n+1]=t,r[n]=t>>8}function p(e,t){let n=d(e,t);return e.bytes.subarray(n,n+t)}function b(e,t){let n=l(e,t.length);e.bytes.set(t,n)}function v(e){return{bytes:e,offset:0,limit:e.length}}class g{constructor(e){o(this,"_pbData",void 0),o(this,"_pbHeader",void 0),o(this,"_pbBody",void 0),o(this,"_bb",void 0),this._pbData=new Uint8Array,this._pbBody=new Uint8Array,this._bb=a(),this._pbHeader={length:0,version:0,flag:0,command_id:0,seq_num:0,reversed:0},e&&(this.setPbData(e),this.readPbData())}getPbData(){return this._pbData}setPbData(e){this._pbData=e}getPbDataLength(){return this._pbData.length}getPbBody(){return this._pbBody}body(){return this._pbBody}getPbBodyLength(){return this._pbBody.length}setPbBody(e){this._pbBody=e}writeData(e,t,n=0,o=0){this.setPbBody(e),this._pbHeader={length:e.length+16,version:0,flag:0,command_id:t,seq_num:n,reversed:o},m(this._bb,this._pbHeader.length),h(this._bb,this._pbHeader.version),h(this._bb,this._pbHeader.flag),h(this._bb,this._pbHeader.command_id),h(this._bb,this._pbHeader.seq_num),m(this._bb,this._pbHeader.reversed),b(this._bb,r.from(e)),this.setPbData(c(this._bb))}updateSeqNo(e){this._bb.offset=10,h(this._bb,e),this._pbHeader.seq_num=e}readPbData(){const e=v(this._pbData.slice(0,16));this._pbHeader.length=u(e),this._pbHeader.version=f(e),this._pbHeader.flag=f(e),this._pbHeader.command_id=f(e),this._pbHeader.seq_num=f(e),this._pbHeader.reversed=u(e),this.setPbBody(this._pbData.slice(16,this._pbHeader.length))}getCommandId(){return this._pbHeader.command_id}getReversed(){return this._pbHeader.reversed}getSeqNum(){return this._pbHeader.seq_num}}let _=0;class y{constructor(e,t){o(this,"__cid",void 0),o(this,"msg",void 0),o(this,"__pb",void 0);const n=e.split(".");let r=i.default;do{r=r[n.shift()]}while(n.length>0);this.__pb=r,this.setMsg(t)}setCommandId(e){this.__cid=e}setMsg(e){this.msg=e}getMsg(){return this.msg}encode(){return this.__E()}decode(e){return this.__D(e)}pack(){return this.__pack()}toHex(){return r.from(this.__E()).toString("hex")}fromHex(e){return 0===e.indexOf("0x")&&(e=e.substring(2)),this.__D(r.from(e,"hex"))}__E(){const e=this.__pb.create(this.getMsg());return this.__pb.encode(e).finish()}__D(e){const t=this.__pb.decode(e);return this.__pb.toObject(t)}__pack(){const e=new g;return _>1e4&&(_=0),e.writeData(this.__E(),this.__cid,++_),e}}},98069:(e,t,n)=>{n.d(t,{In:()=>i,l_:()=>o,wT:()=>s});let r=0;function o(){r+=1}function i(){r-=1}function s(){return r>0}},87675:(e,t,n)=>{n.d(t,{Z:()=>s,z:()=>i});var r=n(77361),o=n(82972);function i(e){e.style.display="none",(0,o.Z)(e),e.style.display=""}const s=(e,t)=>{r.cj&&(e.style.overflow="hidden"),void 0!==t&&(e.scrollTop=t),r.cj&&(e.style.overflow="")}},60054:(e,t,n)=>{n.d(t,{GX:()=>o,H8:()=>a,Jw:()=>s,Sn:()=>l,ep:()=>i,gg:()=>r,vg:()=>c});const r="1000",o="我是一个AI机器人",i={model:"gpt-3.5-turbo",temperature:1,max_tokens:2e3,presence_penalty:0},s=[{botId:r,command:"start",description:"开始对话"},{botId:r,command:"reloadCommands",description:"重载命令"},{botId:r,command:"setting",description:"设置"},{botId:r,command:"clearHistory",description:"清除历史记录"},{botId:r,command:"temp",description:"Temp"}];let a={users:[{id:"1",accessHash:"",firstName:"",lastName:"",canBeInvitedToGroup:!1,hasVideoAvatar:!1,isMin:!1,isPremium:!1,noStatus:!0,fullInfo:{isBlocked:!1,noVoiceMessages:!1,bio:""},usernames:[{username:"my-self",isActive:!0,isEditable:!0}],type:"userTypeBot",phoneNumber:"",avatarHash:"",isSelf:!0},{id:r,fullInfo:{isBlocked:!1,noVoiceMessages:!1,bio:o,botInfo:{botId:r,description:o,aiType:"ChatGpt",menuButton:{type:"commands"},commands:s}},bot:{chatGptConfig:{config:i,api_key:"",init_system_content:"你现在是一个优秀的前端开发工程师，请用中文回答我的问题。",max_history_length:4},enableAi:!0},accessHash:"",firstName:"小W",lastName:"",canBeInvitedToGroup:!1,hasVideoAvatar:!1,isMin:!1,isPremium:!0,noStatus:!0,usernames:[{username:"first_bot",isActive:!0,isEditable:!0}],type:"userTypeBot",phoneNumber:"",avatarHash:"",isSelf:!1}],chats:[{id:r,title:"小W",type:"chatTypePrivate",isMuted:!1,isMin:!1,hasPrivateLink:!1,isSignaturesShown:!1,isVerified:!0,isJoinToSend:!0,isJoinRequest:!0,isForum:!1,isListed:!0,settings:{isAutoArchived:!1,canReportSpam:!1,canAddContact:!1,canBlockContact:!1},accessHash:""}],chatFolders:[{id:1,title:"机器人",includedChatIds:[r],channels:!1,pinnedChatIds:[],excludedChatIds:[]}],folderIds:[0,1],draftsById:{},replyingToById:{},orderedPinnedIds:[]};const c="...",l="width:4px;"}}]);
//# sourceMappingURL=297.a4c0a7c03f3869148512.js.map