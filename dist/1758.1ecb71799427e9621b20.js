(()=>{var e,t,n={6999:(e,t,n)=>{"use strict";n.d(t,{E:()=>y,Ll:()=>h,Qp:()=>A,Wq:()=>l,cQ:()=>p,qh:()=>f});var s=n(13522),i=n(60782),a=n(55237),o=n(3192),r=n(67606),d=n(15023),u=n(18935),c=n(81900);function f(e,t){const{id:n,type:s,title:i,description:a,url:r,thumb:d}=e;return{id:n,queryId:t,type:s,title:i,description:a,url:r,webThumbnail:(0,o.Bc)(d)}}function p(e,t){const{id:n,type:i,title:d,description:u,photo:c,document:f}=e;return{id:n,queryId:t,type:i,title:d,description:u,..."sticker"===i&&f instanceof s.Api.Document&&{sticker:(0,r.lW)(f)},...c instanceof s.Api.Photo&&{photo:(0,a.lq)(c)},..."gif"===i&&f instanceof s.Api.Document&&{gif:(0,o.gi)(f)},..."video"===i&&f instanceof s.Api.Document&&{thumbnail:(0,a.Gv)(f.thumbs)}}}function l(e){return e?(0,i.ei)(e,["text","startParam"]):void 0}function h(e){return{id:e.botId.toString(),hasSettings:e.hasSettings,shouldRequestWriteAccess:e.requestWriteAccess,shortName:e.shortName,peerTypes:e.peerTypes.map(m),icons:e.icons.map(g).filter(Boolean)}}function m(e){return e instanceof s.Api.AttachMenuPeerTypeBotPM?"bots":e instanceof s.Api.AttachMenuPeerTypePM?"users":e instanceof s.Api.AttachMenuPeerTypeChat?"chats":e instanceof s.Api.AttachMenuPeerTypeBroadcast?"channels":e instanceof s.Api.AttachMenuPeerTypeSameBotPM?"self":void 0}function g(e){if(!(e.icon instanceof s.Api.Document))return;const t=(0,o.Qu)(e.icon);return t?(d.ZP.documents[String(e.icon.id)]=e.icon,{name:e.name,document:t}):void 0}function y(e,t){const{description:n,descriptionPhoto:i,descriptionDocument:r,userId:d,commands:f,menuButton:p}=e,l=d&&(0,u.Xo)(d,"user"),h=i instanceof s.Api.Photo?(0,a.lq)(i):void 0,m=r instanceof s.Api.Document?(0,o.gi)(r):void 0,g=f?.map((e=>function(e,t){return{botId:e,...(0,c.f)(t)}}(l||t,e)));return{botId:l||t,description:n,gif:m,photo:h,menuButton:A(p),commands:g?.length?g:void 0}}function A(e){return e instanceof s.Api.BotMenuButton?{type:"webApp",text:e.text,url:e.url}:{type:"commands"}}},14288:(e,t,n)=>{"use strict";n.d(t,{$J:()=>u,Au:()=>a,PR:()=>f,eP:()=>c,n$:()=>h,vp:()=>d});var s=n(13522),i=n(18935);function a(e){const{self:t,min:n,about:s,date:a,versioned:r,canSelfUnmute:d,justJoined:u,left:c,muted:f,mutedByYou:p,source:l,volume:h,volumeByAdmin:m,videoJoined:g,peer:y,video:A,presentation:w,raiseHandRating:v}=e;return{isSelf:t,isMin:n,canSelfUnmute:d,isLeft:c,isMuted:f,isMutedByMe:p,hasJustJoined:u,isVolumeByAdmin:m,isVersioned:r,isVideoJoined:g,about:s,source:l,raiseHandRating:v?.toString(),volume:h,date:new Date(a),isUser:(0,i.Qk)(y),id:(0,i.iC)(y),video:A?o(A):void 0,presentation:w?o(w):void 0}}function o(e){const{audioSource:t,endpoint:n,paused:s,sourceGroups:i}=e;return{audioSource:t,endpoint:n,isPaused:s,sourceGroups:i.map(r)}}function r(e){return{semantics:e.semantics,sources:e.sources}}function d(e){const{id:t,accessHash:n}=e;if(e instanceof s.Api.GroupCallDiscarded)return{connectionState:"discarded",id:t.toString(),accessHash:n.toString(),participantsCount:0,version:0,participants:{}};const{version:i,participantsCount:a,streamDcId:o,scheduleDate:r,canChangeJoinMuted:d,joinMuted:u,canStartVideo:c,scheduleStartSubscribed:f}=e;return{connectionState:"disconnected",isLoaded:!0,id:t.toString(),accessHash:n.toString(),version:i,participantsCount:a,streamDcId:o,scheduleDate:r,canChangeJoinMuted:d,joinMuted:u,canStartVideo:c,scheduleStartSubscribed:f,participants:{}}}function u(e){return e.id.toString()}function c(e){const{id:t}=e;let n={id:t.toString()};if(e instanceof s.Api.PhoneCallAccepted||e instanceof s.Api.PhoneCallWaiting||e instanceof s.Api.PhoneCall||e instanceof s.Api.PhoneCallRequested){const{accessHash:t,adminId:s,date:i,video:a,participantId:o,protocol:r}=e;n={...n,accessHash:t.toString(),adminId:s.toString(),participantId:o.toString(),date:i,isVideo:a,protocol:l(r)}}if(e instanceof s.Api.PhoneCall){const{p2pAllowed:t,gAOrB:s,keyFingerprint:i,connections:a,startDate:o}=e;n={...n,state:"active",gAOrB:Array.from(s),keyFingerprint:i.toString(),startDate:o,p2pAllowed:t,connections:a.map(p).filter(Boolean)}}return e instanceof s.Api.PhoneCallDiscarded&&(n={...n,state:"discarded",duration:e.duration,reason:f(e.reason),needRating:e.needRating,needDebug:e.needDebug}),e instanceof s.Api.PhoneCallWaiting&&(n={...n,state:"waiting",receiveDate:e.receiveDate}),e instanceof s.Api.PhoneCallAccepted&&(n={...n,state:"accepted",gB:Array.from(e.gB)}),e instanceof s.Api.PhoneCallRequested&&(n={...n,state:"requested",gAHash:Array.from(e.gAHash)}),n}function f(e){return e instanceof s.Api.PhoneCallDiscardReasonMissed?"missed":e instanceof s.Api.PhoneCallDiscardReasonBusy?"busy":e instanceof s.Api.PhoneCallDiscardReasonHangup?"hangup":"disconnect"}function p(e){if(e instanceof s.Api.PhoneConnectionWebrtc){const{username:t,password:n,turn:s,stun:i,ip:a,ipv6:o,port:r}=e;return{username:t,password:n,isTurn:s,isStun:i,ip:a,ipv6:o,port:r}}}function l(e){const{libraryVersions:t,minLayer:n,maxLayer:s,udpP2p:i,udpReflector:a}=e;return{libraryVersions:t,minLayer:n,maxLayer:s,isUdpP2p:i,isUdpReflector:a}}function h(){return new s.Api.PhoneCallProtocol({libraryVersions:["4.0.0"],minLayer:92,maxLayer:92,udpReflector:!0,udpP2p:!0})}},66175:(e,t,n)=>{"use strict";n.d(t,{B0:()=>I,BW:()=>k,Cq:()=>P,EP:()=>T,Ep:()=>b,Jm:()=>E,Rl:()=>M,a0:()=>R,ab:()=>y,am:()=>f,bZ:()=>S,eb:()=>v,j7:()=>C,lV:()=>D,vX:()=>m,vv:()=>U});var s=n(13522),i=n(60782),a=n(18935),o=n(81900),r=n(82267),d=n(3192),u=n(55237);function c(e,t=!1){const n=Boolean("min"in e&&e.min),s="accessHash"in e&&String(e.accessHash),i="photo"in e&&e.photo&&"hasVideo"in e.photo&&e.photo.hasVideo,a="photo"in e&&e.photo&&v(e.photo),o=Boolean("signatures"in e&&e.signatures),r=Boolean("hasLink"in e&&e.hasLink),d=Boolean("scam"in e&&e.scam),c=Boolean("fake"in e&&e.fake),f=Boolean("joinToSend"in e&&e.joinToSend),m=Boolean("joinRequest"in e&&e.joinRequest),g=(0,u.T4)(e),y=Boolean("forum"in e&&e.forum);return{isMin:n,hasPrivateLink:r,isSignaturesShown:o,usernames:g,...s&&{accessHash:s},hasVideoAvatar:i,...a&&{avatarHash:a},..."verified"in e&&{isVerified:e.verified},..."callActive"in e&&{isCallActive:e.callActive},..."callNotEmpty"in e&&{isCallNotEmpty:e.callNotEmpty},..."date"in e&&{joinDate:e.date},..."participantsCount"in e&&void 0!==e.participantsCount&&{membersCount:e.participantsCount},..."noforwards"in e&&{isProtected:Boolean(e.noforwards)},...t&&{isSupport:!0},...p(e),..."creator"in e&&{isCreator:e.creator},...l(e),...h(e),fakeType:d?"scam":c?"fake":void 0,isJoinToSend:f,isJoinRequest:m,isForum:y}}function f(e,t){const{peer:n,folderId:i,unreadMark:o,unreadCount:d,unreadMentionsCount:u,unreadReactionsCount:f,notifySettings:{silent:p,muteUntil:l},readOutboxMaxId:h,readInboxMaxId:m,draft:y}=e,w=p||"number"==typeof l&&(0,r.bp)()<l;return{id:(0,a.iC)(n),...i&&{folderId:i},type:g(t),title:A(n,t),lastReadOutboxMessageId:h,lastReadInboxMessageId:m,unreadCount:d,unreadMentionsCount:u,unreadReactionsCount:f,isMuted:w,...o&&{hasUnreadMark:!0},...y instanceof s.Api.DraftMessage&&{draftDate:y.date},...c(t)}}function p(e){return e instanceof s.Api.Chat||e instanceof s.Api.Channel?{adminRights:e.adminRights?(0,o.f)(e.adminRights):void 0,currentUserBannedRights:"bannedRights"in e&&e.bannedRights?(0,o.f)(e.bannedRights):void 0,defaultBannedRights:e.defaultBannedRights?(0,o.f)(e.defaultBannedRights):void 0}:{}}function l(e){if(e instanceof s.Api.ChatForbidden)return{isForbidden:!0};if(e instanceof s.Api.ChannelForbidden)return{isRestricted:!0};const t={};if("restricted"in e){const n=e.restricted?function(e){if(!e)return;const t=e.find((({platform:e})=>"all"===e));return t?(0,i.ei)(t,["reason","text"]):void 0}(e.restrictionReason):void 0;n&&Object.assign(t,{isRestricted:!0,restrictionReason:n})}return e instanceof s.Api.Chat&&Object.assign(t,{isNotJoined:e.left}),e instanceof s.Api.Channel&&Object.assign(t,{isNotJoined:e.left}),t}function h(e){return!("migratedTo"in e)||!e.migratedTo||e.migratedTo instanceof s.Api.InputChannelEmpty?{}:{migratedTo:{chatId:(0,a.iC)(e.migratedTo),...e.migratedTo instanceof s.Api.InputChannel&&{accessHash:String(e.migratedTo.accessHash)}}}}function m(e,t=!1){if(!(e instanceof s.Api.ChatEmpty||e instanceof s.Api.UserEmpty))return{id:(0,a.Xo)(e.id,e instanceof s.Api.User?"user":"chat"),type:g(e),title:e instanceof s.Api.User?w(e):e.title,...c(e,t)}}function g(e){return e instanceof s.Api.User||e instanceof s.Api.UserEmpty?"chatTypePrivate":e instanceof s.Api.Chat||e instanceof s.Api.ChatForbidden||e instanceof s.Api.ChatEmpty?"chatTypeBasicGroup":e.megagroup?"chatTypeSuperGroup":"chatTypeChannel"}function y(e){return(0,a.Qk)(e)?`user${e.userId}`:(0,a.$L)(e)?`chat${e.chatId}`:`chat${e.channelId}`}function A(e,t){return(0,a.Qk)(e)?w(t):t.title}function w(e){return e.firstName?`${e.firstName}${e.lastName?` ${e.lastName}`:""}`:e.lastName||""}function v(e){if("photoId"in e)return String(e.photoId)}function b(e){return{userId:e instanceof s.Api.ChannelParticipantBanned||e instanceof s.Api.ChannelParticipantLeft?(0,a.iC)(e.peer):(0,a.Xo)(e.userId,"user"),inviterId:"inviterId"in e&&e.inviterId?(0,a.Xo)(e.inviterId,"user"):void 0,joinedDate:"date"in e?e.date:void 0,kickedByUserId:"kickedBy"in e&&e.kickedBy?(0,a.Xo)(e.kickedBy,"user"):void 0,promotedByUserId:"promotedBy"in e&&e.promotedBy?(0,a.Xo)(e.promotedBy,"user"):void 0,bannedRights:"bannedRights"in e?(0,o.f)(e.bannedRights):void 0,adminRights:"adminRights"in e?(0,o.f)(e.adminRights):void 0,customTitle:"rank"in e?e.rank:void 0,...(e instanceof s.Api.ChannelParticipantAdmin||e instanceof s.Api.ChatParticipantAdmin)&&{isAdmin:!0},...(e instanceof s.Api.ChannelParticipantCreator||e instanceof s.Api.ChatParticipantCreator)&&{isOwner:!0}}}function I(e){return e instanceof s.Api.ChatParticipants||e instanceof s.Api.channels.ChannelParticipants?e.participants.map(b).filter(Boolean):void 0}function C(e){let t,n="";if(!(e.action instanceof s.Api.SendMessageCancelAction)){if(e.action instanceof s.Api.SendMessageTypingAction)n="lng_user_typing";else if(e.action instanceof s.Api.SendMessageRecordVideoAction)n="lng_send_action_record_video";else if(e.action instanceof s.Api.SendMessageUploadVideoAction)n="lng_send_action_upload_video";else if(e.action instanceof s.Api.SendMessageRecordAudioAction)n="lng_send_action_record_audio";else if(e.action instanceof s.Api.SendMessageUploadAudioAction)n="lng_send_action_upload_audio";else if(e.action instanceof s.Api.SendMessageUploadPhotoAction)n="lng_send_action_upload_photo";else if(e.action instanceof s.Api.SendMessageUploadDocumentAction)n="lng_send_action_upload_file";else if(e.action instanceof s.Api.SendMessageGeoLocationAction)n="selecting a location to share";else if(e.action instanceof s.Api.SendMessageChooseContactAction)n="selecting a contact to share";else if(e.action instanceof s.Api.SendMessageGamePlayAction)n="lng_playing_game";else if(e.action instanceof s.Api.SendMessageRecordRoundAction)n="lng_send_action_record_round";else if(e.action instanceof s.Api.SendMessageUploadRoundAction)n="lng_send_action_upload_round";else if(e.action instanceof s.Api.SendMessageChooseStickerAction)n="lng_send_action_choose_sticker";else{if(e.action instanceof s.Api.SpeakingInGroupCallAction)return;if(e.action instanceof s.Api.SendMessageEmojiInteractionSeen)n="lng_user_action_watching_animations",t=e.action.emoticon;else if(e.action instanceof s.Api.SendMessageEmojiInteraction)return}return{action:n,...t&&{emoji:t},...!(e instanceof s.Api.UpdateUserTyping)&&{userId:(0,a.iC)(e.fromId)},timestamp:Date.now()+1e3*(0,r.Qj)()}}}function S(e){return{...(0,i.q0)(e,["id","title","emoticon","contacts","nonContacts","groups","bots","excludeMuted","excludeRead","excludeArchived"]),channels:e.broadcasts,pinnedChatIds:e.pinnedPeers.map(a.iC).filter(Boolean),includedChatIds:e.includePeers.map(a.iC).filter(Boolean),excludedChatIds:e.excludePeers.map(a.iC).filter(Boolean)}}function P({filter:e,description:t}){if(e instanceof s.Api.DialogFilter)return{...S(e),description:t}}function M(e){return e.reduce(((e,t)=>{const n=(0,a.Xo)(t.userId,"user");return t.commands&&(e=e.concat(t.commands.map((e=>({botId:n,...(0,o.f)(e)}))))),e}),[])}function R(e){const{revoked:t,date:n,expireDate:s,link:i,permanent:o,startDate:r,usage:d,usageLimit:u,requested:c,requestNeeded:f,title:p,adminId:l}=e;return{isRevoked:t,date:n,expireDate:s,link:i,isPermanent:o,startDate:r,usage:d,usageLimit:u,isRequestNeeded:f,requested:c,title:p,adminId:(0,a.Xo)(l,"user")}}function E(e){const{userId:t,date:n,about:s,requested:i}=e;return{userId:(0,a.Xo)(t,"user"),date:n,about:s,isRequested:i}}function D({autoarchived:e,reportSpam:t,addContact:n,blockContact:s}){return{isAutoArchived:Boolean(e),canReportSpam:Boolean(t),canAddContact:Boolean(n),canBlockContact:Boolean(s)}}function U(e){return e instanceof s.Api.ChatReactionsAll?{type:"all",areCustomAllowed:e.allowCustom}:e instanceof s.Api.ChatReactionsSome?{type:"some",allowed:e.reactions.map(d.uN).filter(Boolean)}:void 0}function k(e){return{id:(0,a.iC)(e.peer),isPremium:e.premiumRequired}}function T(e){if(e instanceof s.Api.ForumTopicDeleted)return;const{id:t,my:n,closed:i,pinned:o,hidden:r,short:d,date:u,title:c,iconColor:f,iconEmojiId:p,topMessage:l,unreadCount:h,unreadMentionsCount:m,unreadReactionsCount:g,fromId:y,notifySettings:{silent:A,muteUntil:w}}=e;return{id:t,isClosed:i,isPinned:o,isHidden:r,isOwner:n,isMin:d,date:u,title:c,iconColor:f,iconEmojiId:p?.toString(),lastMessageId:l,unreadCount:h,unreadMentionsCount:m,unreadReactionsCount:g,fromId:(0,a.iC)(y),isMuted:A||(void 0!==w?w>0:void 0)}}},55237:(e,t,n)=>{"use strict";n.d(t,{Gv:()=>u,T4:()=>m,T8:()=>c,lq:()=>p,mx:()=>h,wu:()=>f});var s=n(13522),i=n(48960),a=n(81900),o=n(28441),r=n(60782);const d={w:100,h:100};function u(e,t){if(!e||!e.length)return;const n=e.find((e=>e instanceof s.Api.PhotoStrippedSize));if(!n)return;const o=e.filter((e=>e instanceof s.Api.PhotoSize)),{w:r,h:u}=o.length?o[o.length-1]:d,{bytes:c}=n;return{dataUri:(0,a.P)(t&&"image/jpeg"!==t?c:(0,i.strippedPhotoToJpg)(c),void 0,t),width:r,height:u}}function c(e){const{w:t,h:n,bytes:s}=e;return{dataUri:(0,a.P)(s,void 0,"image/webp"),width:t,height:n}}function f(e,t){const{w:n,h:s}=t;return{dataUri:`data:image/svg+xml;utf8,${(0,o.G)(e.bytes,n,s)}`,width:n,height:s}}function p(e,t){const n=e.sizes.filter((e=>e instanceof s.Api.PhotoSize||e instanceof s.Api.PhotoSizeProgressive)).map(h);return{id:String(e.id),thumbnail:u(e.sizes),sizes:n,isSpoiler:t,...e.videoSizes&&{videoSizes:(0,r.oA)(e.videoSizes.map(l)),isVideo:!0}}}function l(e){if(!(e instanceof s.Api.VideoSize))return;const{videoStartTs:t,size:n,h:i,w:a,type:o}=e;return{videoStartTs:t,size:n,height:i,width:a,type:o}}function h(e){const{w:t,h:n,type:s}=e;return{width:t,height:n,type:s}}function m(e){if(!(e.usernames||"username"in e&&e.username))return;const t=[];return"username"in e&&e.username&&t.push({username:e.username,isActive:!0,isEditable:!0}),e.usernames&&e.usernames.forEach((({username:e,active:n,editable:s})=>{t.push({username:e,...n&&{isActive:!0},...s&&{isEditable:!0}})})),t}},81900:(e,t,n)=>{"use strict";function s(e,t=!1,n="image/jpeg"){return`${t?"":`data:${n};base64,`}${btoa(String.fromCharCode(...e))}`}function i(e){const{flags:t,CONSTRUCTOR_ID:n,SUBCLASS_OF_ID:s,className:i,classType:a,getBytes:o,...r}=e;return r}n.d(t,{P:()=>s,f:()=>i})},3192:(e,t,n)=>{"use strict";n.d(t,{$m:()=>R,Ax:()=>J,Bc:()=>Q,FD:()=>k,Jf:()=>X,K7:()=>D,Pb:()=>Y,Qu:()=>F,RI:()=>te,Rj:()=>_,VS:()=>P,bE:()=>E,dJ:()=>S,dq:()=>Z,eL:()=>M,gF:()=>V,gK:()=>C,gi:()=>O,jZ:()=>j,kc:()=>K,p4:()=>G,qY:()=>z,s2:()=>q,uN:()=>x,wo:()=>N});var s=n(13522),i=n(59187),a=n(83716),o=n(60782),r=n(67606),d=n(55237),u=n(1735),c=n(4973),f=n(64250),p=n(18935),l=n(14288),h=n(78058),m=n(82267);const g=1676e9,y=100,A=1e6,w="temp",v=63;let b,I=a.MPN;function C(){const e=Math.round((Date.now()-g)/y);return a.MPN+e+ ++I/A}function S(e){b=e}function P(e){const{fromId:t,message:n,entities:i,startParam:o,channelPost:r,chatInvite:d,chatInviteHash:u,randomId:c,recommended:l}=e,h=t?(0,p.iC)(t):void 0,m=d?d instanceof s.Api.ChatInvite?d.title:d.chat instanceof s.Api.ChatEmpty?void 0:d.chat.title:void 0;return{randomId:(0,f.TC)(c),isBot:!!t&&(0,p.Qk)(t),text:q(n,i),expiresAt:Math.round(Date.now()/1e3)+a.ZOc,isRecommended:Boolean(l),...h&&{chatId:h},...u&&{chatInviteHash:u},...d&&{chatInviteTitle:m},...o&&{startParam:o},...r&&{channelPostId:r}}}function M(e){const t=(0,f.MZ)(e);if(t&&(e instanceof s.Api.Message||e instanceof s.Api.MessageService))return U(t,e)}function R(e){return U((0,p.Xo)(e.userId,"user"),{...e,fromId:(0,c.GB)(e.out?b:(0,p.Xo)(e.userId,"user"))})}function E(e){return U((0,p.Xo)(e.chatId,"chat"),{...e,fromId:(0,c.GB)((0,p.Xo)(e.fromId,"user"))})}function D(e,t){const n=C(),s=H(e);return{id:n,chatId:a.awM,date:e.inboxDate||t,content:s,isOutgoing:!1}}function U(e,t){const n=t.fromId?(0,p.iC)(t.fromId):void 0,i=t.peerId?(0,p.iC)(t.peerId):void 0,a=!n&&e===b,o=t.out&&!t.post||a&&!t.fwdFrom,r=H(t),u=t.action&&function(e,t,n,i,a){if(e instanceof s.Api.MessageActionEmpty)return;let o,r,u,c,h;const m=[];let g,y,A,w,v,I="other";const C="users"in e?e.users&&e.users.map((e=>(0,p.Xo)(e,"user"))):"userId"in e&&[(0,p.Xo)(e.userId,"user")]||[];let S;if(e instanceof s.Api.MessageActionChatCreate)h="Notification.CreatedChatWithTitle",m.push("%action_origin%",e.title),I="chatCreate";else if(e instanceof s.Api.MessageActionChatEditTitle)i?(h="Channel.MessageTitleUpdated",m.push(e.title)):(h="Notification.ChangedGroupName",m.push("%action_origin%",e.title));else if(e instanceof s.Api.MessageActionChatEditPhoto)i?h="Channel.MessagePhotoUpdated":(h="Notification.ChangedGroupPhoto",m.push("%action_origin%"));else if(e instanceof s.Api.MessageActionChatDeletePhoto)h=i?"Channel.MessagePhotoRemoved":"Group.MessagePhotoRemoved";else if(e instanceof s.Api.MessageActionChatAddUser)!t||C.includes(t)?(h="Notification.JoinedChat",m.push("%target_user%")):(h="Notification.Invited",m.push("%action_origin%","%target_user%"));else if(e instanceof s.Api.MessageActionChatDeleteUser)!t||C.includes(t)?(h="Notification.LeftChat",m.push("%target_user%")):(h="Notification.Kicked",m.push("%action_origin%","%target_user%"));else if(e instanceof s.Api.MessageActionChatJoinedByLink)h="Notification.JoinedGroupByLink",m.push("%action_origin%");else if(e instanceof s.Api.MessageActionChannelCreate)h="Notification.CreatedChannel";else if(e instanceof s.Api.MessageActionChatMigrateTo)S=(0,p.iC)(e),h="Migrated to %target_chat%",m.push("%target_chat%");else if(e instanceof s.Api.MessageActionChannelMigrateFrom)S=(0,p.iC)(e),h="Migrated from %target_chat%",m.push("%target_chat%");else if(e instanceof s.Api.MessageActionPinMessage)h="Chat.Service.Group.UpdatedPinnedMessage1",m.push("%action_origin%","%message%");else if(e instanceof s.Api.MessageActionHistoryClear)h="HistoryCleared",I="historyClear";else if(e instanceof s.Api.MessageActionPhoneCall){const t=Boolean(e.duration);if(h=[t?"ChatList.Service":"Chat",e.video?"VideoCall":"Call",a?t?"outgoing":"Outgoing":t?"incoming":"Incoming"].join("."),t){const t=Math.max(Math.round(e.duration/60),1);m.push(`${t} min${t>1?"s":""}`)}o={isOutgoing:a,isVideo:e.video,duration:e.duration,reason:(0,l.PR)(e.reason)}}else if(e instanceof s.Api.MessageActionInviteToGroupCall)h="Notification.VoiceChatInvitation",r={id:e.call.id.toString(),accessHash:e.call.accessHash.toString()},m.push("%action_origin%","%target_user%");else if(e instanceof s.Api.MessageActionContactSignUp)h="Notification.Joined",m.push("%action_origin%"),I="contactSignUp";else if(e instanceof s.Api.MessageActionPaymentSent)u=Number(e.totalAmount),c=e.currency,h="PaymentSuccessfullyPaid",n&&C.push(n),m.push("%payment_amount%","%target_user%","%product%");else if(e instanceof s.Api.MessageActionGroupCall)if(e.duration){const t=Math.max(Math.round(e.duration/60),1);h="Notification.VoiceChatEnded",m.push(`${t} min${t>1?"s":""}`)}else h="Notification.VoiceChatStartedChannel",r={id:e.call.id.toString(),accessHash:e.call.accessHash.toString()};else if(e instanceof s.Api.MessageActionBotAllowed)h="Chat.Service.BotPermissionAllowed",m.push(e.domain);else if(e instanceof s.Api.MessageActionCustomAction)h=e.message;else if(e instanceof s.Api.MessageActionChatJoinedByRequest)h="ChatService.UserJoinedGroupByRequest",m.push("%action_origin%");else if(e instanceof s.Api.MessageActionGameScore)h=t===b?"ActionYouScoredInGame":"ActionUserScoredInGame",m.push("%score%"),y=e.score;else if(e instanceof s.Api.MessageActionWebViewDataSent)h="Notification.WebAppSentData",m.push(e.text);else if(e instanceof s.Api.MessageActionGiftPremium)h=a?"ActionGiftOutbound":"ActionGiftInbound",a?m.push("%gift_payment_amount%"):m.push("%action_origin%","%gift_payment_amount%"),n&&C.push(n),c=e.currency,u=e.amount.toJSNumber(),A=e.months;else if(e instanceof s.Api.MessageActionTopicCreate)h="TopicWasCreatedAction",I="topicCreate",m.push(e.title);else if(e instanceof s.Api.MessageActionTopicEdit)void 0!==e.closed?(h=e.closed?"TopicWasClosedAction":"TopicWasReopenedAction",m.push("%action_origin%","%action_topic%")):void 0!==e.hidden?h=e.hidden?"TopicHidden2":"TopicShown":e.title?(h="TopicRenamedTo",m.push("%action_origin%",e.title)):e.iconEmojiId?(h="TopicWasIconChangedToAction",m.push("%action_origin%","%action_topic_icon%"),w=e.iconEmojiId.toString()):h="ChatList.UnsupportedMessage",v=!0;else if(e instanceof s.Api.MessageActionAttachMenuBotAllowed)h="ActionAttachMenuBotAllowed";else if(e instanceof s.Api.MessageActionSuggestProfilePhoto){const i=e.photo instanceof s.Api.Photo&&e.photo.videoSizes?.length;h=t===b?i?"ActionSuggestVideoFromYouDescription":"ActionSuggestPhotoFromYouDescription":i?"ActionSuggestVideoToYouDescription":"ActionSuggestPhotoToYouDescription",I="suggestProfilePhoto",m.push("%target_user%"),n&&C.push(n)}else h="ChatList.UnsupportedMessage";return"photo"in e&&e.photo instanceof s.Api.Photo&&((0,f.Hh)(e.photo),g=(0,d.lq)(e.photo)),{text:h,type:I,targetUserIds:C,targetChatId:S,photo:g,amount:u,currency:c,translationValues:m,call:r,phoneCall:o,score:y,months:A,topicEmojiIconId:w,isTopicAction:v}}(t.action,n,i,Boolean(t.post),o);u&&(r.action=u);const c=t.media instanceof s.Api.MessageMediaInvoice&&Boolean(t.media.extendedMedia),{replyToMsgId:m,replyToTopId:g,forumTopic:y,replyToPeerId:A}=t.replyTo||{},w=t.editDate&&!t.editHide,{inlineButtons:v,keyboardButtons:I,keyboardPlaceholder:C,isKeyboardSingleUse:S,isKeyboardSelective:P}=function(e,t){const{replyMarkup:n,media:i}=e;if(!n)return i instanceof s.Api.MessageMediaWebPage&&i.webpage instanceof s.Api.WebPage&&"telegram_message"===i.webpage.type?{inlineButtons:[[{type:"url",text:"Show Message",url:i.webpage.url}]]}:void 0;if(!(n instanceof s.Api.ReplyKeyboardMarkup||n instanceof s.Api.ReplyInlineMarkup))return;const a=n.rows.map((({buttons:e})=>e.map((e=>{const{text:n}=e;if(e instanceof s.Api.KeyboardButton)return{type:"command",text:n};if(e instanceof s.Api.KeyboardButtonUrl)return e.url.includes("?startgroup=")?{type:"unsupported",text:n}:{type:"url",text:n,url:e.url};if(e instanceof s.Api.KeyboardButtonCallback)return e.requiresPassword?{type:"unsupported",text:n}:{type:"callback",text:n,data:(0,f.TC)(e.data)};if(e instanceof s.Api.KeyboardButtonRequestPoll)return{type:"requestPoll",text:n,isQuiz:e.quiz};if(e instanceof s.Api.KeyboardButtonRequestPhone)return{type:"requestPhone",text:n};if(e instanceof s.Api.KeyboardButtonBuy){if(i instanceof s.Api.MessageMediaInvoice&&i.receiptMsgId)return{type:"receipt",text:"PaymentReceipt",receiptMessageId:i.receiptMsgId};if(t)return;return{type:"buy",text:n}}return e instanceof s.Api.KeyboardButtonGame?{type:"game",text:n}:e instanceof s.Api.KeyboardButtonSwitchInline?{type:"switchBotInline",text:n,query:e.query,isSamePeer:e.samePeer}:e instanceof s.Api.KeyboardButtonUserProfile?{type:"userProfile",text:n,userId:e.userId.toString()}:e instanceof s.Api.KeyboardButtonSimpleWebView?{type:"simpleWebView",text:n,url:e.url}:e instanceof s.Api.KeyboardButtonWebView?{type:"webView",text:n,url:e.url}:e instanceof s.Api.KeyboardButtonUrlAuth?{type:"urlAuth",text:n,url:e.url,buttonId:e.buttonId}:{type:"unsupported",text:n}})).filter(Boolean)));return a.every((e=>!e.length))?void 0:{[n instanceof s.Api.ReplyKeyboardMarkup?"keyboardButtons":"inlineButtons"]:a,...n instanceof s.Api.ReplyKeyboardMarkup&&{keyboardPlaceholder:n.placeholder,isKeyboardSingleUse:n.singleUse,isKeyboardSelective:n.selective}}}(t,c)||{},M=t.fwdFrom&&function(e,t=!1){const n=e.savedFromPeer&&(0,p.iC)(e.savedFromPeer),s=e.fromId&&(0,p.iC)(e.fromId);return{date:e.date,isImported:e.imported,isChannelPost:Boolean(e.channelPost),channelPostId:e.channelPost,isLinkedChannelPost:Boolean(e.channelPost&&n&&!t),fromChatId:n||s,fromMessageId:e.savedFromMsgId||e.channelPost,senderUserId:s,hiddenUserName:e.fromName,postAuthorTitle:e.postAuthor}}(t.fwdFrom,a),{replies:R,mediaUnread:E,postAuthor:D}=t,U=t.groupedId&&String(t.groupedId),T=Boolean(U)&&!(r.document||r.audio||r.sticker),B=t.replyMarkup instanceof s.Api.ReplyKeyboardHide,_=t.replyMarkup instanceof s.Api.ReplyKeyboardHide&&t.replyMarkup.selective,x=t.noforwards||c,N=!t.noforwards,q=(0,h.k)(r,U);return{id:t.id,chatId:e,isOutgoing:o,content:r,date:t.date,senderId:n||t.out&&t.post&&b||e,views:t.views,forwards:t.forwards,isFromScheduled:t.fromScheduled,isSilent:t.silent,reactions:t.reactions&&k(t.reactions),...q&&{emojiOnlyCount:q},...m&&{replyToMessageId:m},...y&&{isTopicReply:!0},...A&&{replyToChatId:(0,p.iC)(A)},...g&&{replyToTopMessageId:g},...M&&{forwardInfo:M},...w&&{isEdited:w},...t.editDate&&{editDate:t.editDate},...E&&{isMediaUnread:E},...t.mentioned&&E&&{hasUnreadMention:!0},...t.mentioned&&{isMentioned:!0},...U&&{groupedId:U,isInAlbum:T},inlineButtons:v,...I&&{keyboardButtons:I,keyboardPlaceholder:C,isKeyboardSingleUse:S,isKeyboardSelective:P},...B&&{shouldHideKeyboardButtons:B,isHideKeyboardSelective:_},...t.viaBotId&&{viaBotId:(0,p.Xo)(t.viaBotId,"user")},...R&&{repliesThreadInfo:ee(R,t.id,e)},...D&&{postAuthorTitle:D},isProtected:x,isForwardingAllowed:N}}function k(e){const{recentReactions:t,results:n,canSeeList:s}=e;return{canSeeList:s,results:n.map(B).filter(Boolean).sort(T),recentReactions:t?.map(_).filter(Boolean)}}function T(e,t){return t.count-e.count||(void 0!==e.chosenOrder&&void 0!==t.chosenOrder?e.chosenOrder-t.chosenOrder:void 0!==e.chosenOrder?1:void 0!==t.chosenOrder?-1:0)}function B(e){const{chosenOrder:t,count:n,reaction:s}=e,i=x(s);if(i)return{chosenOrder:t,count:n,reaction:i}}function _(e){const{peerId:t,reaction:n,big:s,unread:i}=e,a=x(n);if(a)return{userId:(0,p.iC)(t),reaction:a,isUnread:i,isBig:s}}function x(e){return e instanceof s.Api.ReactionEmoji?{emoticon:e.emoticon}:e instanceof s.Api.ReactionCustomEmoji?{documentId:e.documentId.toString()}:void 0}function N(e){const{selectAnimation:t,staticIcon:n,reaction:s,title:i,inactive:a,aroundAnimation:o,centerIcon:r,effectAnimation:d,activateAnimation:u,premium:c}=e;return{selectAnimation:F(t),activateAnimation:F(u),effectAnimation:F(d),staticIcon:F(n),aroundAnimation:o?F(o):void 0,centerIcon:r?F(r):void 0,reaction:{emoticon:s},title:i,isInactive:a,isPremium:c}}function H(e){let t={};e.media&&(t={...j(e.media)});const n=e.media instanceof s.Api.MessageMediaUnsupported;return!e.message||n||t.sticker||t.poll||t.contact||t.video?.isRound||(t={...t,text:q(e.message,e.entities)}),t}function q(e,t){return{text:e,...t&&{entities:t.map(Y)}}}function G(e){if(e instanceof s.Api.DraftMessageEmpty)return;const{message:t,entities:n,replyToMsgId:i,date:a}=e;return{formattedText:t?q(t,n):void 0,replyingToId:i,date:a}}function j(e){if("ttlSeconds"in e&&e.ttlSeconds)return;if("extendedMedia"in e&&e.extendedMedia instanceof s.Api.MessageExtendedMedia)return j(e.extendedMedia.media);const t=function(e){if(e instanceof s.Api.MessageMediaDocument&&e.document&&e.document instanceof s.Api.Document)return(0,r.lW)(e.document,e.nopremium)}(e);if(t)return{sticker:t};const n=function(e){if(e instanceof s.Api.MessageMediaPhoto&&e.photo&&e.photo instanceof s.Api.Photo)return(0,d.lq)(e.photo,e.spoiler)}(e);if(n)return{photo:n};const i=function(e){if(e instanceof s.Api.MessageMediaDocument&&e.document instanceof s.Api.Document&&e.document.mimeType.startsWith("video"))return O(e.document,e.spoiler)}(e);if(i)return{video:i};const a=function(e){if(!(e instanceof s.Api.MessageMediaDocument&&e.document&&e.document instanceof s.Api.Document))return;const t=e.document.attributes.find((e=>e instanceof s.Api.DocumentAttributeAudio));if(!t||t.voice)return;const n=e.document.thumbs&&e.document.thumbs.filter((e=>e instanceof s.Api.PhotoSize)).map((e=>(0,d.mx)(e)));return{id:String(e.document.id),fileName:W(e.document,"audio"),thumbnailSizes:n,size:e.document.size.toJSNumber(),...(0,o.ei)(e.document,["mimeType"]),...(0,o.ei)(t,["duration","performer","title"])}}(e);if(a)return{audio:a};const u=function(e){if(!(e instanceof s.Api.MessageMediaDocument&&e.document&&e.document instanceof s.Api.Document))return;const t=e.document.attributes.find((e=>e instanceof s.Api.DocumentAttributeAudio));if(!t||!t.voice)return;const{duration:n,waveform:i}=t;return{id:String(e.document.id),duration:n,waveform:i?Array.from(i):void 0}}(e);if(u)return{voice:u};const c=function(e){if(e instanceof s.Api.MessageMediaDocument&&e.document)return F(e.document)}(e);if(c)return{document:c};const f=function(e){if(!(e instanceof s.Api.MessageMediaContact))return;const{firstName:t,lastName:n,phoneNumber:i,userId:a}=e;return{firstName:t,lastName:n,phoneNumber:i,userId:(0,p.Xo)(a,"user")}}(e);if(f)return{contact:f};const l=function(e){if(e instanceof s.Api.MessageMediaPoll)return V(e.poll,e.results)}(e);if(l)return{poll:l};const h=K(e);if(h)return{webPage:h};const m=function(e){if(e instanceof s.Api.MessageMediaInvoice)return function(e){const{description:t,title:n,photo:i,test:a,totalAmount:o,currency:r,receiptMsgId:d,extendedMedia:u}=e,c=u instanceof s.Api.MessageExtendedMediaPreview?z(u):void 0;return{title:n,text:t,photo:Q(i),receiptMsgId:d,amount:Number(o),currency:r,isTest:a,extendedMedia:c}}(e)}(e);if(m)return{invoice:m};const g=function(e){return e instanceof s.Api.MessageMediaGeo?function(e){const t=L(e.geo);return t&&{type:"geo",geo:t}}(e):e instanceof s.Api.MessageMediaVenue?function(e){const{geo:t,title:n,provider:s,address:i,venueId:a,venueType:o}=e,r=L(t);return r&&{type:"venue",geo:r,title:n,provider:s,address:i,venueId:a,venueType:o}}(e):e instanceof s.Api.MessageMediaGeoLive?function(e){const{geo:t,period:n,heading:s}=e,i=L(t);return i&&{type:"geoLive",geo:i,period:n,heading:s}}(e):void 0}(e);if(g)return{location:g};const y=function(e){if(e instanceof s.Api.MessageMediaGame)return function(e){const{id:t,accessHash:n,shortName:i,title:a,description:o,photo:r,document:u}=e.game,c=r instanceof s.Api.Photo?(0,d.lq)(r):void 0,f=u instanceof s.Api.Document?F(u):void 0;return{id:t.toString(),accessHash:n.toString(),shortName:i,title:a,description:o,photo:c,document:f}}(e)}(e);return y?{game:y}:void 0}function O(e,t){if(e instanceof s.Api.DocumentEmpty)return;const{id:n,mimeType:i,thumbs:o,size:r,attributes:u}=e;if(i===a.KzG&&!self.isWebmSupported)return;if(i===a.Ngd&&!self.isMovSupported)return;const c=u.find((e=>e instanceof s.Api.DocumentAttributeVideo));if(!c)return;const f=u.find((e=>e instanceof s.Api.DocumentAttributeAnimated)),{duration:p,w:l,h,supportsStreaming:m=!1,roundMessage:g=!1}=c;return{id:String(n),mimeType:i,duration:p,fileName:W(e,"video"),width:l,height:h,supportsStreaming:m,isRound:g,isGif:Boolean(f),thumbnail:(0,d.Gv)(o),size:r.toJSNumber(),isSpoiler:t}}function F(e){if(!(e instanceof s.Api.Document))return;const{id:t,size:n,mimeType:i,date:o,thumbs:r,attributes:u}=e,c=r&&(0,d.Gv)(r);let f,p;const l=r&&r.find((e=>e instanceof s.Api.PhotoSize));if(l)if(p={width:l.w,height:l.h},a.oGt.has(i)){f="photo";const e=u.find((e=>e instanceof s.Api.DocumentAttributeImageSize));if(e){const{w:t,h:n}=e;p={width:t,height:n}}}else if(a.wGh.has(i)){f="video";const e=u.find((e=>e instanceof s.Api.DocumentAttributeVideo));if(e){const{w:t,h:n}=e;p={width:t,height:n}}}return{id:String(t),size:n.toJSNumber(),mimeType:i,timestamp:o,fileName:W(e),thumbnail:c,mediaType:f,mediaSize:p}}function L(e){if(e instanceof s.Api.GeoPointEmpty)return;const{long:t,lat:n,accuracyRadius:i,accessHash:a}=e;return{long:t,lat:n,accessHash:a.toString(),accuracyRadius:i}}function V(e,t){const{id:n,answers:s}=e,i=s.map((e=>({text:e.text,option:(0,f.TC)(e.option)})));return{id:String(n),summary:{isPublic:e.publicVoters,...(0,o.ei)(e,["closed","multipleChoice","quiz","question","closePeriod","closeDate"]),answers:i},results:Z(t)}}function Z(e){const{results:t,totalVoters:n,recentVoters:s,solution:i,solutionEntities:a,min:o}=e,r=t&&t.map((({option:e,chosen:t,correct:n,voters:s})=>({isChosen:t,isCorrect:n,option:(0,f.TC)(e),votersCount:s})));return{isMin:o,totalVoters:n,recentVoterIds:s?.map((e=>(0,p.Xo)(e,"user"))),results:r,solution:i,...a&&{solutionEntities:a.map(Y)}}}function K(e){if(!(e instanceof s.Api.MessageMediaWebPage&&e.webpage instanceof s.Api.WebPage))return;const{id:t,photo:n,document:i}=e.webpage;let a;return i instanceof s.Api.Document&&i.mimeType.startsWith("video/")&&(a=O(i)),{id:Number(t),...(0,o.ei)(e.webpage,["url","displayUrl","type","siteName","title","description","duration"]),photo:n instanceof s.Api.Photo?(0,d.lq)(n):void 0,document:!a&&i?F(i):void 0,video:a}}function W(e,t="file"){const{mimeType:n,attributes:i}=e,a=i.find((e=>e instanceof s.Api.DocumentAttributeFilename));if(a)return a.fileName;const o=n.split("/")[1];return`${t}${String(e.id)}.${o}`}function J(e,t,n,s,i,o,r,d,c,f,p,l,g){const y=C(),A=o&&function(e){const{filename:t,blobUrl:n,previewBlobUrl:s,mimeType:i,size:o,audio:r,shouldSendAsFile:d,shouldSendAsSpoiler:c}=e;if(!d){if(e.quick){if(a.oGt.has(i)){const{width:t,height:s}=e.quick;return{photo:{id:w,sizes:[],thumbnail:{width:t,height:s,dataUri:n},blobUrl:n,isSpoiler:c}}}if(a.wGh.has(i)){const{width:a,height:r,duration:d}=e.quick;return{video:{id:w,mimeType:i,duration:d||0,fileName:t,width:a,height:r,blobUrl:n,...s&&{thumbnail:{width:a,height:r,dataUri:s}},size:o,isSpoiler:c}}}}if(e.voice){const{duration:t,waveform:n}=e.voice,{data:s}=(0,u.C)(n,v);return{voice:{id:w,duration:t,waveform:s}}}if(a.e74.has(i)){const{duration:e,performer:n,title:s}=r||{};return{audio:{id:w,mimeType:i,fileName:t,size:o,duration:e||0,title:s,performer:n}}}}return{document:{mimeType:i,fileName:t,size:o,...s&&{previewBlobUrl:s}}}}(o),I="chatTypeChannel"===e.type,S=e.isForum,P={id:y,chatId:e.id,content:{...t&&{text:{text:t,entities:n}},...A,...r&&{sticker:r},...d&&{video:d},...c&&$(c,y),...f&&{contact:f}},date:l||Math.round(Date.now()/1e3)+(0,m.Qj)(),isOutgoing:!I,senderId:g?.id||b,...s&&{replyToMessageId:s},...i&&{replyToTopMessageId:i},...(s||i)&&S&&{isTopicReply:!0},...p&&{groupedId:p,...A&&(A.photo||A.video)&&{isInAlbum:!0}},...l&&{isScheduled:!0},isForwardingAllowed:!0},M=(0,h.k)(P.content,P.groupedId);return{...P,...M&&{emojiOnlyCount:M}}}function X({toChat:e,toThreadId:t,message:n,scheduledAt:s,noAuthors:a,noCaptions:o,isCurrentUserPremium:r}){const d=C(),{content:u,chatId:c,id:f,senderId:p,groupedId:l,isInAlbum:g}=n,y=u.audio,A=e.id===b&&(c!==e.id||n.forwardInfo)&&!y,w=Object.keys(u).length>1&&u.text&&o,v=!r,I=u.text?.entities&&v?{text:u.text.text,entities:u.text.entities.filter((e=>e.type!==i.Vv.CustomEmoji))}:u.text,S=(0,h.k)(u,l),P={...u,text:w?void 0:I};return{id:d,chatId:e.id,content:P,date:s||Math.round(Date.now()/1e3)+(0,m.Qj)(),isOutgoing:!A&&"chatTypeChannel"!==e.type,senderId:b,sendingState:"messageSendingStatePending",groupedId:l,isInAlbum:g,isForwardingAllowed:!0,replyToTopMessageId:t,...t&&e?.isForum&&{isTopicReply:!0},...S&&{emojiOnlyCount:S},...n.chatId!==b&&!y&&!a&&{forwardInfo:{date:n.date,isChannelPost:!1,fromChatId:c,fromMessageId:f,senderUserId:p}},...n.chatId===b&&!a&&{forwardInfo:n.forwardInfo},...s&&{isScheduled:!0}}}function z(e){const{w:t,h:n,thumb:s,videoDuration:i}=e;return{width:t,height:n,duration:i,thumbnail:s?(0,d.Gv)([s]):void 0}}function Q(e){if(!e)return;const{url:t,size:n,mimeType:i}=e,a=e instanceof s.Api.WebDocument?e.accessHash.toString():void 0,o=e.attributes.find((e=>e instanceof s.Api.DocumentAttributeImageSize));return{url:t,accessHash:a,size:n,mimeType:i,dimensions:o&&{width:o.w,height:o.h}}}function $(e,t){return{poll:{id:String(t),summary:(0,o.ei)(e.summary,["question","answers"]),results:{}}}}function Y(e){const{className:t,offset:n,length:a}=e;return e instanceof s.Api.MessageEntityMentionName?{type:i.Vv.MentionName,offset:n,length:a,userId:(0,p.Xo)(e.userId,"user")}:e instanceof s.Api.MessageEntityTextUrl?{type:i.Vv.TextUrl,offset:n,length:a,url:e.url}:e instanceof s.Api.MessageEntityPre?{type:i.Vv.Pre,offset:n,length:a,language:e.language}:e instanceof s.Api.MessageEntityCustomEmoji?{type:i.Vv.CustomEmoji,offset:n,length:a,documentId:e.documentId.toString()}:{type:t,offset:n,length:a}}function ee(e,t,n){const{channelId:s,replies:i,maxId:o,readMaxId:r,recentRepliers:d,comments:u}=e,c=s?(0,p.Xo)(s,"channel"):void 0;if(c!==a.deL)return{isComments:u,threadId:t,...c&&n!==c?{chatId:c,originChannelId:n}:{chatId:n},messagesCount:i,lastMessageId:o,lastReadInboxMessageId:r,...d&&{recentReplierIds:d.map(p.iC)}}}function te(e){const{text:t,entities:n}=e;return{text:t,entities:n.map(Y)}}},94830:(e,t,n)=>{"use strict";n.d(t,{HX:()=>f,JA:()=>w,OH:()=>A,Y6:()=>c,fi:()=>v,hc:()=>m,ic:()=>g,jv:()=>h,me:()=>b,ni:()=>p,r5:()=>l});var s=n(13522),i=n(3192),a=n(18935),o=n(60782),r=n(82267),d=n(92582),u=n(64250);function c(e){if(e instanceof s.Api.WallPaperNoFile)return;const{slug:t}=e,n=(0,i.Qu)(e.document);return n?{slug:t,document:n}:void 0}function f(e){return{isCurrent:Boolean(e.current),isOfficialApp:Boolean(e.officialApp),isPasswordPending:Boolean(e.passwordPending),hash:String(e.hash),areCallsEnabled:!e.callRequestsDisabled,areSecretChatsEnabled:!e.encryptedRequestsDisabled,...(0,o.ei)(e,["deviceModel","platform","systemVersion","appName","appVersion","dateCreated","dateActive","ip","country","region"])}}function p(e){return{hash:String(e.hash),botId:(0,a.Xo)(e.botId,"user"),...(0,o.ei)(e,["platform","browser","dateCreated","dateActive","ip","region","domain"])}}function l(e){switch(e.className){case"PrivacyKeyPhoneNumber":return"phoneNumber";case"PrivacyKeyStatusTimestamp":return"lastSeen";case"PrivacyKeyProfilePhoto":return"profilePhoto";case"PrivacyKeyPhoneCall":return"phoneCall";case"PrivacyKeyPhoneP2P":return"phoneP2P";case"PrivacyKeyForwards":return"forwards";case"PrivacyKeyVoiceMessages":return"voiceMessages";case"PrivacyKeyChatInvite":return"chatInvite"}}function h(e){let t,n,i,o,r;return e.forEach((e=>{e instanceof s.Api.PrivacyValueAllowAll?t=t||"everybody":e instanceof s.Api.PrivacyValueAllowContacts?t=t||"contacts":e instanceof s.Api.PrivacyValueDisallowContacts?t=t||"nonContacts":e instanceof s.Api.PrivacyValueDisallowAll?t=t||"nobody":e instanceof s.Api.PrivacyValueAllowUsers?n=e.users.map((e=>(0,a.Xo)(e,"user"))):e instanceof s.Api.PrivacyValueDisallowUsers?o=e.users.map((e=>(0,a.Xo)(e,"user"))):e instanceof s.Api.PrivacyValueAllowChatParticipants?i=e.chats.map((e=>(0,a.Xo)(e,"chat"))):e instanceof s.Api.PrivacyValueDisallowChatParticipants&&(r=e.chats.map((e=>(0,a.Xo)(e,"chat"))))})),t||(t="nobody"),{visibility:t,allowUserIds:n||[],allowChatIds:i||[],blockUserIds:o||[],blockChatIds:r||[]}}function m(e,t){const{silent:n,muteUntil:i,showPreviews:o,otherSound:d}=e,u=Boolean(d&&!(d instanceof s.Api.NotificationSoundNone));return{chatId:(0,a.iC)(t),isMuted:n||"number"==typeof i&&(0,r.bp)()<i,...!u&&{isSilent:!0},...void 0!==o&&{shouldShowPreviews:Boolean(o)}}}function g(e,t,n){const{silent:i,muteUntil:o,showPreviews:d,otherSound:u}=e,c=Boolean(u&&!(u instanceof s.Api.NotificationSoundNone));return{chatId:(0,a.iC)(t),topicId:n,isMuted:i||"number"==typeof o&&(0,r.bp)()<o,...!c&&{isSilent:!0},...void 0!==d&&{shouldShowPreviews:Boolean(d)}}}function y(e,t){const{hidden:n,iso2:s,defaultName:i,name:a}=e,{countryCode:o,prefixes:r,patterns:d}=t||{};return{isHidden:n,iso2:s,defaultName:i,name:a,countryCode:o,prefixes:r,patterns:d}}function A(e){const t=e.filter((({hidden:e})=>!e));return{phoneCodes:t.map((e=>e.countryCodes.map((t=>y(e,t))))).flat().sort(((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName))),general:t.map((e=>y(e,e.countryCodes[0]))).sort(((e,t)=>e.name?e.name.localeCompare(t.name):e.defaultName.localeCompare(t.defaultName)))}}function w(e){if(!(e instanceof s.Api.JsonNull))return e instanceof s.Api.JsonString||e instanceof s.Api.JsonBool||e instanceof s.Api.JsonNumber?e.value:e instanceof s.Api.JsonArray?e.value.map(w):e.value.reduce(((e,t)=>(e[t.key]=w(t.value),e)),{})}function v(e){if(e instanceof s.Api.UrlAuthResultRequest){const{bot:t,domain:n,requestWriteAccess:s}=e,i=(0,d.PH)(t);if(!i)return;return(0,u.aK)(t),{type:"request",domain:n,shouldRequestWriteAccess:s,bot:i}}return e instanceof s.Api.UrlAuthResultAccepted?{type:"accepted",url:e.url}:e instanceof s.Api.UrlAuthResultDefault?{type:"default"}:void 0}function b(e){const t=e.reactionsDefault&&(0,i.uN)(e.reactionsDefault);return{expiresAt:e.expires,gifSearchUsername:e.gifSearchUsername,defaultReaction:t,maxGroupSize:e.chatSizeMax}}},28441:(e,t,n)=>{"use strict";n.d(t,{G:()=>a});const s='<?xml version="1.0" encoding="utf-8"?><svg version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 {{width}} {{height}}" xml:space="preserve"><path fill-opacity="0.1" d="{{path}}" /></svg>',i="AACAAAAHAAALMAAAQASTAVAAAZaacaaaahaaalmaaaqastava.az0123456789-,";function a(e,t,n){return s.replace("{{path}}",function(e){let t="M";const n=e.length;for(let s=0;s<n;s++){const n=e[s];n>=192?t+=i[n-128-64]:(n>=128?t+=",":n>=64&&(t+="-"),t+=String(63&n))}return t+="z",t}(e)).replace("{{width}}",String(t)).replace("{{height}}",String(n))}},18935:(e,t,n)=>{"use strict";function s(e){return e.hasOwnProperty("userId")}function i(e){return e.hasOwnProperty("chatId")}function a(e,t){return"user"===t?String(e):`-${e}`}function o(e){return s(e)?a(e.userId,"user"):i(e)?a(e.chatId,"chat"):a(e.channelId,"channel")}n.d(t,{$L:()=>i,Qk:()=>s,Xo:()=>a,iC:()=>o})},67606:(e,t,n)=>{"use strict";n.d(t,{K:()=>p,Qb:()=>f,bV:()=>h,jV:()=>c,lW:()=>u,yN:()=>l});var s=n(13522),i=n(55237),a=n(15023),o=n(60782);const r="application/x-tgsticker",d="video/webm";function u(e,t){var n;if(e instanceof s.Api.DocumentEmpty)return;const{mimeType:a,videoThumbs:u}=e,c=e.attributes.find((e=>e instanceof s.Api.DocumentAttributeSticker)),f=e.attributes.find((e=>e instanceof s.Api.DocumentAttributeCustomEmoji)),p=(a===r||a===d)&&e.attributes.find((e=>e instanceof s.Api.DocumentAttributeFilename));if(!c&&!f&&!p)return;const l=a===r,h=a===d,m=Boolean(f),g=m&&f.textColor,y=e.attributes.find((e=>e instanceof s.Api.DocumentAttributeImageSize)),A=e.attributes.find((e=>e instanceof s.Api.DocumentAttributeVideo)),w=y||A,v=c||f,b=(P=v?.stickerset,P instanceof s.Api.InputStickerSetID?{id:String(P.id),accessHash:String(P.accessHash)}:P instanceof s.Api.InputStickerSetShortName?{shortName:P.shortName}:{isMissing:!0}),I=v?.alt,C=Boolean(null===(n=f?.free)||void 0===n||n),S=e.thumbs&&e.thumbs.find((e=>e instanceof s.Api.PhotoCachedSize));var P;if(!(a!==d||self.isWebmSupported||S||e.thumbs&&e.thumbs.find((e=>e instanceof s.Api.PhotoSize))))return;const M=e.thumbs&&e.thumbs.find((e=>e instanceof s.Api.PhotoPathSize)),R=S?(0,i.T8)(S):M&&w?(0,i.wu)(M,w):void 0,{w:E,h:D}=S||w||{},U=!t&&u&&(0,o.oA)(u?.filter((e=>e instanceof s.Api.VideoSize))).some((({type:e})=>"f"===e));return{id:String(e.id),stickerSetInfo:b,emoji:I,isCustomEmoji:m,isLottie:l,isVideo:h,width:E,height:D,thumbnail:R,hasEffect:U,isFree:C,shouldUseTextColor:g}}function c(e){const{archived:t,animated:n,installedDate:s,videos:i,id:a,accessHash:o,title:r,thumbs:d,count:u,shortName:c,emojis:f,thumbDocumentId:p}=e;return{isArchived:t,isLottie:n,isVideos:i,isEmoji:f,installedDate:s,id:String(a),accessHash:String(o),title:r,hasThumbnail:Boolean(d?.length||p),count:u,shortName:c}}function f(e){const t=c(e.set);if(e instanceof s.Api.StickerSetNoCovered)return t;const n=h(e instanceof s.Api.StickerSetCovered?[e.cover]:e instanceof s.Api.StickerSetMultiCovered?e.covers:e.documents);return e instanceof s.Api.StickerSetFullCovered?{...t,stickers:n,packs:l(e.packs)}:{...t,covers:n}}function p(e){return{timestamps:e.a.map((({t:e})=>e))}}function l(e){return e.reduce(((e,{emoticon:t,documents:n})=>(e[t]=n.map((e=>u(a.ZP.documents[String(e)]))).filter(Boolean),e)),{})}function h(e){return e.map((e=>{if(e instanceof s.Api.Document){const t=u(e);if(t)return a.ZP.documents[String(e.id)]=e,t}})).filter(Boolean)}},92582:(e,t,n)=>{"use strict";n.d(t,{PH:()=>d,YF:()=>f,ku:()=>u,q:()=>r,wj:()=>c});var s=n(13522),i=n(18935),a=n(6999),o=n(55237);function r(e){const{fullUser:{about:t,commonChatsCount:n,pinnedMsgId:i,botInfo:r,blocked:u,profilePhoto:c,voiceMessagesForbidden:f,premiumGifts:p,fallbackPhoto:l,personalPhoto:h},users:m}=e,g=d(m[0]);return{...g,fullInfo:{...c instanceof s.Api.Photo&&{profilePhoto:(0,o.lq)(c)},...l instanceof s.Api.Photo&&{fallbackPhoto:(0,o.lq)(l)},...h instanceof s.Api.Photo&&{personalPhoto:(0,o.lq)(h)},bio:t,commonChatsCount:n,pinnedMessageId:i,isBlocked:Boolean(u),noVoiceMessages:f,...p&&{premiumGifts:p.map((e=>function(e){const{months:t,currency:n,amount:s,botUrl:i}=e;return{months:t,currency:n,amount:s.toJSNumber(),botUrl:i}}(e)))},...r&&{botInfo:(0,a.E)(r,g.id)}}}}function d(e){if(!(e instanceof s.Api.User))return;const{id:t,firstName:n,lastName:a,fake:r,scam:d}=e,u=e.photo instanceof s.Api.UserProfilePhoto?Boolean(e.photo.hasVideo):void 0,f=e.photo instanceof s.Api.UserProfilePhoto?String(e.photo.photoId):void 0,p=(m=e).bot?"userTypeBot":m.deleted?"userTypeDeleted":"userTypeRegular",l=(0,o.T4)(e),h=e.emojiStatus?c(e.emojiStatus):void 0;var m;return{id:(0,i.Xo)(t,"user"),isMin:Boolean(e.min),fakeType:d?"scam":r?"fake":void 0,...e.self&&{isSelf:!0},isPremium:Boolean(e.premium),...e.verified&&{isVerified:!0},...(e.contact||e.mutualContact)&&{isContact:!0},type:p,...n&&{firstName:n},..."userTypeBot"===p&&{canBeInvitedToGroup:!e.botNochats},...a&&{lastName:a},...l&&{usernames:l},phoneNumber:e.phone||"",noStatus:!e.status,...e.accessHash&&{accessHash:String(e.accessHash)},...f&&{avatarHash:f},emojiStatus:h,hasVideoAvatar:u,...e.bot&&e.botInlinePlaceholder&&{botPlaceholder:e.botInlinePlaceholder},...e.bot&&e.botAttachMenu&&{isAttachBot:e.botAttachMenu}}}function u(e){return!e||e instanceof s.Api.UserStatusEmpty?{type:"userStatusEmpty"}:e instanceof s.Api.UserStatusOnline?{type:"userStatusOnline",expires:e.expires}:e instanceof s.Api.UserStatusOffline?{type:"userStatusOffline",wasOnline:e.wasOnline}:e instanceof s.Api.UserStatusRecently?{type:"userStatusRecently"}:e instanceof s.Api.UserStatusLastWeek?{type:"userStatusLastWeek"}:{type:"userStatusLastMonth"}}function c(e){return e instanceof s.Api.EmojiStatus?{documentId:e.documentId.toString()}:e instanceof s.Api.EmojiStatusUntil?{documentId:e.documentId.toString(),until:e.until}:void 0}function f(e){const t={},n=[];return e.forEach((e=>{const s=d(e);s&&(n.push(s),"status"in e&&(t[s.id]=u(e.status)))})),{users:n,userStatusesById:t}}},4973:(e,t,n)=>{"use strict";n.d(t,{$x:()=>B,AY:()=>O,Bs:()=>R,GB:()=>h,HD:()=>S,J4:()=>w,LU:()=>K,M6:()=>T,NA:()=>U,Oh:()=>F,T4:()=>G,VC:()=>q,Wl:()=>k,ZV:()=>_,Zm:()=>l,_U:()=>D,bJ:()=>C,bQ:()=>N,cg:()=>P,e6:()=>V,fV:()=>x,fv:()=>Z,h6:()=>m,i4:()=>y,ii:()=>A,ns:()=>M,p6:()=>H,sq:()=>v,wk:()=>b,xU:()=>j,y7:()=>L,yA:()=>g,yT:()=>I,zA:()=>E});var s=n(24736),i=n.n(s),a=n(13522),o=n(89618),r=n(59187),d=n(15023),u=n(60782),c=n(64250),f=n(83716);const p=11;function l(e){return"number"==typeof e?function(e){return e>0?"user":e<=-1e9?"channel":"chat"}(e):e.startsWith("-")?e.length>=p?"channel":"chat":"user"}function h(e){const t=l(e);return"user"===t?new a.Api.PeerUser({userId:G(e,"user")}):"channel"===t?new a.Api.PeerChannel({channelId:G(e,"channel")}):new a.Api.PeerChat({chatId:G(e,"chat")})}function m(e,t){const n=l(e);return"user"===n?new a.Api.InputPeerUser({userId:G(e,"user"),accessHash:i()(t)}):"channel"===n?new a.Api.InputPeerChannel({channelId:G(e,"channel"),accessHash:i()(t)}):new a.Api.InputPeerChat({chatId:G(e,"chat")})}function g(e,t){const n=l(e);return"user"===n?new a.Api.InputUser({userId:G(e,"user"),accessHash:i()(t)}):"channel"===n?new a.Api.InputChannel({channelId:G(e,"channel"),accessHash:i()(t)}):G(e,"chat")}function y(e,t){return new a.Api.InputStickerSetID({id:i()(e),accessHash:i()(t)})}function A(e){return new a.Api.InputStickerSetShortName({shortName:e})}function w(e){const t=d.ZP.documents[e.id];if(t)return new a.Api.InputDocument((0,u.ei)(t,["id","accessHash","fileReference"]))}function v(e){const t=w(e);if(t)return new a.Api.InputMediaDocument({id:t})}function b(e,t){const{summary:n,quiz:s}=e,i=new a.Api.Poll({id:t,publicVoters:n.isPublic,question:n.question,answers:n.answers.map((({text:e,option:t})=>new a.Api.PollAnswer({text:e,option:(0,c.Tf)(t)}))),quiz:n.quiz,multipleChoice:n.multipleChoice});if(!s)return new a.Api.InputMediaPoll({poll:i});const o=s.correctAnswers.map(c.Tf),{solution:r}=s,d=s.solutionEntities?s.solutionEntities.map(M):[];return new a.Api.InputMediaPoll({poll:i,correctAnswers:o,...r&&{solution:r,solutionEntities:d}})}function I(e,t=!1){return new a.Api.InputMediaPoll({poll:new a.Api.Poll({id:i()(e.id),publicVoters:e.summary.isPublic,question:e.summary.question,answers:e.summary.answers.map((({text:e,option:t})=>new a.Api.PollAnswer({text:e,option:(0,c.Tf)(t)}))),quiz:e.summary.quiz,multipleChoice:e.summary.multipleChoice,closeDate:e.summary.closeDate,closePeriod:e.summary.closePeriod,closed:!!t||e.summary.closed}),correctAnswers:e.results.results?.filter((e=>e.isCorrect)).map((e=>(0,c.Tf)(e.option))),solution:e.results.solution,solutionEntities:e.results.solutionEntities?.map(M)})}function C(){return(0,o.readBigIntFromBuffer)((0,o.generateRandomBytes)(8),!0,!0)}function S(){return(0,o.readBigIntFromBuffer)((0,o.generateRandomBytes)(4),!0,!0).toJSNumber()}function P(e,t,n){return new a.Api.Message({id:e,peerId:h(t),fromId:h(t),media:n.media})}function M(e){const{type:t,offset:n,length:s}=e,o="userId"in e?d.ZP.users[e.userId]:void 0;switch(t){case r.Vv.Bold:return new a.Api.MessageEntityBold({offset:n,length:s});case r.Vv.Italic:return new a.Api.MessageEntityItalic({offset:n,length:s});case r.Vv.Underline:return new a.Api.MessageEntityUnderline({offset:n,length:s});case r.Vv.Strike:return new a.Api.MessageEntityStrike({offset:n,length:s});case r.Vv.Code:return new a.Api.MessageEntityCode({offset:n,length:s});case r.Vv.Pre:return new a.Api.MessageEntityPre({offset:n,length:s,language:e.language||""});case r.Vv.Blockquote:return new a.Api.MessageEntityBlockquote({offset:n,length:s});case r.Vv.TextUrl:return new a.Api.MessageEntityTextUrl({offset:n,length:s,url:e.url});case r.Vv.Url:return new a.Api.MessageEntityUrl({offset:n,length:s});case r.Vv.Hashtag:return new a.Api.MessageEntityHashtag({offset:n,length:s});case r.Vv.MentionName:return new a.Api.InputMessageEntityMentionName({offset:n,length:s,userId:new a.Api.InputUser({userId:i()(o.id),accessHash:o.accessHash})});case r.Vv.Spoiler:return new a.Api.MessageEntitySpoiler({offset:n,length:s});case r.Vv.CustomEmoji:return new a.Api.MessageEntityCustomEmoji({offset:n,length:s,documentId:i()(e.documentId)});default:return new a.Api.MessageEntityUnknown({offset:n,length:s})}}function R(e){const{media:t}=e;return!!t&&(t instanceof a.Api.MessageMediaPhoto||t instanceof a.Api.MessageMediaDocument||t instanceof a.Api.MessageMediaWebPage&&t.webpage instanceof a.Api.WebPage&&(t.webpage.photo instanceof a.Api.Photo||t.webpage.document instanceof a.Api.Document&&t.webpage.document.mimeType.startsWith("video"))||t instanceof a.Api.MessageMediaGame&&(t.game.document instanceof a.Api.Document||t.game.photo instanceof a.Api.Photo)||t instanceof a.Api.MessageMediaInvoice&&(t.photo||t.extendedMedia))}function E(e){return"photo"in e.action&&e.action.photo instanceof a.Api.Photo}function D(e){if(e instanceof a.Api.PhotoEmpty)return new a.Api.ChatPhotoEmpty;const{dcId:t,id:n}=e;return new a.Api.ChatPhoto({dcId:t,photoId:n})}function U(e){const t=d.ZP.photos[e?.id];if(t)return new a.Api.InputPhoto((0,u.ei)(t,["id","accessHash","fileReference"]))}function k({phone:e,firstName:t,lastName:n}){return new a.Api.InputPhoneContact({clientId:i()(1),phone:e,firstName:t,lastName:n})}function T(e,t=0){return new a.Api.ChatBannedRights({...e,untilDate:t})}function B(e){return new a.Api.ChatAdminRights(e)}function _(e){const{shippingAddress:t}=e;return new a.Api.PaymentRequestedInfo({...e,shippingAddress:t?new a.Api.PostAddress(t):void 0})}function x(e){switch(e){case"phoneNumber":return new a.Api.InputPrivacyKeyPhoneNumber;case"lastSeen":return new a.Api.InputPrivacyKeyStatusTimestamp;case"profilePhoto":return new a.Api.InputPrivacyKeyProfilePhoto;case"forwards":return new a.Api.InputPrivacyKeyForwards;case"chatInvite":return new a.Api.InputPrivacyKeyChatInvite;case"phoneCall":return new a.Api.InputPrivacyKeyPhoneCall;case"phoneP2P":return new a.Api.InputPrivacyKeyPhoneP2P;case"voiceMessages":return new a.Api.InputPrivacyKeyVoiceMessages}}function N(e){switch(e){case"spam":return new a.Api.InputReportReasonSpam;case"violence":return new a.Api.InputReportReasonViolence;case"childAbuse":return new a.Api.InputReportReasonChildAbuse;case"pornography":return new a.Api.InputReportReasonPornography;case"copyright":return new a.Api.InputReportReasonCopyright;case"fake":return new a.Api.InputReportReasonFake;case"geoIrrelevant":return new a.Api.InputReportReasonGeoIrrelevant;case"illegalDrugs":return new a.Api.InputReportReasonIllegalDrugs;case"personalDetails":return new a.Api.InputReportReasonPersonalDetails;case"other":return new a.Api.InputReportReasonOther}}function H(e){switch(e.type){case"cancel":return new a.Api.SendMessageCancelAction;case"typing":return new a.Api.SendMessageTypingAction;case"recordAudio":return new a.Api.SendMessageRecordAudioAction;case"chooseSticker":return new a.Api.SendMessageChooseStickerAction;case"playingGame":return new a.Api.SendMessageGamePlayAction}}function q(e){return new a.Api.DataJSON({data:JSON.stringify(e)})}function G(e,t){return"number"==typeof e?i()(Math.abs(e)):"user"===t?i()(e):i()(e.slice(1))}function j(e){return new a.Api.InputGroupCall({id:i()(e.id),accessHash:i()(e.accessHash)})}function O({id:e,accessHash:t}){return new a.Api.InputPhoneCall({id:i()(e),accessHash:i()(t)})}function F(e){return"slug"in e?new a.Api.InputInvoiceSlug({slug:e.slug}):new a.Api.InputInvoiceMessage({peer:m(e.chat.id,e.chat.accessHash),msgId:e.messageId})}function L(e){return e&&"emoticon"in e?new a.Api.ReactionEmoji({emoticon:e.emoticon}):e&&"documentId"in e?new a.Api.ReactionCustomEmoji({documentId:i()(e.documentId)}):new a.Api.ReactionEmpty}function V(e){return"all"===e?.type?new a.Api.ChatReactionsAll({allowCustom:e.areCustomAllowed}):"some"===e?.type?new a.Api.ChatReactionsSome({reactions:e.allowed.map(L)}):new a.Api.ChatReactionsNone}function Z(e,t){return e.id===f.MW8?new a.Api.EmojiStatusEmpty:t?new a.Api.EmojiStatusUntil({documentId:i()(e.id),until:t}):new a.Api.EmojiStatus({documentId:i()(e.id)})}function K(e){return new a.Api.TextWithEntities({text:e.text,entities:e.entities?.map(M)||[]})}},64250:(e,t,n)=>{"use strict";n.d(t,{Fx:()=>m,Hh:()=>p,MZ:()=>c,TC:()=>g,Tf:()=>y,aK:()=>l,cM:()=>A,eQ:()=>h,iv:()=>f});var s=n(13522),i=n(15023),a=n(18935),o=n(48764).Buffer;const r="#111111DD",d="#E4D00A",u={INVOKE:"#49DBF5",RESPONSE:"#6887F7",CONNECTING:"#E4D00A",CONNECTED:"#26D907","CONNECTING ERROR":"#D1191C","INVOKE ERROR":"#D1191C",UPDATE:"#0DD151","UNEXPECTED UPDATE":"#9C9C9C","UNEXPECTED RESPONSE":"#D1191C"};function c(e){if(e instanceof s.Api.Message||e instanceof s.Api.MessageService)return(0,a.iC)(e.peerId)}function f(e){const t=`${c(e)}-${e.id}`;let n=e;e instanceof s.Api.Message&&e.media instanceof s.Api.MessageMediaInvoice&&e.media.extendedMedia instanceof s.Api.MessageExtendedMedia&&(n=new s.Api.Message({...e,media:e.media.extendedMedia.media})),i.ZP.messages[t]=n,n instanceof s.Api.Message&&(n.media instanceof s.Api.MessageMediaDocument&&n.media.document instanceof s.Api.Document&&(i.ZP.documents[String(n.media.document.id)]=n.media.document),n.media instanceof s.Api.MessageMediaWebPage&&n.media.webpage instanceof s.Api.WebPage&&n.media.webpage.document instanceof s.Api.Document&&(i.ZP.documents[String(n.media.webpage.document.id)]=n.media.webpage.document),n.media instanceof s.Api.MessageMediaGame&&(n.media.game.document instanceof s.Api.Document&&(i.ZP.documents[String(n.media.game.document.id)]=n.media.game.document),p(n.media.game.photo)),n.media instanceof s.Api.MessageMediaInvoice&&n.media.photo&&(i.ZP.webDocuments[String(n.media.photo.url)]=n.media.photo)),n instanceof s.Api.MessageService&&"photo"in n.action&&p(n.action.photo)}function p(e){e instanceof s.Api.Photo&&(i.ZP.photos[String(e.id)]=e)}function l(e,t=!1){const n=(0,a.Xo)(e.id,"user");!t&&i.ZP.users[n]||(i.ZP.users[n]=e)}function h(e){e.forEach((e=>{e instanceof s.Api.User&&e.photo?l(e):(e instanceof s.Api.Chat||e instanceof s.Api.Channel)&&e.photo&&function(e,t=!1){const n=(0,a.Xo)(e.id,e instanceof s.Api.Chat?"chat":"channel");t&&i.ZP.chats[n]||(i.ZP.chats[n]=e)}(e)}))}function m(e,t,n){const a=i.ZP.messages[`${e}-${t}`];if(a instanceof s.Api.Message&&a.media){if(n instanceof s.Api.MessageExtendedMediaPreview){if(!(a.media instanceof s.Api.MessageMediaInvoice))return;a.media.extendedMedia=n}n instanceof s.Api.MessageExtendedMedia&&(a.media=n.media)}}function g(e){return String.fromCharCode(...e)}function y(e){return o.from(e,"binary")}function A(e,...t){("UNEXPECTED RESPONSE"===e?console.error:"INVOKE ERROR"===e||"UNEXPECTED UPDATE"===e?console.warn:console.log)(`%cGramJS%c${e}`,`color: ${d}; background: ${r}; padding: 0.25rem; border-radius: 0.25rem;`,`color: ${u[e]}; background: ${r}; padding: 0.25rem; border-radius: 0.25rem; margin-left: 0.25rem;`,...t)}},15023:(e,t,n)=>{"use strict";n.d(t,{PP:()=>A,ZP:()=>y,Zf:()=>w,pN:()=>v});var s=n(24736),i=n.n(s),a=n(81900),o=n(83716),r=n(57404),d=n(69118),u=n(48764).Buffer;const c="BroadcastChannel"in self,f=c?new BroadcastChannel(o.tuy):void 0;let p=[];const l=(0,d.P2)((()=>{f.postMessage({type:"localDbUpdate",batchedUpdates:p}),p=[]}),100);function h(e){if(e instanceof Uint8Array)return u.from(e);if("object"==typeof e&&1===Object.keys(e).length&&"value"===Object.keys(e)[0])return i()(e.value);if(Array.isArray(e))return e.map(h);if("object"!=typeof e||!("CONSTRUCTOR_ID"in e))return e;const t=e.className.split(".").reduce(((e,t)=>e[t]),r.constructors),n=(0,a.f)(e);return new t(Object.keys(n).reduce(((e,t)=>(e[t]=h(n[t]),e)),{}))}function m(e){return["localMessages","chats","users","messages","documents","stickerSets","photos","webDocuments","cache","botWaitReply"].reduce(((t,n)=>{var s;const i=null!==(s=e?.[n])&&void 0!==s?s:{},a=Object.keys(i).reduce(((e,t)=>(e[t]=h(i[t]),e)),{});var o;return t[n]=c?(o=n,new Proxy(a,{get:(e,t,n)=>Reflect.get(e,t,n),set:(e,t,n)=>(p.push({name:o,prop:t,value:n}),l(),Reflect.set(e,t,n))})):a,t}),{})}const g=m(),y=g;function A(){f&&f.postMessage({type:"localDbUpdateFull",localDb:Object.keys(g).reduce(((e,t)=>(e[t]={...g[t]},e)),{})})}function w(e){Object.assign(g,m(e))}function v(){Object.assign(g,m())}},17907:(e,t,n)=>{"use strict";n.d(t,{C5:()=>c,Ek:()=>p,G9:()=>f,Ou:()=>o,S1:()=>a,ck:()=>d,hG:()=>r,pZ:()=>u}),n(13522),n(83716);const s={};let i;function a(e){i=e}function o(e){i({"@type":"updateCurrentUser",currentUser:e})}function r(e){s.resolve&&s.resolve(e)}function d(e){s.resolve&&s.resolve(e)}function u(e){s.resolve&&s.resolve(e)}function c(e){const{firstName:t,lastName:n}=e;s.resolve&&s.resolve([t,n])}function f(){s.reject&&s.reject(new Error("RESTART_AUTH"))}function p(){s.reject&&s.reject(new Error("RESTART_AUTH_WITH_QR"))}},55301:(e,t,n)=>{"use strict";n.d(t,{JT:()=>x,ob:()=>G,zP:()=>j,gS:()=>L,k:()=>W,s3:()=>O,un:()=>K,S1:()=>q,RE:()=>F,ML:()=>J,cX:()=>$,IE:()=>Z,cT:()=>V});var s=n(13522),i=n(89832),a=n(83716),o=n(17907),r=n(87426),d=n(3192),u=n(59187),c=n(15023),f=n(49524),p=n(4973),l=n(51184),h=n(63024),m=n(82752),g=n(48764).Buffer;async function y({url:e,mediaFormat:t,start:n,end:s,isHtmlAllowed:i},o,r,d){let p,y,A,w,v=!1;const b=e.split("?")[0].split(":");if(e.indexOf("progressive")>0||b[0].indexOf("-")>1)w=b[b.length-1];else if(0===e.indexOf("profile"))w=e.indexOf("?")>-1?e.split("?")[1]:e.replace("profile","");else if(0===e.indexOf("avatar"))w=e.split("?")[1];else{if(0!==e.indexOf("photo"))return void console.error("[error id] ",e);w=e.split("?")[0].replace("photo","")}if(c.ZP.cache[w]){const e=await async function(e){return new Promise(((t,n)=>{const s=new FileReader;s.onload=()=>{t(s.result)},s.onerror=()=>{n(s.error)},s.readAsArrayBuffer(e)}))}(c.ZP.cache[w]);A=c.ZP.cache[w].type,y=c.ZP.cache[w].size,p=g.from(e),v=!0}if(!v){const t=new l.ju({id:w});try{console.log("[DOWNLOAD media]",{url:e,id:w});let n=await f.fetch(a.F9T,w,f.Type.ArrayBuffer);if(!n){const e=await fetch(`${a.qHj}/proto`,{method:"POST",body:g.from(t.pack().getPbData())}),n=await e.arrayBuffer();await f.save(a.F9T,w,n)}const s=l.dZ.parseMsg(new m.es(g.from(n)));if(s.err!==h.wb.NO_ERROR)return;p=g.from(s.file.buf),A=s.file.type,y=s.file.size}catch(t){return void console.error("[DOWNLOAD FAILED]",t,{url:e,id:w})}}const I=await async function(e,t,n){switch(t){case u.IU.BlobUrl:return new Blob([e],{type:n});case u.IU.Text:return e.toString();case u.IU.Progressive:case u.IU.DownloadUrl:return e.buffer}}(p,t,A);if(!I)return;const C=t!==u.IU.Progressive;if(!a.CyD&&f&&C){const t=e.startsWith("avatar")?a.SGw:a.lWA;f.save(t,e,I)}return{dataBlob:t===u.IU.Progressive?"":I,arrayBuffer:t===u.IU.Progressive?I:void 0,mimeType:A,fullSize:y}}new Set(["msg","sticker","gif","wallpaper","photo","webDocument","document","videoAvatar"]);var A=n(92582),w=n(18935),v=n(64250),b=n(83579),I=n(8384),C=n(44107),S=n(60054),P=n(37869),M=n(58569),R=n(68019),E=n(84213),D=n(48764).Buffer;const U="Unknown UserAgent",k="Unknown platform",T="Z";let B,_,x;i.Logger.setLevel(a.jr7?"debug":"warn");let N,H=!1;async function q(e,t){a.eMD&&console.log(">>> START INIT API"),B=e;const{userAgent:n,platform:s,sessionData:i,isTest:o,isMovSupported:r,isWebmSupported:d,maxBufferSize:u,webAuthToken:c,dcId:f,mockScenario:p,accountId:l,entropy:h,session:m}=t;await X(l,h,m),a.eMD&&console.log("[initialArgs]",{deviceModel:navigator.userAgent||n||U,systemVersion:s||k,appVersion:`${a.JiC} ${T}`,useWSS:!0});try{a.eMD&&((0,v.cM)("CONNECTING"),self.invoke=F),a.eMD&&(console.log(">>> FINISH INIT API"),(0,v.cM)("CONNECTED")),B({"@type":"updateApiReady"}),B({"@type":"updateAuthorizationState",authorizationState:"authorizationStateReady"}),B({"@type":"updateCurrentUser",currentUser:S.UI}),B({"@type":"updateMsgClientState",msgClientState:"connectionStateLogged"}),B({"@type":"updateConnectionState",connectionState:"connectionStateReady"})}catch(e){throw a.eMD&&(0,v.cM)("CONNECTING ERROR",e),e}}async function G(e=!1,t=!1){t||(0,c.pN)(),await _.destroy()}async function j(){await _.disconnect()}function O(){return _}async function F(e,t=!1,n=!1,i=!1,o,d=!1){if(H)try{a.eMD&&(0,v.cM)("INVOKE",e.className);const n=await _.invoke(e,o);return a.eMD&&(0,v.cM)("RESPONSE",e.className,n),i||function(e,t){let n,i;t instanceof s.Api.UpdatesCombined||t instanceof s.Api.Updates?n=t:"object"==typeof t&&"updates"in t&&(t.updates instanceof s.Api.Updates||t.updates instanceof s.Api.UpdatesCombined)?n=t.updates:(t instanceof s.Api.UpdateShortMessage||t instanceof s.Api.UpdateShortChatMessage||t instanceof s.Api.UpdateShort||t instanceof s.Api.UpdateShortSentMessage)&&(i=t),n?(function(e){const t=[...e.users,...e.chats];e.updates.forEach((e=>{t&&(e._entities=t)}))}(n),n.updates.forEach((t=>{(0,r.M)(t,e)}))):i&&(0,r.M)(i,e)}(e,n),t?n&&!0:n}catch(t){if(d)return;if(a.eMD&&((0,v.cM)("INVOKE ERROR",e.className),console.debug("invokeRequest failed with payload",e),console.error(t)),n)throw t;return void function(e,t){const n=e.message.startsWith("A wait of")&&(t instanceof s.Api.messages.SendMessage||t instanceof s.Api.messages.SendMedia||t instanceof s.Api.messages.SendMultiMedia),{message:i}=e;B({"@type":"error",error:{message:i,isSlowMode:n,hasErrorKey:!0}})}(t,e)}else a.eMD&&(0,v.cM)("INVOKE ERROR",e.className,"Client is not connected")}async function L(e,t){try{return await y(e)}catch(t){if(t.message.startsWith("FILE_REFERENCE")){if(await J({url:e.url}))return y(e);a.eMD&&console.error("Failed to repair file reference",e.url)}throw t}}function V(e,t){return _.uploadFile({file:e,onProgress:t,workers:a.eLN})}function Z(e){return _.updateTwoFaSettings(e)}function K(e,t){return _.getTmpPassword(e,t)}async function W(){const e=await F(new s.Api.users.GetFullUser({id:new s.Api.InputUserSelf}));if(!(e&&e.users[0]instanceof s.Api.User))return;const t=e.users[0];t.photo instanceof s.Api.Photo&&(c.ZP.photos[t.photo.id.toString()]=t.photo),c.ZP.users[(0,w.Xo)(t.id,"user")]=t;const n=(0,A.q)(e);(0,d.dJ)(n.id),(0,o.Ou)(n),N=n.id,Boolean(n.isPremium)}async function J({url:e}){const t=function(e){const t=e.startsWith("staticMap")?e.match(/(staticMap):([0-9-]+)(\?.+)/):e.startsWith("webDocument")?e.match(/(webDocument):(.+)/):e.match(/(avatar|profile|photo|msg|stickerSet|sticker|wallpaper|gif|document|videoAvatar)([-\d\w./]+)(?::\d+)?(\?size=\w+)?/);if(!t)return;const n=t[1],s=t[2];let i;const a=t[3],o=a?.replace("?size=","")||void 0;return i="avatar"===t[1]||"profile"===t[1]?(0,p.Zm)(s):t[1],{mediaMatchType:n,entityType:i,entityId:s,sizeType:o,params:a}}(e);if(!t)return;const{entityType:n,entityId:i,mediaMatchType:a}=t;if("file"===a)return!1;if("msg"===n){const e=c.ZP.messages[i],t=e.id,n="channelId"in e.peerId?new s.Api.InputChannel({channelId:e.peerId.channelId,accessHash:c.ZP.chats[(0,w.Xo)(e.peerId.channelId,"channel")].accessHash}):void 0,a=await F(n?new s.Api.channels.GetMessages({channel:n,id:[new s.Api.InputMessageID({id:t})]}):new s.Api.messages.GetMessages({id:[new s.Api.InputMessageID({id:t})]}));if(!a||a instanceof s.Api.messages.MessagesNotModified)return!1;const o=a.messages[0];return!(o instanceof s.Api.MessageEmpty||((0,v.iv)(o),0))}return!1}const X=async(e,t,n)=>{const s=new I.Z;s.init(c.ZP),b.Z.setClientKv(s),x=b.Z.getInstance(e),await x.setEntropy(t),b.Z.setCurrentAccountId(e),n?x.saveSession(n):x.delSession()},z=async e=>{const{msgId:t,chatId:n}=E.A.parseMsg(e);R.u4.stop(n,t)},Q=async e=>{const{accountId:t,entropy:n,session:s}=M.Yw.parseMsg(e);await X(t,n,s)};async function $(e){let t=new m.es(D.from(e));switch(a.eMD&&console.log(t.getCommandId(),(0,C.ZS)(t.getCommandId())),t.getCommandId()){case C.Qx.CID_StopChatStreamReq:return await z(t);case C.Qx.CID_AuthNativeReq:return await Q(t);case C.Qx.CID_GenMsgIdReq:return await P.Z.genMsgId(t);case C.Qx.CID_UploadMsgReq:t=await P.Z.beforeUploadMsgReq(t);break;case C.Qx.CID_UploadUserReq:t=await P.Z.beforeUploadUserReq(t)}if(!x.getSession())return;const n=await fetch(`${a.qHj}/proto`,{method:"POST",body:D.from(t.getPbData()),headers:{Authorization:`Bearer ${x.getSession()}`}});if(!n||200!==n.status)return;const s=await n.arrayBuffer();let i=D.from(s);const o=new m.es(i);switch(o.getCommandId()){case C.Qx.CID_DownloadMsgRes:i=await P.Z.afterDownloadMsgReq(o);break;case C.Qx.CID_DownloadUserRes:i=await P.Z.afterDownloadUserReq(o)}return i}},87426:(e,t,n)=>{"use strict";n.d(t,{M:()=>P,S:()=>I});var s=n(13522),i=n(83716),a=n(60782),o=n(82267),r=n(3192),d=n(66175),u=n(92582),c=n(4973),f=n(15023),p=n(81900),l=n(64250),h=n(94830),m=n(55237),g=n(14288),y=n(18935),A=n(67606),w=n(6999);const v=1e3;let b;function I(e){b=e}const C=new Set;function S(e){e.filter((e=>e instanceof s.Api.User)).map(u.PH).forEach((e=>{e&&b({"@type":"updateUser",id:e.id,user:e})})),e.filter((e=>e instanceof s.Api.Chat||e instanceof s.Api.ChatForbidden||e instanceof s.Api.Channel||e instanceof s.Api.ChannelForbidden)).map((e=>(0,d.vX)(e))).forEach((e=>{e&&b({"@type":"updateChat",id:e.id,chat:e})}))}function P(e,t){if(e instanceof s.connection.UpdateServerTimeOffset)(0,o.Y$)(e.timeOffset),b({"@type":"updateServerTimeOffset",serverTimeOffset:e.timeOffset});else if(e instanceof s.connection.UpdateConnectionState){let t;switch(e.state){case s.connection.UpdateConnectionState.disconnected:t="connectionStateConnecting";break;case s.connection.UpdateConnectionState.broken:t="connectionStateBroken";break;case s.connection.UpdateConnectionState.connected:default:t="connectionStateReady"}b({"@type":"updateConnectionState",connectionState:t})}else if(e instanceof s.Api.UpdateNewMessage||e instanceof s.Api.UpdateNewScheduledMessage||e instanceof s.Api.UpdateNewChannelMessage||e instanceof s.Api.UpdateShortChatMessage||e instanceof s.Api.UpdateShortMessage){let t,n;const a=e._entities;if(a&&((0,l.eQ)(a),S(a)),e instanceof s.Api.UpdateShortChatMessage)t=(0,r.bE)(e);else if(e instanceof s.Api.UpdateShortMessage)t=(0,r.$m)(e);else{if(e.message instanceof s.Api.MessageEmpty)return void(i.eMD&&console.error("Unexpected update:",e.className,e));(e.message instanceof s.Api.Message&&(0,c.Bs)(e.message)||e.message instanceof s.Api.MessageService&&e.message.action instanceof s.Api.MessageActionSuggestProfilePhoto)&&(0,l.iv)(e.message),t=(0,r.eL)(e.message),n="replyMarkup"in e.message&&e.message?.replyMarkup instanceof s.Api.ReplyKeyboardForceReply&&(!e.message.replyMarkup.selective||t.isMentioned)}if(e instanceof s.Api.UpdateNewScheduledMessage?b({"@type":C.has(t.id)?"updateScheduledMessage":"newScheduledMessage",id:t.id,chatId:t.chatId,message:t}):b({"@type":C.has(t.id)?"updateMessage":"newMessage",id:t.id,chatId:t.chatId,message:t,shouldForceReply:n}),e.message instanceof s.Api.MessageService){const{action:n}=e.message;if(n instanceof s.Api.MessageActionPaymentSent)b({"@type":"updatePaymentStateCompleted",slug:n.invoiceSlug});else if(n instanceof s.Api.MessageActionChatEditTitle)b({"@type":"updateChat",id:t.chatId,chat:{title:n.title}});else if(n instanceof s.Api.MessageActionChatEditPhoto){const i=(0,c._U)(n.photo),a=(0,d.eb)(i),o=(0,l.MZ)(e.message);f.ZP.chats[o]&&(f.ZP.chats[o].photo=i),(0,l.Hh)(n.photo),a&&b({"@type":"updateChat",id:t.chatId,chat:{avatarHash:a},...n.photo instanceof s.Api.Photo&&{newProfilePhoto:(0,m.lq)(n.photo)}})}else if(n instanceof s.Api.MessageActionChatDeletePhoto){const n=(0,l.MZ)(e.message);f.ZP.chats[n]&&(f.ZP.chats[n].photo=new s.Api.ChatPhotoEmpty),b({"@type":"updateChat",id:t.chatId,chat:{avatarHash:void 0}})}else if(n instanceof s.Api.MessageActionChatDeleteUser)e._entities&&e._entities.some((e=>e instanceof s.Api.User&&Boolean(e.self)&&e.id===n.userId))&&b({"@type":"updateChat",id:t.chatId,chat:{isForbidden:!0,isNotJoined:!0}});else if(n instanceof s.Api.MessageActionChatAddUser)e._entities&&e._entities.some((e=>e instanceof s.Api.User&&Boolean(e.self)&&n.users.includes(e.id)))&&b({"@type":"updateChatJoin",id:t.chatId});else if(n instanceof s.Api.MessageActionGroupCall)!n.duration&&n.call&&b({"@type":"updateGroupCallChatId",chatId:t.chatId,call:{id:n.call.id.toString(),accessHash:n.call.accessHash.toString()}});else if(n instanceof s.Api.MessageActionTopicEdit){const{replyTo:t}=e.message,{replyToMsgId:n,replyToTopId:s,forumTopic:a}=t||{},o=a&&(s||n)||i.OxA;b({"@type":"updateTopic",chatId:(0,y.iC)(e.message.peerId),topicId:o})}else n instanceof s.Api.MessageActionTopicCreate&&b({"@type":"updateTopics",chatId:(0,y.iC)(e.message.peerId)})}}else if(e instanceof s.Api.UpdateEditMessage||e instanceof s.Api.UpdateEditChannelMessage){if(e.message instanceof s.Api.MessageEmpty)return void(i.eMD&&console.error("Unexpected update:",e.className,e));e.message instanceof s.Api.Message&&(0,c.Bs)(e.message)&&(0,l.iv)(e.message);const t=(0,a.CE)((0,r.eL)(e.message),["isOutgoing"]);b({"@type":"updateMessage",id:t.id,chatId:t.chatId,message:t})}else if(e instanceof s.Api.UpdateMessageReactions)b({"@type":"updateMessageReactions",id:e.msgId,chatId:(0,y.iC)(e.peer),reactions:(0,r.FD)(e.reactions)});else if(e instanceof s.Api.UpdateMessageExtendedMedia){let t,n;if(e.extendedMedia instanceof s.Api.MessageExtendedMedia&&(t=(0,r.jZ)(e.extendedMedia.media)),e.extendedMedia instanceof s.Api.MessageExtendedMediaPreview&&(n=(0,r.qY)(e.extendedMedia)),!t&&!n)return;const i=(0,y.iC)(e.peer);(0,l.Fx)(i,e.msgId,e.extendedMedia),b({"@type":"updateMessageExtendedMedia",id:e.msgId,chatId:i,media:t,preview:n})}else if(e instanceof s.Api.UpdateDeleteMessages)b({"@type":"deleteMessages",ids:e.messages});else if(e instanceof s.Api.UpdateDeleteScheduledMessages)b({"@type":"deleteScheduledMessages",ids:e.messages,chatId:(0,y.iC)(e.peer)});else if(e instanceof s.Api.UpdateDeleteChannelMessages){const t=(0,y.Xo)(e.channelId,"channel"),n=e.messages,i=n.filter((e=>f.ZP.messages[`${t}-${e}`])),a=n.filter((e=>!f.ZP.messages[`${t}-${e}`])),o=n.map((e=>{const n=f.ZP.messages[`${t}-${e}`];return n&&n instanceof s.Api.MessageService&&"photo"in n.action?String(n.action.photo.id):void 0})).filter(Boolean);i.length&&b({"@type":"deleteMessages",ids:i,chatId:t}),o.length&&b({"@type":"deleteProfilePhotos",ids:o,chatId:t}),a.length&&setTimeout((()=>{b({"@type":"deleteMessages",ids:a,chatId:t})}),v)}else if(e instanceof s.Api.UpdateServiceNotification)if(e.popup)b({"@type":"error",error:{message:e.message}});else{const t=Date.now()/1e3+(0,o.Qj)(),n=(0,r.K7)(e,t);(0,c.Bs)(e)&&(0,l.iv)((0,c.cg)(n.id,n.chatId,e)),b({"@type":"updateServiceNotification",message:n})}else if((t instanceof s.Api.messages.SendMessage||t instanceof s.Api.messages.SendMedia||t instanceof s.Api.messages.SendMultiMedia||t instanceof s.Api.messages.ForwardMessages)&&(e instanceof s.Api.UpdateMessageID||e instanceof s.Api.UpdateShortSentMessage)){let n;"randomId"in e?n=e.randomId:"randomId"in t&&(n=t.randomId);const i=n&&f.ZP.localMessages[String(n)];if(!i)throw new Error("Local message not found");let a;if(e instanceof s.Api.UpdateShortSentMessage){i.content.text&&e.entities&&(a={text:(0,r.s2)(i.content.text.text,e.entities)}),e.media&&(a={...a,...(0,r.jZ)(e.media)});const t=(0,c.cg)(e.id,i.chatId,e);(0,c.Bs)(t)&&(0,l.iv)(t)}C.add(e.id);const d="date"in e&&1e3*e.date<Date.now()+1e3*(0,o.Qj)();b({"@type":i.isScheduled&&!d?"updateScheduledMessageSendSucceeded":"updateMessageSendSucceeded",chatId:i.chatId,localId:i.id,message:{...i,...a&&{content:{...i.content,...a}},id:e.id,sendingState:void 0,..."date"in e&&{date:e.date}}})}else if(e instanceof s.Api.UpdateReadMessagesContents)b({"@type":"updateCommonBoxMessages",ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof s.Api.UpdateChannelReadMessagesContents)b({"@type":"updateChannelMessages",channelId:(0,y.Xo)(e.channelId,"channel"),ids:e.messages,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}});else if(e instanceof s.Api.UpdateMessagePoll){const{pollId:t,poll:n,results:s}=e;if(n){const e=(0,r.gF)(n,s);b({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:e})}else{const e=(0,r.dq)(s);b({"@type":"updateMessagePoll",pollId:String(t),pollUpdate:{results:e}})}}else if(e instanceof s.Api.UpdateMessagePollVote)b({"@type":"updateMessagePollVote",pollId:String(e.pollId),userId:(0,y.Xo)(e.userId,"user"),options:e.options.map(l.TC)});else if(e instanceof s.Api.UpdateChannelMessageViews)b({"@type":"updateMessage",chatId:(0,y.Xo)(e.channelId,"channel"),id:e.id,message:{views:e.views}});else if(e instanceof s.Api.UpdateReadHistoryInbox)b({"@type":"updateChatInbox",id:(0,y.iC)(e.peer),chat:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof s.Api.UpdateReadHistoryOutbox)b({"@type":"updateChat",id:(0,y.iC)(e.peer),chat:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof s.Api.UpdateReadChannelInbox)b({"@type":"updateChat",id:(0,y.Xo)(e.channelId,"channel"),chat:{lastReadInboxMessageId:e.maxId,unreadCount:e.stillUnreadCount}});else if(e instanceof s.Api.UpdateReadChannelOutbox)b({"@type":"updateChat",id:(0,y.Xo)(e.channelId,"channel"),chat:{lastReadOutboxMessageId:e.maxId}});else if(e instanceof s.Api.UpdateReadChannelDiscussionInbox)b({"@type":"updateThreadInfo",chatId:(0,y.Xo)(e.channelId,"channel"),threadId:e.topMsgId,threadInfo:{lastReadInboxMessageId:e.readMaxId}});else if(e instanceof s.Api.UpdateReadChannelDiscussionOutbox)b({"@type":"updateChat",id:(0,y.Xo)(e.channelId,"channel"),chat:{lastReadOutboxMessageId:e.readMaxId}});else if(e instanceof s.Api.UpdateDialogPinned&&e.peer instanceof s.Api.DialogPeer)b({"@type":"updateChatPinned",id:(0,y.iC)(e.peer.peer),isPinned:e.pinned||!1});else if(e instanceof s.Api.UpdatePinnedDialogs){const t=e.order?e.order.filter((e=>e instanceof s.Api.DialogPeer)).map((e=>(0,y.iC)(e.peer))):[];b({"@type":"updatePinnedChatIds",ids:t,folderId:e.folderId||void 0})}else if(e instanceof s.Api.UpdateFolderPeers)e.folderPeers.forEach((e=>{const{folderId:t,peer:n}=e;b({"@type":"updateChatListType",id:(0,y.iC)(n),folderId:t})}));else if(e instanceof s.Api.UpdateDialogFilter){const{id:t,filter:n}=e,i=n instanceof s.Api.DialogFilter?(0,d.bZ)(n):void 0;b({"@type":"updateChatFolder",id:t,folder:i})}else if(e instanceof s.Api.UpdateDialogFilterOrder)b({"@type":"updateChatFoldersOrder",orderedIds:e.order});else if(e instanceof s.Api.UpdateChatParticipants){const t=(0,d.B0)(e.participants);b({"@type":"updateChatMembers",id:(0,y.Xo)(e.participants.chatId,"chat"),replacedMembers:t})}else if(e instanceof s.Api.UpdateChatParticipantAdd){const t=(0,d.Ep)((0,a.ei)(e,["userId","inviterId","date"]));b({"@type":"updateChatMembers",id:(0,y.Xo)(e.chatId,"chat"),addedMember:t})}else if(e instanceof s.Api.UpdateChatParticipantDelete)b({"@type":"updateChatMembers",id:(0,y.Xo)(e.chatId,"chat"),deletedMemberId:(0,y.Xo)(e.userId,"user")});else if(e instanceof s.Api.UpdatePinnedMessages||e instanceof s.Api.UpdatePinnedChannelMessages){const t=e instanceof s.Api.UpdatePinnedMessages?(0,y.iC)(e.peer):(0,y.Xo)(e.channelId,"channel");b({"@type":"updatePinnedIds",chatId:t,messageIds:e.messages,isPinned:e.pinned})}else if(e instanceof s.Api.UpdateNotifySettings&&e.peer instanceof s.Api.NotifyPeer)b({"@type":"updateNotifyExceptions",...(0,h.hc)(e.notifySettings,e.peer.peer)});else if(e instanceof s.Api.UpdateNotifySettings&&e.peer instanceof s.Api.NotifyForumTopic)b({"@type":"updateTopicNotifyExceptions",...(0,h.ic)(e.notifySettings,e.peer.peer,e.peer.topMsgId)});else if(e instanceof s.Api.UpdateUserTyping||e instanceof s.Api.UpdateChatUserTyping){const t=e instanceof s.Api.UpdateUserTyping?(0,y.Xo)(e.userId,"user"):(0,y.Xo)(e.chatId,"chat");e.action instanceof s.Api.SendMessageEmojiInteraction?b({"@type":"updateStartEmojiInteraction",id:t,emoji:e.action.emoticon,messageId:e.action.msgId,interaction:(0,A.K)(JSON.parse(e.action.interaction.data))}):b({"@type":"updateChatTypingStatus",id:t,typingStatus:(0,d.j7)(e)})}else if(e instanceof s.Api.UpdateChannelUserTyping){const t=(0,y.Xo)(e.channelId,"channel");b({"@type":"updateChatTypingStatus",id:t,threadId:e.topMsgId,typingStatus:(0,d.j7)(e)})}else if(e instanceof s.Api.UpdateChannel){const{_entities:t}=e;if(!t)return;const n=t.find((e=>e instanceof s.Api.Channel||e instanceof s.Api.ChannelForbidden));if(n instanceof s.Api.Channel){const t=(0,d.vX)(n);t&&(b({"@type":"updateChat",id:t.id,chat:t}),b({"@type":t.isNotJoined?"updateChatLeave":"updateChatJoin",id:(0,y.Xo)(e.channelId,"channel")}))}else if(n instanceof s.Api.ChannelForbidden){const t=(0,y.Xo)(e.channelId,"channel");b({"@type":"updateChat",id:t,chat:{isRestricted:!0}}),b({"@type":"updateChatLeave",id:t})}else 0===t.length&&b({"@type":"resetMessages",id:(0,y.Xo)(e.channelId,"channel")})}else if(e instanceof s.Api.UpdateDialogUnreadMark&&e.peer instanceof s.Api.DialogPeer)b({"@type":"updateChat",id:(0,y.iC)(e.peer.peer),chat:{hasUnreadMark:e.unread}});else if(e instanceof s.Api.UpdateChatDefaultBannedRights)b({"@type":"updateChat",id:(0,y.iC)(e.peer),chat:{defaultBannedRights:(0,p.f)(e.defaultBannedRights)}});else if(e instanceof s.Api.UpdateUserStatus)b({"@type":"updateUserStatus",userId:(0,y.Xo)(e.userId,"user"),status:(0,u.ku)(e.status)});else if(e instanceof s.Api.UpdateUser)b({"@type":"updateRequestUserUpdate",id:(0,y.Xo)(e.userId,"user")});else if(e instanceof s.Api.UpdateUserEmojiStatus){const t=(0,u.wj)(e.emojiStatus);b({"@type":"updateUserEmojiStatus",userId:(0,y.Xo)(e.userId,"user"),emojiStatus:t})}else if(e instanceof s.Api.UpdateUserName){const t=(0,y.Xo)(e.userId,"user"),n=f.ZP.users[t],s=n?.mutualContact&&!n.self?(0,a.ei)(e,[]):(0,a.ei)(e,["firstName","lastName"]),i=(0,m.T4)(e);b({"@type":"updateUser",id:t,user:{...s,usernames:i}})}else if(e instanceof s.Api.UpdateUserPhone){const{userId:t,phone:n}=e;b({"@type":"updateUser",id:(0,y.Xo)(t,"user"),user:{phoneNumber:n}})}else if(e instanceof s.Api.UpdatePeerSettings){const{_entities:t,settings:n}=e;if(!t)return;t?.length&&(t.filter((e=>e instanceof s.Api.User&&!e.contact)).forEach((e=>{b({"@type":"deleteContact",id:(0,y.Xo)(e.id,"user")})})),t.filter((e=>e instanceof s.Api.User&&e.contact)).map(u.PH).forEach((e=>{e&&b({"@type":"updateUser",id:e.id,user:{...e,...n&&{settings:(0,d.lV)(n)}}})})))}else if(e instanceof s.Api.UpdateNotifySettings){const{notifySettings:{showPreviews:t,silent:n,muteUntil:s},peer:{className:i}}=e,a="NotifyUsers"===i?"contact":"NotifyChats"===i?"group":"NotifyBroadcasts"===i?"broadcast":void 0;if(!a)return;b({"@type":"updateNotifySettings",peerType:a,isSilent:Boolean(n||"number"==typeof s&&Date.now()+1e3*(0,o.Qj)()<1e3*s),shouldShowPreviews:Boolean(t)})}else if(e instanceof s.Api.UpdatePeerBlocked)b({"@type":"updatePeerBlocked",id:(0,y.iC)(e.peerId),isBlocked:e.blocked});else if(e instanceof s.Api.UpdatePrivacy){const t=(0,h.r5)(e.key);t&&b({"@type":"updatePrivacy",key:t,rules:(0,h.jv)(e.rules)})}else if(e instanceof s.Api.UpdateDraftMessage)b({"@type":"draftMessage",chatId:(0,y.iC)(e.peer),threadId:e.topMsgId,...(0,r.p4)(e.draft)});else if(e instanceof s.Api.UpdateContactsReset)b({"@type":"updateResetContactList"});else if(e instanceof s.Api.UpdateFavedStickers)b({"@type":"updateFavoriteStickers"});else if(e instanceof s.Api.UpdateRecentStickers)b({"@type":"updateRecentStickers"});else if(e instanceof s.Api.UpdateMoveStickerSetToTop)e.masks||b({"@type":"updateMoveStickerSetToTop",isCustomEmoji:e.emojis,id:e.stickerset.toString()});else if(e instanceof s.Api.UpdateStickerSets)b({"@type":"updateStickerSets"});else if(e instanceof s.Api.UpdateStickerSetsOrder)e.masks||b({"@type":"updateStickerSetsOrder",order:e.order.map((e=>e.toString())),isCustomEmoji:e.emojis});else if(e instanceof s.Api.UpdateNewStickerSet){if(e.stickerset instanceof s.Api.messages.StickerSet){const t=(0,A.jV)(e.stickerset.set);b({"@type":"updateStickerSet",id:t.id,stickerSet:t})}}else if(e instanceof s.Api.UpdateSavedGifs)b({"@type":"updateSavedGifs"});else if(e instanceof s.Api.UpdateGroupCall){const t=e._entities;t&&((0,l.eQ)(t),S(t)),b({"@type":"updateGroupCall",call:(0,g.vp)(e.call)})}else if(e instanceof s.Api.UpdateGroupCallConnection)b({"@type":"updateGroupCallConnection",data:JSON.parse(e.params.data),presentation:Boolean(e.presentation)});else if(e instanceof s.Api.UpdateGroupCallParticipants){const t=e._entities;t&&((0,l.eQ)(t),S(t)),b({"@type":"updateGroupCallParticipants",groupCallId:(0,g.$J)(e.call),participants:e.participants.map(g.Au)})}else if(e instanceof s.Api.UpdatePendingJoinRequests){const t=e._entities;t&&((0,l.eQ)(t),S(t)),b({"@type":"updatePendingJoinRequests",chatId:(0,y.iC)(e.peer),recentRequesterIds:e.recentRequesters.map((e=>(0,y.Xo)(e,"user"))),requestsPending:e.requestsPending})}else if(e instanceof s.Api.UpdatePhoneCall){const t=e._entities;t&&((0,l.eQ)(t),S(t)),b({"@type":"updatePhoneCall",call:(0,g.eP)(e.phoneCall)})}else if(e instanceof s.Api.UpdatePhoneCallSignalingData)b({"@type":"updatePhoneCallSignalingData",callId:e.phoneCallId.toString(),data:Array.from(e.data)});else if(e instanceof s.Api.UpdateWebViewResultSent){const{queryId:t}=e;b({"@type":"updateWebViewResultSent",queryId:t.toString()})}else if(e instanceof s.Api.UpdateBotMenuButton){const{botId:t,button:n}=e,s=(0,y.Xo)(t,"user");b({"@type":"updateBotMenuButton",botId:s,button:(0,w.Qp)(n)})}else if(e instanceof s.Api.UpdateTranscribedAudio){const t=e._entities;t&&((0,l.eQ)(t),S(t)),b({"@type":"updateTranscribedAudio",transcriptionId:e.transcriptionId.toString(),text:e.text,isPending:e.pending})}else if(e instanceof s.Api.UpdateConfig){const t=e._entities;t&&((0,l.eQ)(t),S(t)),b({"@type":"updateConfig"})}else if(e instanceof s.Api.UpdateChannelPinnedTopic)b({"@type":"updatePinnedTopic",chatId:(0,y.Xo)(e.channelId,"channel"),topicId:e.topicId,isPinned:Boolean(e.pinned)});else if(e instanceof s.Api.UpdateChannelPinnedTopics)b({"@type":"updatePinnedTopicsOrder",chatId:(0,y.Xo)(e.channelId,"channel"),order:e.order||[]});else if(e instanceof s.Api.UpdateRecentEmojiStatuses)b({"@type":"updateRecentEmojiStatuses"});else if(i.eMD){const t="object"==typeof e&&"className"in e?e.className:e;(0,l.cM)("UNEXPECTED UPDATE",t)}}},2049:(e,t,n)=>{"use strict";var s={};n.r(s),n.d(s,{acceptBotUrlAuth:()=>fs,acceptCall:()=>_s,acceptLinkUrlAuth:()=>ls,acceptPhoneCall:()=>Pa,addChatMembers:()=>ge,answerCallbackButton:()=>Qn,blockContact:()=>gi,broadcastLocalDbUpdateFull:()=>o.PP,changeSessionSettings:()=>Ys,changeSessionTtl:()=>ei,checkChatUsername:()=>Sn,checkPassword:()=>On,checkUsername:()=>ri,clearDraft:()=>N,clearPassword:()=>Fn,clearRecentStickers:()=>sn,closePoll:()=>pt,confirmCall:()=>xs,confirmPhoneCall:()=>Sa,createChannel:()=>G,createGroupCall:()=>Ps,createGroupChat:()=>Z,createPhoneCallState:()=>va,createTopic:()=>Me,decodePhoneCallData:()=>Ca,deleteChannel:()=>V,deleteChat:()=>F,deleteChatFolder:()=>$,deleteChatMember:()=>ye,deleteChatUser:()=>O,deleteContact:()=>Vt,deleteExportedChatInvite:()=>Un,deleteHistory:()=>tt,deleteMessages:()=>Ye,deleteProfilePhotos:()=>pi,deleteRevokedExportedChatInvites:()=>kn,deleteScheduledMessages:()=>et,deleteTopic:()=>De,destroy:()=>p.ob,destroyPhoneCallState:()=>ba,discardCall:()=>Us,discardGroupCall:()=>As,disconnect:()=>p.zP,downloadMedia:()=>p.gS,editChatFolder:()=>Q,editChatPhoto:()=>K,editExportedChatInvite:()=>En,editGroupCallParticipant:()=>ws,editGroupCallTitle:()=>vs,editMessage:()=>Je,editTopic:()=>ke,encodePhoneCallData:()=>Ia,exportChatInvite:()=>Dn,exportGroupCallInvite:()=>bs,faveSticker:()=>tn,fetchAnimatedEmojiEffects:()=>dn,fetchAnimatedEmojis:()=>rn,fetchAppConfig:()=>qi,fetchAuthorizations:()=>Ai,fetchBlockedContacts:()=>mi,fetchChannelStatistics:()=>na,fetchChat:()=>B,fetchChatFolders:()=>X,fetchChatInviteImporters:()=>Tn,fetchChatSettings:()=>k,fetchChats:()=>D,fetchCommonChats:()=>Ht,fetchConfig:()=>Gi,fetchContactList:()=>jt,fetchContentSettings:()=>Ni,fetchCountryList:()=>Oi,fetchCurrentUser:()=>p.k,fetchCustomEmoji:()=>on,fetchCustomEmojiSets:()=>Xt,fetchDefaultStatusEmojis:()=>pn,fetchDefaultTopicIcons:()=>fn,fetchEmojiKeywords:()=>vn,fetchExportedChatInvites:()=>Rn,fetchExtendedMedia:()=>ht,fetchFavoriteStickers:()=>$t,fetchFeaturedEmojiStickers:()=>en,fetchFeaturedStickers:()=>Yt,fetchFullChat:()=>U,fetchFullUser:()=>Nt,fetchGenericEmojiEffects:()=>un,fetchGlobalPrivacySettings:()=>Fi,fetchGroupCallParticipants:()=>Is,fetchGroupStatistics:()=>sa,fetchGroupsForDiscussion:()=>pe,fetchInlineBot:()=>Yn,fetchInlineBotResults:()=>es,fetchLangPack:()=>Di,fetchLangStrings:()=>Ui,fetchLanguages:()=>Ei,fetchMembers:()=>fe,fetchMessage:()=>Ve,fetchMessagePublicForwards:()=>aa,fetchMessageReactions:()=>zi,fetchMessageReactionsList:()=>Qi,fetchMessageStatistics:()=>ia,fetchMessageViews:()=>ot,fetchMessages:()=>Le,fetchNearestCountry:()=>qt,fetchNotificationExceptions:()=>Si,fetchNotificationSettings:()=>Pi,fetchPinnedMessages:()=>vt,fetchPremiumGifts:()=>cn,fetchPremiumPromo:()=>Xs,fetchPrivacySettings:()=>ki,fetchProfilePhotos:()=>Zt,fetchRecentEmojiStatuses:()=>bn,fetchRecentStickers:()=>Qt,fetchRecommendedChatFolders:()=>z,fetchSavedGifs:()=>hn,fetchScheduledHistory:()=>yt,fetchSeenBy:()=>bt,fetchSendAs:()=>It,fetchSponsoredMessages:()=>St,fetchStatisticsAsyncGraph:()=>oa,fetchStickerSets:()=>zt,fetchStickers:()=>an,fetchStickersForEmoji:()=>wn,fetchTemporaryPaymentPassword:()=>zs,fetchTopInlineBots:()=>$n,fetchTopUsers:()=>Gt,fetchTopicById:()=>Ee,fetchTopics:()=>Re,fetchUnreadMentions:()=>Et,fetchUnreadReactions:()=>Dt,fetchUsers:()=>Ot,fetchWallpapers:()=>li,fetchWebAuthorizations:()=>bi,fetchWebPagePreview:()=>ct,findFirstMessageIdAfterDate:()=>gt,forwardMessages:()=>mt,getAvailableReactions:()=>Ji,getChatByPhoneNumber:()=>te,getChatByUsername:()=>ne,getDhConfig:()=>Ds,getGroupCall:()=>ys,getPasswordInfo:()=>Gn,getPaymentForm:()=>Ws,getReceipt:()=>Js,hideAllChatJoinRequests:()=>_n,hideChatJoinRequest:()=>Bn,hideChatReportPanel:()=>xn,importChatInvite:()=>be,importContact:()=>Ft,installStickerSet:()=>gn,joinChannel:()=>j,joinGroupCall:()=>Ss,joinGroupCallPresentation:()=>Ms,leaveChannel:()=>L,leaveGroupCall:()=>Cs,leaveGroupCallPresentation:()=>Es,loadAttachBot:()=>ds,loadAttachBots:()=>rs,loadPollOptionResults:()=>lt,markMessageListRead:()=>it,markMessagesRead:()=>at,migrateChat:()=>he,openChatByInvite:()=>me,pinMessage:()=>Qe,prolongWebView:()=>as,provideAuthCode:()=>d.ck,provideAuthPassword:()=>d.pZ,provideAuthPhoneNumber:()=>d.hG,provideAuthRegistration:()=>d.C5,provideRecoveryEmailCode:()=>Zn,readAllMentions:()=>Mt,readAllReactions:()=>Rt,receivedCall:()=>Bs,registerDevice:()=>Ti,removeRecentSticker:()=>nn,reorderUsernames:()=>Zi,repairFileReference:()=>p.ML,reportMessages:()=>nt,reportPeer:()=>Qs,reportProfilePhoto:()=>$s,reportSpam:()=>Kt,requestBotUrlAuth:()=>cs,requestCall:()=>ks,requestChatUpdate:()=>_,requestLinkUrlAuth:()=>ps,requestPhoneCall:()=>Ma,requestSimpleWebView:()=>is,requestThreadInfoUpdate:()=>rt,requestWebView:()=>ss,rescheduleMessage:()=>Xe,restartAuth:()=>d.G9,restartAuthWithQr:()=>d.Ek,saveDefaultSendAs:()=>Ct,saveDraft:()=>x,saveGif:()=>mn,searchChats:()=>T,searchGifs:()=>An,searchMessagesGlobal:()=>ut,searchMessagesLocal:()=>dt,searchStickers:()=>ln,sendEmojiInteraction:()=>Wi,sendInlineBotResult:()=>ts,sendMessage:()=>Ke,sendMessageAction:()=>st,sendPaymentForm:()=>Ks,sendPollVote:()=>ft,sendReaction:()=>Xi,sendScheduledMessages:()=>At,sendSignalingData:()=>Ns,sendWatchingEmojiInteraction:()=>Ki,sendWebViewData:()=>os,sendWithCallback:()=>p.cX,setCallRating:()=>Ts,setChatEnabledReactions:()=>Ie,setChatUsername:()=>Pn,setDefaultReaction:()=>$i,setDiscussionGroup:()=>le,setPrivacySettings:()=>_i,sortChatFolders:()=>Y,startBot:()=>ns,terminateAllAuthorizations:()=>vi,terminateAllWebAuthorizations:()=>Ci,terminateAuthorization:()=>wi,terminateWebAuthorization:()=>Ii,toggleAttachBot:()=>us,toggleChatArchived:()=>J,toggleChatPinned:()=>W,toggleDialogUnread:()=>ee,toggleForum:()=>Pe,toggleGroupCallStartSubscription:()=>Rs,toggleIsProtected:()=>Ce,toggleJoinRequest:()=>we,toggleJoinToSend:()=>Ae,toggleParticipantsHidden:()=>Se,togglePinnedTopic:()=>Ue,togglePreHistoryHidden:()=>ie,toggleSignatures:()=>ce,toggleUsername:()=>Vi,transcribeAudio:()=>Ut,translateText:()=>kt,unblockContact:()=>yi,uninstallStickerSet:()=>yn,unpinAllMessages:()=>$e,unregisterDevice:()=>Bi,updateChatAbout:()=>ue,updateChatAdmin:()=>re,updateChatDefaultBannedRights:()=>ae,updateChatMemberBannedRights:()=>oe,updateChatMutedState:()=>H,updateChatTitle:()=>de,updateContact:()=>Lt,updateContactSignUpNotification:()=>Mi,updateContentSettings:()=>Hi,updateEmojiStatus:()=>Wt,updateGlobalPrivacySettings:()=>Li,updateIsOnline:()=>xi,updateNotificationSettings:()=>Ri,updatePassword:()=>Ln,updatePrivateLink:()=>Mn,updateProfile:()=>oi,updateProfilePhoto:()=>ui,updateRecoveryEmail:()=>Vn,updateTopicMutedState:()=>q,updateUsername:()=>di,uploadContactProfilePhoto:()=>fi,uploadProfilePhoto:()=>ci,uploadWallpaper:()=>hi,validateRequestedInfo:()=>Zs,viewSponsoredMessage:()=>Pt});var i=n(83716),a=n(69118),o=n(15023),r=n(87426),d=n(17907),u=n(24736),c=n.n(u),f=n(13522),p=n(55301),l=n(66175),h=n(3192),m=n(92582),g=n(60782),y=n(4973),A=n(64250),w=n(18935),v=n(55237),b=n(67606),I=n(83579),C=n(82752),S=n(44107);class P extends C.ZP{constructor(e){var t,n,s;super("PTP.Chats.LoadChatsReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(S.Qx.CID_LoadChatsReq),this.msg=e}static parseMsg(e){return(new P).decode(e.body())}}class M extends C.ZP{constructor(e){var t,n,s;super("PTP.Chats.LoadChatsRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(S.Qx.CID_LoadChatsRes),this.msg=e}static parseMsg(e){return(new M).decode(e.body())}}var R=n(63024);let E;async function D({limit:e,offsetDate:t,archived:n,withPinned:s,lastLocalServiceMessage:i}){const a=await(I.Z.getCurrentAccount()?.sendPduWithCallback(new P({limit:e,offsetDate:t,archived:n,withPinned:s}).pack()));if(!a)return;const o=M.parseMsg(a);if(!o||o.err!==R.wb.NO_ERROR)return;const r=JSON.parse(o.payload);return console.log("[LoadChatsRes]",r),r}function U(e){const{id:t,accessHash:n,adminRights:s}=e;return(0,y.yA)(t,n)instanceof f.Api.InputChannel?async function(e,t,n){const s=await(0,p.RE)(new f.Api.channels.GetFullChannel({channel:(0,y.yA)(e,t)}));if(!(s&&s.fullChat instanceof f.Api.ChannelFull))return;const{about:i,onlineCount:a,exportedInvite:r,slowmodeSeconds:d,slowmodeNextSendDate:u,migratedFromChatId:c,migratedFromMaxId:h,canViewParticipants:m,canViewStats:A,linkedChatId:I,hiddenPrehistory:C,call:S,botInfo:P,availableReactions:M,defaultSendAs:R,requestsPending:D,recentRequesters:U,statsDc:k,participantsCount:T,stickerset:B,chatPhoto:_,participantsHidden:x}=s.fullChat;_ instanceof f.Api.Photo&&(o.ZP.photos[_.id.toString()]=_);const N=r instanceof f.Api.ChatInviteExported?r.link:void 0,{members:H,users:q,userStatusesById:G}=m&&await fe(e,t)||{},{members:j,users:O,userStatusesById:F}=m&&n&&await fe(e,t,"kicked")||{},{members:L,users:V,userStatusesById:Z}=m&&await fe(e,t,"admin")||{},K=P?(0,l.Rl)(P):void 0;if(s?.chats?.length>1){ve(s);const[,e]=s.chats,t=(0,l.vX)(e);t&&E({"@type":"updateChat",id:t.id,chat:t})}const W={...G,...F,...Z};return{fullInfo:{..._ instanceof f.Api.Photo&&{profilePhoto:(0,v.lq)(_)},about:i,onlineCount:a,inviteLink:N,slowMode:d?{seconds:d,nextSendDate:u}:void 0,migratedFrom:c?{chatId:(0,w.Xo)(c,"chat"),maxMessageId:h}:void 0,canViewMembers:m,canViewStatistics:A,isPreHistoryHidden:C,members:H,kickedMembers:j,adminMembersById:L?(0,g.ee)(L,"userId"):void 0,groupCallId:S?String(S.id):void 0,linkedChatId:I?(0,w.Xo)(I,"chat"):void 0,botCommands:K,enabledReactions:(0,l.vv)(M),sendAsId:R?(0,w.iC)(R):void 0,requestsPending:D,recentRequesterIds:U?.map((e=>(0,w.Xo)(e,"user"))),statisticsDcId:k,stickerSet:B?(0,b.jV)(B):void 0,areParticipantsHidden:x},users:[...q||[],...O||[],...V||[]],userStatusesById:W,groupCall:S?{chatId:e,isLoaded:!1,id:S.id.toString(),accessHash:S?.accessHash.toString(),participants:{},version:0,participantsCount:0,connectionState:"disconnected"}:void 0,membersCount:T}}(t,n,s):async function(e){const t=await(0,p.RE)(new f.Api.messages.GetFullChat({chatId:(0,y.yA)(e)}));if(!(t&&t.fullChat instanceof f.Api.ChatFull))return;ve(t);const{about:n,participants:s,exportedInvite:i,botInfo:a,call:r,availableReactions:d,recentRequesters:u,requestsPending:c,chatPhoto:h}=t.fullChat;h instanceof f.Api.Photo&&(o.ZP.photos[h.id.toString()]=h);const A=(0,l.B0)(s),b=A?A.filter((({isAdmin:e,isOwner:t})=>e||t)):void 0,I=a?(0,l.Rl)(a):void 0,C=i instanceof f.Api.ChatInviteExported?i.link:void 0,{users:S,userStatusesById:P}=(0,m.YF)(t.users);return{fullInfo:{...h instanceof f.Api.Photo&&{profilePhoto:(0,v.lq)(h)},about:n,members:A,adminMembersById:b?(0,g.ee)(b,"userId"):void 0,canViewMembers:!0,botCommands:I,inviteLink:C,groupCallId:r?.id.toString(),enabledReactions:(0,l.vv)(d),requestsPending:c,recentRequesterIds:u?.map((e=>(0,w.Xo)(e,"user")))},users:S,userStatusesById:P,groupCall:r?{chatId:e,isLoaded:!1,id:r.id.toString(),accessHash:r.accessHash.toString(),connectionState:"disconnected",participantsCount:0,version:0,participants:{}}:void 0,membersCount:A?.length}}(t)}async function k(e){const{id:t,accessHash:n}=e,s=await(0,p.RE)(new f.Api.messages.GetPeerSettings({peer:(0,y.h6)(t,n)}));if(s)return(0,A.eQ)(s.users),{users:s.users.map(m.PH).filter(Boolean),settings:(0,l.lV)(s.settings)}}async function T({query:e}){const t=await(0,p.RE)(new f.Api.contacts.Search({q:e}));if(!t)return;ve(t);const n=t.myResults.map(w.iC),s=t.chats.concat(t.users).map((e=>(0,l.vX)(e))).filter(Boolean),i=t.users.map(m.PH).filter((e=>Boolean(e)&&!e.isSelf));return{localChats:s.filter((e=>n.includes(e.id))),localUsers:i.filter((e=>n.includes(e.id))),globalChats:s.filter((e=>!n.includes(e.id))),globalUsers:i.filter((e=>!n.includes(e.id)))}}async function B({type:e,user:t}){let n;if("self"===e||"user"===e){const s=await(0,p.RE)(new f.Api.users.GetUsers({id:["user"===e&&t?(0,y.yA)(t.id,t.accessHash):new f.Api.InputUserSelf]}));if(!s||!s.length)return;[n]=s}else if("support"===e){const e=await(0,p.RE)(new f.Api.help.GetSupport);if(!e||!e.user)return;n=e.user}const s=(0,l.vX)(n,"support"===e);if(s)return E({"@type":"updateChat",id:s.id,chat:s}),{chatId:s.id}}async function _({chat:e,lastLocalMessage:t,noLastMessage:n}){const{id:s,accessHash:i}=e,a=await(0,p.RE)(new f.Api.messages.GetPeerDialogs({peers:[new f.Api.InputDialogPeer({peer:(0,y.h6)(s,i)})]}));if(!a)return;const o=a.dialogs[0];if(!(o&&o instanceof f.Api.Dialog))return;const r=function(e,t){const n={};return e.chats?.forEach((e=>{const s=`chat${e.id}`;t?.[s],n[s]=e})),e.users?.forEach((e=>{const s=`user${e.id}`;t?.[s],n[s]=e})),n}(a),d=r[(0,l.ab)(o.peer)];if(!d)return;ve(a);const u=(0,h.eL)(a.messages[0]),c=t&&(!u||t.date>u.date)?t:u;E({"@type":"updateChat",id:s,chat:{...(0,l.am)(o,d),...!n&&{lastMessage:c}}})}function x({chat:e,text:t,entities:n,threadId:s,replyToMsgId:i}){return(0,p.RE)(new f.Api.messages.SaveDraft({peer:(0,y.h6)(e.id,e.accessHash),message:t,...n&&{entities:n.map(y.ns)},replyToMsgId:i,topMsgId:s}))}function N(e,t){return(0,p.RE)(new f.Api.messages.SaveDraft({peer:(0,y.h6)(e.id,e.accessHash),message:"",...t&&{topMsgId:t}}))}async function H({chat:e,isMuted:t}){await(0,p.RE)(new f.Api.account.UpdateNotifySettings({peer:new f.Api.InputNotifyPeer({peer:(0,y.h6)(e.id,e.accessHash)}),settings:new f.Api.InputPeerNotifySettings({muteUntil:t?i.PT8:0})})),E({"@type":"updateNotifyExceptions",chatId:e.id,isMuted:t}),_({chat:e,noLastMessage:!0})}async function q({chat:e,topicId:t,isMuted:n}){await(0,p.RE)(new f.Api.account.UpdateNotifySettings({peer:new f.Api.InputNotifyForumTopic({peer:(0,y.h6)(e.id,e.accessHash),topMsgId:t}),settings:new f.Api.InputPeerNotifySettings({muteUntil:n?i.PT8:0})})),E({"@type":"updateTopicNotifyExceptions",chatId:e.id,topicId:t,isMuted:n})}async function G({title:e,about:t="",users:n},s=!1){const a=await(0,p.RE)(new f.Api.channels.CreateChannel({broadcast:!0,title:e,about:t}),void 0,!0);if(!(a instanceof f.Api.Updates))return void(i.eMD&&console.error("Unexpected channel creation update",a));const o=a.chats[0];if(!(o&&o instanceof f.Api.Channel))return void(i.eMD&&console.error("Created channel not found",a));const r=(0,l.vX)(o);if(n?.length)try{await(0,p.RE)(new f.Api.channels.InviteToChannel({channel:(0,y.yA)(r.id,r.accessHash),users:n.map((({id:e,accessHash:t})=>(0,y.yA)(e,t)))}),void 0,s)}catch(e){}return r}function j({channelId:e,accessHash:t}){return(0,p.RE)(new f.Api.channels.JoinChannel({channel:(0,y.yA)(e,t)}),!0,!0)}function O({chat:e,user:t}){if("chatTypeBasicGroup"===e.type)return(0,p.RE)(new f.Api.messages.DeleteChatUser({chatId:(0,y.yA)(e.id,e.accessHash),userId:(0,y.yA)(t.id,t.accessHash)}),!0)}function F({chatId:e}){return(0,p.RE)(new f.Api.messages.DeleteChat({chatId:(0,y.yA)(e)}),!0)}function L({channelId:e,accessHash:t}){return(0,p.RE)(new f.Api.channels.LeaveChannel({channel:(0,y.yA)(e,t)}),!0)}function V({channelId:e,accessHash:t}){return(0,p.RE)(new f.Api.channels.DeleteChannel({channel:(0,y.yA)(e,t)}),!0)}async function Z({title:e,users:t}){const n=await(0,p.RE)(new f.Api.messages.CreateChat({title:e,users:t.map((({id:e,accessHash:t})=>(0,y.yA)(e,t)))}),void 0,!0);if(!(n instanceof f.Api.Updates))return void(i.eMD&&console.error("Unexpected chat creation update",n));const s=n.chats[0];if(s&&s instanceof f.Api.Chat)return(0,l.vX)(s);i.eMD&&console.error("Created chat not found",n)}async function K({chatId:e,accessHash:t,photo:n}){const s=(0,y.yA)(e,t);let i;if(n instanceof File){const e=await(0,p.cT)(n);i=new f.Api.InputChatUploadedPhoto({file:e})}else if(n){const e=(0,y.NA)(n);if(!e)return!1;i=new f.Api.InputChatPhoto({id:e})}else i=new f.Api.InputChatPhotoEmpty;return(0,p.RE)(s instanceof f.Api.InputChannel?new f.Api.channels.EditPhoto({channel:s,photo:i}):new f.Api.messages.EditChatPhoto({chatId:s,photo:i}),!0)}async function W({chat:e,shouldBePinned:t}){const{id:n,accessHash:s}=e;await(0,p.RE)(new f.Api.messages.ToggleDialogPin({peer:new f.Api.InputDialogPeer({peer:(0,y.h6)(n,s)}),pinned:t||void 0}))&&E({"@type":"updateChatPinned",id:e.id,isPinned:t})}function J({chat:e,folderId:t}){const{id:n,accessHash:s}=e;return(0,p.RE)(new f.Api.folders.EditPeerFolders({folderPeers:[new f.Api.InputFolderPeer({peer:(0,y.h6)(n,s),folderId:t})]}),!0)}async function X(){const e=await(0,p.RE)(new f.Api.messages.GetDialogFilters);if(!e)return;const t=e.findIndex((e=>e instanceof f.Api.DialogFilterDefault)),n=e.filter((e=>e instanceof f.Api.DialogFilter)),s=n.map((({id:e})=>e));return-1!==t&&s.splice(t,0,i.NfV),{byId:(0,g.ee)(n.map(l.bZ),"id"),orderedIds:s}}async function z(){const e=await(0,p.RE)(new f.Api.messages.GetSuggestedDialogFilters);if(e)return e.map(l.Cq).filter(Boolean)}async function Q({id:e,folderUpdate:t}){t.excludedChatIds&&(t.excludedChatIds=t.excludedChatIds.filter((e=>!t.includedChatIds.includes(e)))),E({"@type":"updateChatFolder",id:e,folder:t})}async function $(e){E({"@type":"updateChatFolder",id:e,folder:void 0})}function Y(e){E({"@type":"updateChatFoldersOrder",orderedIds:e})}async function ee({chat:e,hasUnreadMark:t}){const{id:n,accessHash:s}=e;await(0,p.RE)(new f.Api.messages.MarkDialogUnread({peer:new f.Api.InputDialogPeer({peer:(0,y.h6)(n,s)}),unread:t||void 0}))&&E({"@type":"updateChat",id:e.id,chat:{hasUnreadMark:t}})}async function te(e){return se(await(0,p.RE)(new f.Api.contacts.ResolvePhone({phone:e})))}async function ne(e){return se(await(0,p.RE)(new f.Api.contacts.ResolveUsername({username:e})))}function se(e){if(!e)return;const{users:t,chats:n}=e,s=n.length?(0,l.vX)(n[0]):(0,l.vX)(t[0]);return s?(ve(e),{chat:s,user:(0,m.PH)(t[0])}):void 0}function ie({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e,i=(0,y.yA)(n,s);return(0,p.RE)(new f.Api.channels.TogglePreHistoryHidden({channel:i,enabled:t}),!0)}function ae({chat:e,bannedRights:t}){const{id:n,accessHash:s}=e,i=(0,y.h6)(n,s);return(0,p.RE)(new f.Api.messages.EditChatDefaultBannedRights({peer:i,bannedRights:(0,y.M6)(t)}),!0)}function oe({chat:e,user:t,bannedRights:n,untilDate:s}){const i=(0,y.yA)(e.id,e.accessHash),a=(0,y.h6)(t.id,t.accessHash);return(0,p.RE)(new f.Api.channels.EditBanned({channel:i,participant:a,bannedRights:(0,y.M6)(n,s)}),!0)}function re({chat:e,user:t,adminRights:n,customTitle:s=""}){const i=(0,y.yA)(e.id,e.accessHash),a=(0,y.yA)(t.id,t.accessHash);return(0,p.RE)(new f.Api.channels.EditAdmin({channel:i,userId:a,adminRights:(0,y.$x)(n),rank:s}),!0)}async function de(e,t){const n=(0,y.yA)(e.id,e.accessHash);await(0,p.RE)(n instanceof f.Api.InputChannel?new f.Api.channels.EditTitle({channel:n,title:t}):new f.Api.messages.EditChatTitle({chatId:n,title:t}),!0)}async function ue(e,t){await(0,p.RE)(new f.Api.messages.EditChatAbout({peer:(0,y.h6)(e.id,e.accessHash),about:t}))&&E({"@type":"updateChatFullInfo",id:e.id,fullInfo:{about:t}})}function ce({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e,i=(0,y.yA)(n,s);return(0,p.RE)(new f.Api.channels.ToggleSignatures({channel:i,enabled:t}),!0)}async function fe(e,t,n="recent",s){let a;switch(n){case"kicked":a=new f.Api.ChannelParticipantsKicked({q:""});break;case"admin":a=new f.Api.ChannelParticipantsAdmins;break;default:a=new f.Api.ChannelParticipantsRecent}const o=await(0,p.RE)(new f.Api.channels.GetParticipants({channel:(0,y.yA)(e,t),filter:a,offset:s,limit:i.mok}));if(!o||o instanceof f.Api.channels.ChannelParticipantsNotModified)return;ve(o);const{users:r,userStatusesById:d}=(0,m.YF)(o.users);return{members:(0,l.B0)(o),users:r,userStatusesById:d}}async function pe(){const e=await(0,p.RE)(new f.Api.channels.GetGroupsForDiscussion);if(e)return ve(e),e.chats.map((e=>(0,l.vX)(e)))}function le({channel:e,chat:t}){return(0,p.RE)(new f.Api.channels.SetDiscussionGroup({broadcast:(0,y.h6)(e.id,e.accessHash),group:t?(0,y.h6)(t.id,t.accessHash):new f.Api.InputChannelEmpty}),!0)}async function he(e){const t=await(0,p.RE)(new f.Api.messages.MigrateChat({chatId:(0,y.yA)(e.id)}),void 0,!0);if(t&&t instanceof f.Api.Updates)return ve(t),(0,l.vX)(t.chats[1]);i.eMD&&console.error("Unexpected channel creation update",t)}async function me(e){const t=await(0,p.RE)(new f.Api.messages.CheckChatInvite({hash:e}));if(!t)return;let n;if(t instanceof f.Api.ChatInvite){const{photo:n,participantsCount:s,title:i,channel:a,requestNeeded:o,about:r,megagroup:d}=t;n instanceof f.Api.Photo&&(0,A.Hh)(t.photo),E({"@type":"showInvite",data:{title:i,about:r,hash:e,participantsCount:s,isChannel:a&&!d,isRequestNeeded:o,...n instanceof f.Api.Photo&&{photo:(0,v.lq)(n)}}})}else n=(0,l.vX)(t.chat),n&&E({"@type":"updateChat",id:n.id,chat:n});return n?{chatId:n.id}:void 0}async function ge(e,t,n=!1){try{return"chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type?await(0,p.RE)(new f.Api.channels.InviteToChannel({channel:(0,y.yA)(e.id,e.accessHash),users:t.map((e=>(0,y.yA)(e.id,e.accessHash)))}),!0,n):await Promise.all(t.map((t=>(0,p.RE)(new f.Api.messages.AddChatUser({chatId:(0,y.yA)(e.id),userId:(0,y.yA)(t.id,t.accessHash)}),!0,n))))}catch(e){return}}function ye(e,t){return"chatTypeChannel"===e.type||"chatTypeSuperGroup"===e.type?oe({chat:e,user:t,bannedRights:{viewMessages:!0,sendMessages:!0,sendMedia:!0,sendStickers:!0,sendGifs:!0,sendGames:!0,sendInline:!0,embedLinks:!0,sendPolls:!0,changeInfo:!0,inviteUsers:!0,pinMessages:!0,manageTopics:!0,sendPhotos:!0,sendVideos:!0,sendRoundvideos:!0,sendAudios:!0,sendVoices:!0,sendDocs:!0,sendPlain:!0},untilDate:i.PT8}):(0,p.RE)(new f.Api.messages.DeleteChatUser({chatId:(0,y.yA)(e.id),userId:(0,y.yA)(t.id,t.accessHash)}),!0)}function Ae(e,t){return(0,p.RE)(new f.Api.channels.ToggleJoinToSend({channel:(0,y.yA)(e.id,e.accessHash),enabled:t}),!0)}function we(e,t){return(0,p.RE)(new f.Api.channels.ToggleJoinRequest({channel:(0,y.yA)(e.id,e.accessHash),enabled:t}),!0)}function ve(e){"users"in e&&(0,A.eQ)(e.users),"chats"in e&&(0,A.eQ)(e.chats),"messages"in e&&e.messages.forEach((e=>{e instanceof f.Api.Message&&(0,y.Bs)(e)&&(0,A.iv)(e)}))}async function be({hash:e}){const t=await(0,p.RE)(new f.Api.messages.ImportChatInvite({hash:e}));if(t instanceof f.Api.Updates&&t.chats.length)return(0,l.vX)(t.chats[0])}function Ie({chat:e,enabledReactions:t}){return(0,p.RE)(new f.Api.messages.SetChatAvailableReactions({peer:(0,y.h6)(e.id,e.accessHash),availableReactions:(0,y.e6)(t)}),!0)}function Ce({chat:e,isProtected:t}){const{id:n,accessHash:s}=e;return(0,p.RE)(new f.Api.messages.ToggleNoForwards({peer:(0,y.h6)(n,s),enabled:t}),!0)}function Se({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e;return(0,p.RE)(new f.Api.channels.ToggleParticipantsHidden({channel:(0,y.h6)(n,s),enabled:t}),!0)}function Pe({chat:e,isEnabled:t}){const{id:n,accessHash:s}=e;return(0,p.RE)(new f.Api.channels.ToggleForum({channel:(0,y.h6)(n,s),enabled:t}),!0)}async function Me({chat:e,title:t,iconColor:n,iconEmojiId:s,sendAs:i}){const{id:a,accessHash:o}=e,r=await(0,p.RE)(new f.Api.channels.CreateForumTopic({channel:(0,y.h6)(a,o),title:t,iconColor:n,iconEmojiId:s?c()(s):void 0,sendAs:i?(0,y.h6)(i.id,i.accessHash):void 0,randomId:(0,y.bJ)()}));if(r instanceof f.Api.Updates&&r.updates.length)return r.updates?.find((e=>e instanceof f.Api.UpdateMessageID))?.id}async function Re({chat:e,query:t,offsetTopicId:n,offsetId:s,offsetDate:a,limit:o=i.C1M}){const{id:r,accessHash:d}=e,u=await(0,p.RE)(new f.Api.channels.GetForumTopics({channel:(0,y.h6)(r,d),limit:o,q:t,offsetTopic:n,offsetId:s,offsetDate:a}));if(!u)return;ve(u);const{count:c,orderByCreateDate:g}=u;return{topics:u.topics.map(l.EP).filter(Boolean),messages:u.messages.map(h.eL).filter(Boolean),users:u.users.map(m.PH).filter(Boolean),chats:u.chats.map((e=>(0,l.vX)(e))).filter(Boolean),count:c+1,shouldOrderByCreateDate:g,draftsById:u.topics.reduce(((e,t)=>(t instanceof f.Api.ForumTopic&&t.draft&&(e[t.id]=(0,h.p4)(t.draft)),e)),{}),readInboxMessageIdByTopicId:u.topics.reduce(((e,t)=>(t instanceof f.Api.ForumTopic&&t.readInboxMaxId&&(e[t.id]=t.readInboxMaxId),e)),{})}}async function Ee({chat:e,topicId:t}){const{id:n,accessHash:s}=e,i=await(0,p.RE)(new f.Api.channels.GetForumTopicsByID({channel:(0,y.h6)(n,s),topics:[t]}));if(!(i?.topics.length&&i.topics[0]instanceof f.Api.ForumTopic))return;ve(i);const a=i.messages.map(h.eL).filter(Boolean),o=i.users.map(m.PH).filter(Boolean),r=i.chats.map((e=>(0,l.vX)(e))).filter(Boolean);return{topic:(0,l.EP)(i.topics[0]),messages:a,users:o,chats:r}}function De({chat:e,topicId:t}){const{id:n,accessHash:s}=e;return(0,p.RE)(new f.Api.channels.DeleteTopicHistory({channel:(0,y.h6)(n,s),topMsgId:t}),!0)}function Ue({chat:e,topicId:t,isPinned:n}){const{id:s,accessHash:i}=e;return(0,p.RE)(new f.Api.channels.UpdatePinnedForumTopic({channel:(0,y.h6)(s,i),topicId:t,pinned:n}),!0)}function ke({chat:e,topicId:t,title:n,iconEmojiId:s,isClosed:a,isHidden:o}){const{id:r,accessHash:d}=e;return(0,p.RE)(new f.Api.channels.EditForumTopic({channel:(0,y.h6)(r,d),topicId:t,title:n,iconEmojiId:t!==i.OxA&&s?c()(s):void 0,closed:a,hidden:o}),!0)}var Te=n(59187),Be=n(71394),_e=n(1735),xe=n(78058),Ne=n(82267),He=n(74766),qe=n(50488),Ge=n(37869),je=n(48764).Buffer;const Oe=63;let Fe;async function Le({chat:e,threadId:t,offsetId:n,lastMessageId:s,isUp:i,...a}){}async function Ve({chat:e,messageId:t}){const n="channel"===(0,y.Zm)(e.id);let s;try{s=await(0,p.RE)(n?new f.Api.channels.GetMessages({channel:(0,y.yA)(e.id,e.accessHash),id:[new f.Api.InputMessageID({id:t})]}):new f.Api.messages.GetMessages({id:[new f.Api.InputMessageID({id:t})]}),void 0,!0)}catch(e){const{message:t}=e;"CHANNEL_PRIVATE"!==t&&Fe({"@type":"error",error:{message:t,isSlowMode:!1,hasErrorKey:!0}})}if(!s||s instanceof f.Api.messages.MessagesNotModified)return;const i=s.messages[0];if(!i)return;if(i instanceof f.Api.MessageEmpty)return Te._Q;const a=i&&(0,h.eL)(i);return a?(i instanceof f.Api.Message&&(0,A.iv)(i),{message:a,users:s.users.map(m.PH).filter(Boolean)}):void 0}let Ze=Promise.resolve();function Ke({chat:e,text:t,entities:n,replyingTo:s,replyingToTopId:a,attachment:r,sticker:d,gif:u,poll:c,contact:p,isSilent:l,scheduledAt:m,groupedId:g,noWebPage:A,sendAs:w,shouldUpdateStickerSetsOrder:v,botInfo:b},I){const C=(0,h.Ax)(e,t,n,s,a,r,d,u,c,p,g,m,w);Fe({"@type":C.isScheduled?"newScheduledMessage":"newMessage",id:C.id,chatId:e.id,message:{...C,sendingState:"messageSendingStatePending"}});const S=(0,y.bJ)();if(o.ZP.localMessages[String(S)]=C,g)return function({chat:e,text:t,entities:n,replyingTo:s,replyingToTopId:a,attachment:o,groupedId:r,isSilent:d,scheduledAt:u,sendAs:c},f,p,l){let h=-1;We[r]||(We[r]={counter:0,singleMediaByIndex:{}}),h=We[r].counter++;const m=Ze;return Ze=(async()=>{let e;try{e=await ze(p,o,l)}catch(e){return i.eMD&&console.warn(e),We[r].counter--,void await m}if(await m,delete We[r],l){let t;if(e&&e.file&&e.file.id&&(t=e.file.id.toString()),p.content.photo||p.content.document){const e=async e=>({dataUri:await(0,Be.YJ)(await(0,Be.gm)(e.thumbBlobUrl)),size:{width:e.quick.width,height:e.quick.height}});if(p.content.document&&(p.content.document.id=t,"image"===p.content.document.mimeType.split("/")[0])){const{size:t,dataUri:n}=await e(o);p.content.document.mediaType="photo",p.content.document.previewBlobUrl=void 0,p.content.document.thumbnail={...t,dataUri:n},p.content.document.mediaSize=t}if(p.content.photo){const{size:n,dataUri:s}=await e(o);p.content.photo={isSpoiler:p.content.photo.isSpoiler,id:t,thumbnail:{...n,dataUri:s},sizes:[{...n,type:"y"}]}}}await l(2,p)}})(),Ze}({chat:e,text:t,entities:n,replyingTo:s,replyingToTopId:a,attachment:r,groupedId:g,isSilent:l,scheduledAt:m},0,C,I);const P=Ze;return Ze=(async()=>{let t;if(r)try{t=await ze(C,r,I)}catch(e){return i.eMD&&console.warn(e),void await P}else d?t=(0,y.sq)(d):u?t=(0,y.sq)(u):c?t=(0,y.wk)(c,S):p&&(t=new f.Api.InputMediaContact({phoneNumber:p.phoneNumber,firstName:p.firstName,lastName:p.lastName,vcard:""}));await P,await new Ge.Z({chat:e,msgSend:C,attachment:r,media:t,botInfo:b},Fe).process()})(),Ze}const We={};async function Je({chat:e,message:t,text:n,entities:s,noWebPage:i}){const a=1e3*t.date>Date.now()+1e3*(0,Ne.Qj)();let r={content:{...t.content,...n&&{text:{text:n,entities:s}}}};const d=(0,xe.k)(r.content,r.groupedId);r={...r,emojiOnlyCount:d},Fe({"@type":a?"updateScheduledMessage":"updateMessage",id:t.id,chatId:e.id,message:r}),o.ZP.localMessages[t.id]={...t,...r},s&&s.map(y.ns)}async function Xe({chat:e,message:t,scheduledAt:n}){await(0,p.RE)(new f.Api.messages.EditMessage({peer:(0,y.h6)(e.id,e.accessHash),id:t.id,scheduleDate:n}),!0)}async function ze(e,t,n){const{filename:s,blobUrl:a,encryptUrl:o,mimeType:r,quick:d,voice:u,audio:c,previewBlobUrl:p,shouldSendAsFile:l,shouldSendAsSpoiler:h}=t,m=t=>{n.isCanceled?m.isCanceled=!0:n(t,e)};let g;g=o?await(0,Be.dc)(o,"EN_"+s):await(0,Be.dc)(a,s);const y=await(0,He.uploadFileV1)({file:g,onProgress:m,workers:i.eLN}),A=[new f.Api.DocumentAttributeFilename({fileName:s})];if(!l){if(d){if(i.oGt.has(r)&&r!==i.s11)return new f.Api.InputMediaUploadedPhoto({file:y,spoiler:h});if(i.wGh.has(r)){const{width:e,height:t,duration:n}=d;void 0!==n&&A.push(new f.Api.DocumentAttributeVideo({duration:n,w:e,h:t,supportsStreaming:!0}))}}if(c){const{duration:e,title:t,performer:n}=c;A.push(new f.Api.DocumentAttributeAudio({duration:e,title:t,performer:n}))}if(u){const{duration:e,waveform:t}=u,{data:n}=(0,_e.C)(t,Oe);A.push(new f.Api.DocumentAttributeAudio({voice:!0,duration:e,waveform:je.from(n)}))}}return new f.Api.InputMediaUploadedDocument({file:y,mimeType:r,attributes:A,thumb:void 0,forceFile:l,spoiler:h})}async function Qe({chat:e,messageId:t,isUnpin:n,isOneSide:s,isSilent:i}){await(0,p.RE)(new f.Api.messages.UpdatePinnedMessage({peer:(0,y.h6)(e.id,e.accessHash),id:t,...n&&{unpin:!0},...s&&{pmOneside:!0},...i&&{silent:!0}}),!0)}async function $e({chat:e,threadId:t}){await(0,p.RE)(new f.Api.messages.UnpinAllMessages({peer:(0,y.h6)(e.id,e.accessHash),...t&&{topMsgId:t}}),!0)}async function Ye({chat:e,messageIds:t,shouldDeleteForAll:n}){const s="channel"===(0,y.Zm)(e.id);Fe({"@type":"deleteMessages",ids:t,chatId:e.id,...s&&{chatId:e.id}})}async function et({chat:e,messageIds:t}){await(0,p.RE)(new f.Api.messages.DeleteScheduledMessages({peer:(0,y.h6)(e.id,e.accessHash),id:t}))&&Fe({"@type":"deleteScheduledMessages",ids:t,chatId:e.id})}async function tt({chat:e,shouldDeleteForAll:t}){const n="channel"===(0,y.Zm)(e.id),s=await(0,p.RE)(n?new f.Api.channels.DeleteHistory({channel:(0,y.yA)(e.id,e.accessHash)}):new f.Api.messages.DeleteHistory({peer:(0,y.h6)(e.id,e.accessHash),...t&&{revoke:!0},...!t&&{just_clear:!0}}));s&&("offset"in s&&s.offset?await tt({chat:e,shouldDeleteForAll:t}):Fe({"@type":"deleteHistory",chatId:e.id}))}async function nt({peer:e,messageIds:t,reason:n,description:s}){return await(0,p.RE)(new f.Api.messages.Report({peer:(0,y.h6)(e.id,e.accessHash),id:t,reason:(0,y.bQ)(n),message:s}))}async function st({peer:e,threadId:t,action:n}){const s=(0,y.p6)(n);if(s)try{return await(0,p.RE)(new f.Api.messages.SetTyping({peer:(0,y.h6)(e.id,e.accessHash),topMsgId:t,action:s}),void 0,!0)}catch(e){}else i.eMD&&console.warn("Unsupported message action",n)}async function it({chat:e,threadId:t,maxId:n=-1}){const s="channel"===(0,y.Zm)(e.id),a=Math.min(n,i.PT8);s&&t===Te._f?await(0,p.RE)(new f.Api.channels.ReadHistory({channel:(0,y.yA)(e.id,e.accessHash),maxId:a})):s?await(0,p.RE)(new f.Api.messages.ReadDiscussion({peer:(0,y.h6)(e.id,e.accessHash),msgId:t,readMaxId:a})):await(0,p.RE)(new f.Api.messages.ReadHistory({peer:(0,y.h6)(e.id,e.accessHash),maxId:a})),t===Te._f?_({chat:e,noLastMessage:!0}):rt({chat:e,threadId:t})}async function at({chat:e,messageIds:t}){const n="channel"===(0,y.Zm)(e.id);await(0,p.RE)(n?new f.Api.channels.ReadMessageContents({channel:(0,y.yA)(e.id,e.accessHash),id:t}):new f.Api.messages.ReadMessageContents({id:t})),Fe({...n?{"@type":"updateChannelMessages",channelId:e.id}:{"@type":"updateCommonBoxMessages"},ids:t,messageUpdate:{hasUnreadMention:!1,isMediaUnread:!1}})}async function ot({chat:e,ids:t}){const n=await(0,p.RE)(new f.Api.messages.GetMessagesViews({peer:(0,y.h6)(e.id,e.accessHash),id:t,increment:!1}));if(n)return t.map(((e,t)=>{const{views:s,forwards:i,replies:a}=n.views[t];return{id:e,views:s,forwards:i,messagesCount:a?.replies}}))}async function rt({chat:e,threadId:t,originChannelId:n}){if(t===Te._f)return;const[s,i]=await Promise.all([(0,p.RE)(new f.Api.messages.GetDiscussionMessage({peer:(0,y.h6)(e.id,e.accessHash),msgId:Number(t)})),(0,p.RE)(new f.Api.messages.GetReplies({peer:(0,y.h6)(e.id,e.accessHash),msgId:Number(t),offsetId:1,addOffset:-1,limit:1}))]);if(!s||!s.messages.length)return;const a=(0,A.MZ)(s.messages[0]);if(!a)return;const o=s.messages[s.messages.length-1].id;return Fe({"@type":"updateThreadInfo",chatId:a,threadId:o,threadInfo:{threadId:o,topMessageId:o,lastReadInboxMessageId:s.readInboxMaxId,messagesCount:i instanceof f.Api.messages.ChannelMessages?i.count:void 0,lastMessageId:s.maxId,...n?{originChannelId:n}:void 0},firstMessageId:i&&"messages"in i&&i.messages.length?i.messages[0].id:void 0}),s.chats.map((e=>(0,l.vX)(e))).filter(Boolean).forEach((e=>{Fe({"@type":"updateChat",id:e.id,chat:e,noTopChatsRequest:!0})})),e.isForum&&Fe({"@type":"updateTopic",chatId:e.id,topicId:t}),(0,A.eQ)(s.users),(0,A.eQ)(s.chats),{topMessageId:o,discussionChatId:a,users:s.users.map(m.PH).filter(Boolean)}}async function dt({chat:e,type:t,query:n,topMessageId:s,minDate:i,maxDate:a,...o}){let r;switch(t){case"media":r=new f.Api.InputMessagesFilterPhotoVideo;break;case"documents":r=new f.Api.InputMessagesFilterDocument;break;case"links":r=new f.Api.InputMessagesFilterUrl;break;case"audio":r=new f.Api.InputMessagesFilterMusic;break;case"voice":r=new f.Api.InputMessagesFilterRoundVoice;break;case"profilePhoto":r=new f.Api.InputMessagesFilterChatPhotos;break;default:r=new f.Api.InputMessagesFilterEmpty}const d=await(0,p.RE)(new f.Api.messages.Search({peer:(0,y.h6)(e.id,e.accessHash),topMsgId:s,filter:r,q:n||"",minDate:i,maxDate:a,...o}));if(!d||d instanceof f.Api.messages.MessagesNotModified||!d.messages)return;wt(d);const u=d.chats.map((e=>(0,l.vX)(e))).filter(Boolean),c=d.users.map(m.PH).filter(Boolean),g=d.messages.map(h.eL).filter(Boolean);let A,w=g.length;return(d instanceof f.Api.messages.MessagesSlice||d instanceof f.Api.messages.ChannelMessages)&&(w=d.count,g.length&&(A=g[g.length-1].id)),{chats:u,users:c,messages:g,totalCount:w,nextOffsetId:A}}async function ut({query:e,offsetRate:t=0,limit:n,type:s="text",minDate:a,maxDate:o}){let r;switch(s){case"media":r=new f.Api.InputMessagesFilterPhotoVideo;break;case"documents":r=new f.Api.InputMessagesFilterDocument;break;case"links":r=new f.Api.InputMessagesFilterUrl;break;case"audio":r=new f.Api.InputMessagesFilterMusic;break;case"voice":r=new f.Api.InputMessagesFilterRoundVoice;break;default:if(!(e||o&&a))return;r=new f.Api.InputMessagesFilterEmpty}const d=await(0,p.RE)(new f.Api.messages.SearchGlobal({q:e,offsetRate:t,offsetPeer:new f.Api.InputPeerEmpty,limit:n,filter:r,folderId:i.NfV,minDate:a,maxDate:o}));if(!d||d instanceof f.Api.messages.MessagesNotModified||!d.messages)return;wt({chats:d.chats,users:d.users,messages:d.messages});const u=d.chats.map((e=>(0,l.vX)(e))).filter(Boolean),c=d.users.map(m.PH).filter(Boolean),g=d.messages.map(h.eL).filter(Boolean);let y,A=g.length;return(d instanceof f.Api.messages.MessagesSlice||d instanceof f.Api.messages.ChannelMessages)&&(A=d.count,g.length&&(y=g[g.length-1].id)),{messages:g,users:c,chats:u,totalCount:A,nextRate:"nextRate"in d&&d.nextRate?d.nextRate:y}}async function ct({message:e}){const t=await(0,p.RE)(new f.Api.messages.GetWebPagePreview({message:e}));return t&&(0,h.kc)(t)}async function ft({chat:e,messageId:t,options:n}){const{id:s,accessHash:i}=e;await(0,p.RE)(new f.Api.messages.SendVote({peer:(0,y.h6)(s,i),msgId:t,options:n.map(A.Tf)}),!0)}async function pt({chat:e,messageId:t,poll:n}){const{id:s,accessHash:i}=e;await(0,p.RE)(new f.Api.messages.EditMessage({peer:(0,y.h6)(s,i),id:t,media:(0,y.yT)(n,!0)}))}async function lt({chat:e,messageId:t,option:n,offset:s,limit:i,shouldResetVoters:a}){const{id:o,accessHash:r}=e,d=await(0,p.RE)(new f.Api.messages.GetPollVotes({peer:(0,y.h6)(o,r),id:t,...n&&{option:(0,A.Tf)(n)},...s&&{offset:s},...i&&{limit:i}}));if(!d)return;wt({chats:[],users:d.users,messages:[]});const u=d.users.map(m.PH).filter(Boolean),c=d.votes.map((e=>({userId:e.userId,date:e.date})));return{count:d.count,votes:c,users:u,nextOffset:d.nextOffset,shouldResetVoters:a}}async function ht({chat:e,ids:t}){await(0,p.RE)(new f.Api.messages.GetExtendedMedia({peer:(0,y.h6)(e.id,e.accessHash),id:t}))}async function mt({fromChat:e,toChat:t,toThreadId:n,messages:s,isSilent:i,scheduledAt:a,sendAs:r,withMyScore:d,noAuthors:u,noCaptions:c,isCurrentUserPremium:f}){s.map((({id:e})=>e));const p=s.map(y.bJ);s.forEach(((e,s)=>{const i=(0,h.Jf)({toChat:t,toThreadId:n,message:e,scheduledAt:a,noAuthors:u,noCaptions:c,isCurrentUserPremium:f});o.ZP.localMessages[String(p[s])]=i,Fe({"@type":i.isScheduled?"newScheduledMessage":"newMessage",id:i.id,chatId:t.id,message:i})}))}async function gt({chat:e,timestamp:t}){const n=await(0,p.RE)(new f.Api.messages.GetHistory({peer:(0,y.h6)(e.id,e.accessHash),offsetDate:t,addOffset:-1,limit:1}));if(n&&!(n instanceof f.Api.messages.MessagesNotModified)&&n.messages&&n.messages.length)return n.messages[0].id}async function yt({chat:e}){const{id:t,accessHash:n}=e,s=await(0,p.RE)(new f.Api.messages.GetScheduledHistory({peer:(0,y.h6)(t,n)}));if(s&&!(s instanceof f.Api.messages.MessagesNotModified)&&s.messages)return wt(s),{messages:s.messages.map(h.eL).filter(Boolean)}}async function At({chat:e,ids:t}){const{id:n,accessHash:s}=e;await(0,p.RE)(new f.Api.messages.SendScheduledMessages({peer:(0,y.h6)(n,s),id:t}),!0)}function wt(e){(0,A.eQ)(e.users),(0,A.eQ)(e.chats),e.messages.forEach((e=>{(e instanceof f.Api.Message&&(0,y.Bs)(e)||e instanceof f.Api.MessageService&&(0,y.zA)(e))&&(0,A.iv)(e)}))}async function vt({chat:e,threadId:t}){const n=await(0,p.RE)(new f.Api.messages.Search({peer:(0,y.h6)(e.id,e.accessHash),filter:new f.Api.InputMessagesFilterPinned,q:"",limit:i.tiD,topMsgId:t}));if(!n||n instanceof f.Api.messages.MessagesNotModified||!n.messages)return;wt(n);const s=n.chats.map((e=>(0,l.vX)(e))).filter(Boolean),a=n.users.map(m.PH).filter(Boolean);return{messages:n.messages.map(h.eL).filter(Boolean),users:a,chats:s}}async function bt({chat:e,messageId:t}){const n=await(0,p.RE)(new f.Api.messages.GetMessageReadParticipants({peer:(0,y.h6)(e.id,e.accessHash),msgId:t}));return n?n.map(String):void 0}async function It({chat:e}){const t=await(0,p.RE)(new f.Api.channels.GetSendAs({peer:(0,y.h6)(e.id,e.accessHash)}),void 0,void 0,void 0,void 0,!0);if(t)return(0,A.eQ)(t.users),(0,A.eQ)(t.chats),{users:t.users.map(m.PH).filter(Boolean),chats:t.chats.map((e=>(0,l.vX)(e))).filter(Boolean),sendAs:t.peers.map(l.BW)}}function Ct({sendAs:e,chat:t}){return(0,p.RE)(new f.Api.messages.SaveDefaultSendAs({peer:(0,y.h6)(t.id,t.accessHash),sendAs:(0,y.h6)(e.id,e.accessHash)}))}async function St({chat:e}){const t=await(0,p.RE)(new f.Api.channels.GetSponsoredMessages({channel:(0,y.h6)(e.id,e.accessHash)}));if(t&&!(t instanceof f.Api.messages.SponsoredMessagesEmpty)&&t.messages.length)return wt(t),{messages:t.messages.map(h.VS).filter(Boolean),users:t.users.map(m.PH).filter(Boolean),chats:t.chats.map((e=>(0,l.vX)(e))).filter(Boolean)}}async function Pt({chat:e,random:t}){await(0,p.RE)(new f.Api.channels.ViewSponsoredMessage({channel:(0,y.h6)(e.id,e.accessHash),randomId:(0,A.Tf)(t)}))}function Mt({chat:e}){return(0,p.RE)(new f.Api.messages.ReadMentions({peer:(0,y.h6)(e.id,e.accessHash)}),!0)}function Rt({chat:e}){return(0,p.RE)(new f.Api.messages.ReadReactions({peer:(0,y.h6)(e.id,e.accessHash)}),!0)}async function Et({chat:e,...t}){const n=await(0,p.RE)(new f.Api.messages.GetUnreadMentions({peer:(0,y.h6)(e.id,e.accessHash),limit:i.CJw,...t}));if(n&&!(n instanceof f.Api.messages.MessagesNotModified)&&n.messages)return wt(n),{messages:n.messages.map(h.eL).filter(Boolean),users:n.users.map(m.PH).filter(Boolean),chats:n.chats.map((e=>(0,l.vX)(e))).filter(Boolean)}}async function Dt({chat:e,...t}){const n=await(0,p.RE)(new f.Api.messages.GetUnreadReactions({peer:(0,y.h6)(e.id,e.accessHash),limit:i.pCG,...t}));if(n&&!(n instanceof f.Api.messages.MessagesNotModified)&&n.messages)return wt(n),{messages:n.messages.map(h.eL).filter(Boolean),users:n.users.map(m.PH).filter(Boolean),chats:n.chats.map((e=>(0,l.vX)(e))).filter(Boolean)}}async function Ut({chat:e,messageId:t}){const n=await(0,p.RE)(new f.Api.messages.TranscribeAudio({msgId:t,peer:(0,y.h6)(e.id,e.accessHash)}));if(n)return Fe({"@type":"updateTranscribedAudio",isPending:n.pending,transcriptionId:n.transcriptionId.toString(),text:n.text}),n.transcriptionId.toString()}async function kt(e){let t;const n="chat"in e;if(n){const{chat:n,messageIds:s,toLanguageCode:i}=e;t=await(0,p.RE)(new f.Api.messages.TranslateText({peer:(0,y.h6)(n.id,n.accessHash),id:s,toLang:i}))}else{const{text:n,toLanguageCode:s}=e;t=await(0,p.RE)(new f.Api.messages.TranslateText({text:n.map((e=>(0,y.LU)(e))),toLang:s}))}if(!t)return;const s=t.result.map((e=>(0,h.RI)(e)));return n&&Fe({"@type":"updateMessageTranslations",chatId:e.chat.id,messageIds:e.messageIds,translations:s,toLanguageCode:e.toLanguageCode}),s}let Tt,Bt,_t,xt;async function Nt({id:e,accessHash:t}){const n=(0,y.yA)(e,t);if(!(n instanceof f.Api.InputUser))return;const s=await(0,p.RE)(new f.Api.users.GetFullUser({id:n}));if(!s)return;Jt(s),(0,A.aK)(s.users[0],!0),s.fullUser.profilePhoto instanceof f.Api.Photo&&(o.ZP.photos[s.fullUser.profilePhoto.id.toString()]=s.fullUser.profilePhoto),s.fullUser.personalPhoto instanceof f.Api.Photo&&(o.ZP.photos[s.fullUser.personalPhoto.id.toString()]=s.fullUser.personalPhoto),s.fullUser.fallbackPhoto instanceof f.Api.Photo&&(o.ZP.photos[s.fullUser.fallbackPhoto.id.toString()]=s.fullUser.fallbackPhoto);const i=s.fullUser.botInfo;i?.descriptionPhoto instanceof f.Api.Photo&&(o.ZP.photos[i.descriptionPhoto.id.toString()]=i.descriptionPhoto),i?.descriptionDocument instanceof f.Api.Document&&(o.ZP.documents[i.descriptionDocument.id.toString()]=i.descriptionDocument);const a=(0,m.q)(s),r=(0,m.PH)(s.users[0]);return Tt({"@type":"updateUser",id:e,user:{...r,avatarHash:r?.avatarHash||void 0,fullInfo:a.fullInfo}}),a}async function Ht(e,t,n){const s=await(0,p.RE)(new f.Api.messages.GetCommonChats({userId:(0,y.yA)(e,t),maxId:n?(0,y.T4)(n,(0,y.Zm)(n)):void 0,limit:i.tRq}));if(!s)return;Jt(s);const a=[],o=[];return s.chats.forEach((e=>{const t=(0,l.vX)(e);t&&(o.push(t),a.push(t.id))})),{chats:o,chatIds:a,isFullyLoaded:a.length<i.tRq}}async function qt(){const e=await(0,p.RE)(new f.Api.help.GetNearestDc);return e?.country}async function Gt(){const e=await(0,p.RE)(new f.Api.contacts.GetTopPeers({correspondents:!0}));if(!(e instanceof f.Api.contacts.TopPeers))return;const t=e.users.map(m.PH).filter((e=>Boolean(e)&&!e.isSelf));return{ids:t.map((({id:e})=>e)),users:t}}async function jt(){const e=await(0,p.RE)(new f.Api.contacts.GetContacts({hash:c()("0")}));if(!e||e instanceof f.Api.contacts.ContactsNotModified)return;e.users.forEach((e=>{e instanceof f.Api.User&&(0,A.aK)(e,!0)}));const{users:t,userStatusesById:n}=(0,m.YF)(e.users);return{users:t,userStatusesById:n,chats:e.users.map((e=>(0,l.vX)(e))).filter(Boolean)}}async function Ot({users:e}){const t=await(0,p.RE)(new f.Api.users.GetUsers({id:e.map((({id:e,accessHash:t})=>(0,y.h6)(e,t)))}));if(t&&t.length)return t.forEach((e=>{e instanceof f.Api.User&&(0,A.aK)(e,!0)})),(0,m.YF)(t)}async function Ft({phone:e,firstName:t,lastName:n}){const s=await(0,p.RE)(new f.Api.contacts.ImportContacts({contacts:[(0,y.Wl)({phone:e||"",firstName:t||"",lastName:n||""})]}));return s instanceof f.Api.contacts.ImportedContacts&&s.users.length&&(0,A.aK)(s.users[0]),s?.imported.length?(0,w.Xo)(s.imported[0].userId,"user"):void 0}function Lt({id:e,accessHash:t,phoneNumber:n="",firstName:s="",lastName:i="",shouldSharePhoneNumber:a=!1}){return(0,p.RE)(new f.Api.contacts.AddContact({id:(0,y.yA)(e,t),firstName:s,lastName:i,phone:n,...a&&{addPhonePrivacyException:a}}),!0)}async function Vt({id:e,accessHash:t}){const n=(0,y.yA)(e,t);n instanceof f.Api.InputUser&&await(0,p.RE)(new f.Api.contacts.DeleteContacts({id:[n]}))&&Tt({"@type":"deleteContact",id:e})}async function Zt(e,t){if(e){const{id:t,accessHash:n}=e,s=await(0,p.RE)(new f.Api.photos.GetUserPhotos({userId:(0,y.yA)(t,n),limit:i.YUe,offset:0,maxId:c()("0")}));if(!s)return;return Jt(s),{photos:s.photos.filter((e=>e instanceof f.Api.Photo)).map((e=>(0,v.lq)(e))),users:s.users.map(m.PH).filter(Boolean)}}const n=await dt({chat:t,type:"profilePhoto",limit:i.YUe});if(!n)return;const{messages:s,users:a}=n;return{photos:s.map((e=>e.content.action.photo)).filter(Boolean),users:a}}function Kt(e){const{id:t,accessHash:n}=e;return(0,p.RE)(new f.Api.messages.ReportSpam({peer:(0,y.h6)(t,n)}),!0)}function Wt(e,t){return(0,p.RE)(new f.Api.account.UpdateEmojiStatus({emojiStatus:(0,y.fv)(e,t)}),!0)}function Jt(e){"chats"in e&&(0,A.eQ)(e.chats),"photos"in e&&e.photos.forEach(A.Hh),"users"in e&&(0,A.eQ)(e.users)}async function Xt({hash:e="0"}){const t=await(0,p.RE)(new f.Api.messages.GetEmojiStickers({hash:c()(e)}));if(t&&!(t instanceof f.Api.messages.AllStickersNotModified))return t.sets.forEach((e=>{(e.thumbs?.length||e.thumbDocumentId)&&(o.ZP.stickerSets[String(e.id)]=e)})),{hash:String(t.hash),sets:t.sets.map(b.jV)}}async function zt({hash:e="0"}){const t=await(0,p.RE)(new f.Api.messages.GetAllStickers({hash:c()(e)}));if(t&&!(t instanceof f.Api.messages.AllStickersNotModified))return t.sets.forEach((e=>{e.thumbs?.length&&(o.ZP.stickerSets[String(e.id)]=e)})),{hash:String(t.hash),sets:t.sets.map(b.jV)}}async function Qt({hash:e="0"}){const t=await(0,p.RE)(new f.Api.messages.GetRecentStickers({hash:c()(e)}));if(t&&!(t instanceof f.Api.messages.RecentStickersNotModified))return{hash:String(t.hash),stickers:(0,b.bV)(t.stickers.slice(0,i.tK3))}}async function $t({hash:e="0"}){const t=await(0,p.RE)(new f.Api.messages.GetFavedStickers({hash:c()(e)}));if(t&&!(t instanceof f.Api.messages.FavedStickersNotModified))return{hash:String(t.hash),stickers:(0,b.bV)(t.stickers)}}async function Yt({hash:e="0"}){const t=await(0,p.RE)(new f.Api.messages.GetFeaturedStickers({hash:c()(e)}));if(t&&!(t instanceof f.Api.messages.FeaturedStickersNotModified))return{hash:String(t.hash),isPremium:Boolean(t.premium),sets:t.sets.map(b.Qb)}}async function en(){const e=await(0,p.RE)(new f.Api.messages.GetFeaturedEmojiStickers({hash:c()(0)}));if(e&&!(e instanceof f.Api.messages.FeaturedStickersNotModified))return e.sets.forEach((({set:e})=>{e.thumbDocumentId&&(o.ZP.stickerSets[String(e.id)]=e)})),{isPremium:Boolean(e.premium),sets:e.sets.map(b.Qb)}}async function tn({sticker:e,unfave:t}){const n=new f.Api.messages.FaveSticker({id:(0,y.J4)(e),unfave:t});await(0,p.RE)(n)&&Bt({"@type":"updateFavoriteStickers"})}function nn({sticker:e}){const t=new f.Api.messages.SaveRecentSticker({id:(0,y.J4)(e),unsave:!0});return(0,p.RE)(t)}function sn(){return(0,p.RE)(new f.Api.messages.ClearRecentStickers)}async function an({stickerSetInfo:e}){if("isMissing"in e)return;const t=await(0,p.RE)(new f.Api.messages.GetStickerSet({stickerset:"id"in e?(0,y.i4)(e.id,e.accessHash):(0,y.ii)(e.shortName)}),void 0,!0);return t instanceof f.Api.messages.StickerSet?(o.ZP.stickerSets[String(t.set.id)]=t.set,{set:(0,b.jV)(t.set),stickers:(0,b.bV)(t.documents),packs:(0,b.yN)(t.packs)}):void 0}async function on({documentId:e}){if(!e.length)return;const t=await(0,p.RE)(new f.Api.messages.GetCustomEmojiDocuments({documentId:e.map((e=>c()(e)))}));return t?(0,b.bV)(t):void 0}async function rn(){const e=await(0,p.RE)(new f.Api.messages.GetStickerSet({stickerset:new f.Api.InputStickerSetAnimatedEmoji}));if(e instanceof f.Api.messages.StickerSet)return{set:(0,b.jV)(e.set),stickers:(0,b.bV)(e.documents)}}async function dn(){const e=await(0,p.RE)(new f.Api.messages.GetStickerSet({stickerset:new f.Api.InputStickerSetAnimatedEmojiAnimations}));if(e instanceof f.Api.messages.StickerSet)return{set:(0,b.jV)(e.set),stickers:(0,b.bV)(e.documents)}}async function un(){const e=await(0,p.RE)(new f.Api.messages.GetStickerSet({stickerset:new f.Api.InputStickerSetEmojiGenericAnimations}));if(e instanceof f.Api.messages.StickerSet)return{set:(0,b.jV)(e.set),stickers:(0,b.bV)(e.documents)}}async function cn(){const e=await(0,p.RE)(new f.Api.messages.GetStickerSet({stickerset:new f.Api.InputStickerSetPremiumGifts}));if(e instanceof f.Api.messages.StickerSet)return{set:(0,b.jV)(e.set),stickers:(0,b.bV)(e.documents)}}async function fn(){const e=await(0,p.RE)(new f.Api.messages.GetStickerSet({stickerset:new f.Api.InputStickerSetEmojiDefaultTopicIcons}));if(e instanceof f.Api.messages.StickerSet)return{set:(0,b.jV)(e.set),stickers:(0,b.bV)(e.documents)}}async function pn(){const e=await(0,p.RE)(new f.Api.messages.GetStickerSet({stickerset:new f.Api.InputStickerSetEmojiDefaultStatuses}));if(e instanceof f.Api.messages.StickerSet)return{set:(0,b.jV)(e.set),stickers:(0,b.bV)(e.documents)}}async function ln({query:e,hash:t="0"}){const n=await(0,p.RE)(new f.Api.messages.SearchStickerSets({q:e,hash:c()(t)}));if(n&&!(n instanceof f.Api.messages.FoundStickerSetsNotModified))return{hash:String(n.hash),sets:n.sets.map(b.Qb)}}async function hn({hash:e="0"}){const t=await(0,p.RE)(new f.Api.messages.GetSavedGifs({hash:c()(e)}));if(t&&!(t instanceof f.Api.messages.SavedGifsNotModified))return{hash:String(t.hash),gifs:In(t.gifs)}}function mn({gif:e,shouldUnsave:t}){const n=new f.Api.messages.SaveGif({id:(0,y.J4)(e),unsave:t});return(0,p.RE)(n,!0)}async function gn({stickerSetId:e,accessHash:t}){await(0,p.RE)(new f.Api.messages.InstallStickerSet({stickerset:(0,y.i4)(e,t)}))&&Bt({"@type":"updateStickerSet",id:e,stickerSet:{installedDate:Date.now()}})}async function yn({stickerSetId:e,accessHash:t}){await(0,p.RE)(new f.Api.messages.UninstallStickerSet({stickerset:(0,y.i4)(e,t)}))&&Bt({"@type":"updateStickerSet",id:e,stickerSet:{installedDate:void 0}})}async function An({query:e,offset:t="",username:n=i.mVS}){if(!_t){const e=await(0,p.RE)(new f.Api.contacts.ResolveUsername({username:n}));if(!(e&&e.users[0]instanceof f.Api.User))return;_t=new f.Api.InputUser({userId:e.peer.userId,accessHash:e.users[0].accessHash})}const s=await(0,p.RE)(new f.Api.messages.GetInlineBotResults({bot:_t,peer:new f.Api.InputPeerEmpty,query:e,offset:t}));if(!s)return;const a=s.results.map((e=>{if(e instanceof f.Api.BotInlineMediaResult)return e.document})).filter(Boolean);return{nextOffset:s.nextOffset,gifs:In(a)}}async function wn({emoji:e,hash:t="0"}){const n=await(0,p.RE)(new f.Api.messages.GetStickers({emoticon:e,hash:c()(t)}));if(n&&!(n instanceof f.Api.messages.StickersNotModified))return{stickers:(0,b.bV)(n.stickers),hash:String(n.hash)}}async function vn({language:e,fromVersion:t}){const n=await(0,p.RE)(new f.Api.messages.GetEmojiKeywordsDifference({langCode:e,fromVersion:t}));if(n)return{language:n.langCode,version:n.version,keywords:n.keywords.reduce(((e,t)=>(e[t.keyword]=t.emoticons,e)),{})}}async function bn(e="0"){const t=await(0,p.RE)(new f.Api.account.GetRecentEmojiStatuses({hash:c()(e)}));if(!t||t instanceof f.Api.account.EmojiStatusesNotModified)return;const n=t.statuses.slice(0,i.O58).map(m.wj).filter(Boolean).map((({documentId:e})=>e)),s=await on({documentId:n});return{hash:String(t.hash),emojiStatuses:s}}function In(e){return e.map((e=>{if(e instanceof f.Api.Document){const t=(0,h.gi)(e);if(t)return o.ZP.documents[String(e.id)]=e,t}})).filter(Boolean)}const Cn=new Set([i.WfZ,"USERNAME_INVALID"]);async function Sn({username:e}){try{return{result:await(0,p.RE)(new f.Api.channels.CheckUsername({channel:new f.Api.InputChannelEmpty,username:e}),void 0,!0),error:void 0}}catch(e){const t=e.message;if(Cn.has(t))return{result:!1,error:t};throw e}}async function Pn({chat:e,username:t}){const n=await(0,p.RE)(new f.Api.channels.UpdateUsername({channel:(0,y.yA)(e.id,e.accessHash),username:t})),s=e.usernames?e.usernames.map((e=>e.isEditable?{...e,username:t}:e)):[{username:t,isEditable:!0,isActive:!0}];return n&&xt({"@type":"updateChat",id:e.id,chat:{usernames:s}}),n}async function Mn({chat:e,usageLimit:t,expireDate:n}){const s=await(0,p.RE)(new f.Api.messages.ExportChatInvite({peer:(0,y.h6)(e.id,e.accessHash),usageLimit:t,expireDate:n}));if(s instanceof f.Api.ChatInviteExported)return xt({"@type":"updateChatFullInfo",id:e.id,fullInfo:{inviteLink:s.link}}),s.link}async function Rn({peer:e,admin:t,limit:n=0,isRevoked:s}){const i=await(0,p.RE)(new f.Api.messages.GetExportedChatInvites({peer:(0,y.h6)(e.id,e.accessHash),adminId:(0,y.yA)(t.id,t.accessHash),limit:n,revoked:s||void 0}));if(i)return(0,A.eQ)(i.users),{invites:i.invites.filter((e=>e instanceof f.Api.ChatInviteExported)).map(l.a0),users:i.users.map(m.PH).filter(Boolean)}}async function En({peer:e,isRevoked:t,link:n,expireDate:s,usageLimit:i,isRequestNeeded:a,title:o}){const r=await(0,p.RE)(new f.Api.messages.EditExportedChatInvite({link:n,peer:(0,y.h6)(e.id,e.accessHash),expireDate:s,usageLimit:a?void 0:i,requestNeeded:a,title:o,revoked:t||void 0}));if(r){if((0,A.eQ)(r.users),r instanceof f.Api.messages.ExportedChatInvite&&r.invite instanceof f.Api.ChatInviteExported){const e=(0,l.a0)(r.invite);return{oldInvite:e,newInvite:e,users:r.users.map(m.PH).filter(Boolean)}}if(r instanceof f.Api.messages.ExportedChatInviteReplaced&&r.invite instanceof f.Api.ChatInviteExported&&r.newInvite instanceof f.Api.ChatInviteExported)return{oldInvite:(0,l.a0)(r.invite),newInvite:(0,l.a0)(r.newInvite),users:r.users.map(m.PH).filter(Boolean)}}}async function Dn({peer:e,expireDate:t,usageLimit:n,isRequestNeeded:s,title:i}){const a=await(0,p.RE)(new f.Api.messages.ExportChatInvite({peer:(0,y.h6)(e.id,e.accessHash),expireDate:t,usageLimit:s?void 0:n,requestNeeded:s||void 0,title:i}));if(a instanceof f.Api.ChatInviteExported)return(0,l.a0)(a)}async function Un({peer:e,link:t}){return await(0,p.RE)(new f.Api.messages.DeleteExportedChatInvite({peer:(0,y.h6)(e.id,e.accessHash),link:t}))}async function kn({peer:e,admin:t}){return await(0,p.RE)(new f.Api.messages.DeleteRevokedExportedChatInvites({peer:(0,y.h6)(e.id,e.accessHash),adminId:(0,y.yA)(t.id,t.accessHash)}))}async function Tn({peer:e,link:t,offsetDate:n=0,offsetUser:s,limit:i=0,isRequested:a}){const o=await(0,p.RE)(new f.Api.messages.GetChatInviteImporters({peer:(0,y.h6)(e.id,e.accessHash),link:t,offsetDate:n,offsetUser:s?(0,y.yA)(s.id,s.accessHash):new f.Api.InputUserEmpty,limit:i,requested:a||void 0}));if(!o)return;const r=o.users.map((e=>(0,m.PH)(e))).filter(Boolean);return(0,A.eQ)(o.users),{importers:o.importers.map((e=>(0,l.Jm)(e))),users:(0,g.ee)(r,"id")}}function Bn({peer:e,user:t,isApproved:n}){return(0,p.RE)(new f.Api.messages.HideChatJoinRequest({peer:(0,y.h6)(e.id,e.accessHash),userId:(0,y.yA)(t.id,t.accessHash),approved:n||void 0}),!0)}function _n({peer:e,isApproved:t,link:n}){return(0,p.RE)(new f.Api.messages.HideAllChatJoinRequests({peer:(0,y.h6)(e.id,e.accessHash),approved:t||void 0,link:n}),!0)}function xn(e){const{id:t,accessHash:n}=e;return(0,p.RE)(new f.Api.messages.HidePeerSettingsBar({peer:(0,y.h6)(t,n)}))}const Nn={EMAIL_UNCONFIRMED:"Email unconfirmed",EMAIL_HASH_EXPIRED:"Email hash expired",NEW_SALT_INVALID:"The new salt is invalid",NEW_SETTINGS_INVALID:"The new password settings are invalid",CODE_INVALID:"Invalid Code",PASSWORD_HASH_INVALID:"Invalid Password"},Hn={};let qn;async function Gn(){const e=await(0,p.RE)(new f.Api.account.GetPassword);if(!e)return;const{hint:t,hasPassword:n}=e;return{hint:t,hasPassword:n}}function jn(e){return qn({"@type":"updateTwoFaStateWaitCode",length:e}),new Promise(((e,t)=>{Hn.resolve=e,Hn.reject=t}))}async function On(e){try{return await(0,p.IE)({isCheckPassword:!0,currentPassword:e}),!0}catch(e){return Kn(e),!1}}async function Fn(e){try{return await(0,p.IE)({currentPassword:e}),!0}catch(e){return Kn(e),!1}}async function Ln(e,t,n,s){try{return await(0,p.IE)({currentPassword:e,newPassword:t,hint:n,email:s,emailCodeCallback:jn,onEmailCodeError:Kn}),!0}catch(e){return Kn(e),!1}}async function Vn(e,t){try{return await(0,p.IE)({currentPassword:e,newPassword:e,email:t,emailCodeCallback:jn,onEmailCodeError:Kn}),!0}catch(e){return Kn(e),!1}}function Zn(e){Hn.resolve(e)}function Kn(e){let t;if(e instanceof f.errors.FloodWaitError){const n=Math.ceil(Number(e.seconds)/60/60);t="Too many attempts. Try again in "+(n>1?`${n} hours`:"an hour")}else t=Nn[e.message];t||(t="Unexpected Error",i.eMD&&console.error(e)),qn({"@type":"updateTwoFaError",message:t})}var Wn=n(6999),Jn=n(94830),Xn=n(93844);let zn;async function Qn({chatId:e,accessHash:t,messageId:n,data:s,isGame:i}){const a=await(I.Z.getCurrentAccount()?.sendPduWithCallback(new qe.NJ({chatId:e,accessHash:t,messageId:n,data:s,isGame:i}).pack()));if(a)return Xn.Z.parseMsg(a)}async function $n(){const e=await(0,p.RE)(new f.Api.contacts.GetTopPeers({botsInline:!0}));if(!(e instanceof f.Api.contacts.TopPeers))return;const t=e.users.map(m.PH).filter(Boolean);return{ids:t.map((({id:e})=>e)),users:t}}async function Yn({username:e}){const t=await(0,p.RE)(new f.Api.contacts.ResolveUsername({username:e}));if(t&&t.users[0]instanceof f.Api.User&&t.users[0].bot&&t.users[0].botInlinePlaceholder)return(0,A.aK)(t.users[0]),{user:(0,m.PH)(t.users[0]),chat:(0,l.vX)(t.users[0])}}async function es({bot:e,chat:t,query:n,offset:s=""}){const i=await(0,p.RE)(new f.Api.messages.GetInlineBotResults({bot:(0,y.h6)(e.id,e.accessHash),peer:(0,y.h6)(t.id,t.accessHash),query:n,offset:s}));var a,r,d,u;if(i)return(0,A.eQ)(i.users),{isGallery:Boolean(i.gallery),help:e.botPlaceholder,nextOffset:(d=e.usernames[0].username,u=i.nextOffset,"gif"===d&&"0"===u?"":u),switchPm:(0,Wn.Wq)(i.switchPm),users:i.users.map(m.PH).filter(Boolean),results:(a=String(i.queryId),r=i.results,r.map((e=>{return e instanceof f.Api.BotInlineMediaResult?(e.document instanceof f.Api.Document&&(t=e.document,o.ZP.documents[String(t.id)]=t),e.photo instanceof f.Api.Photo&&(n=e.photo,o.ZP.photos[String(n.id)]=n),(0,Wn.cQ)(e,a)):(e.thumb&&(s=e.thumb,o.ZP.webDocuments[s.url]=s),(0,Wn.qh)(e,a));var t,n,s}))),cacheTime:i.cacheTime}}async function ts({chat:e,replyingToTopId:t,resultId:n,queryId:s,replyingTo:i,sendAs:a,isSilent:o,scheduleDate:r}){const d=(0,y.bJ)();await(0,p.RE)(new f.Api.messages.SendInlineBotResult({clearDraft:!0,randomId:d,queryId:c()(s),peer:(0,y.h6)(e.id,e.accessHash),id:n,scheduleDate:r,...t&&{topMsgId:t},...o&&{silent:!0},...i&&{replyToMsgId:i},...a&&{sendAs:(0,y.h6)(a.id,a.accessHash)}}),!0)}async function ns({bot:e,startParam:t}){const n=(0,y.bJ)();await(0,p.RE)(new f.Api.messages.StartBot({bot:(0,y.h6)(e.id,e.accessHash),peer:(0,y.h6)(e.id,e.accessHash),randomId:n,startParam:t}),!0)}async function ss({isSilent:e,peer:t,bot:n,url:s,startParam:i,replyToMessageId:a,threadId:o,theme:r,sendAs:d,isFromBotMenu:u}){return{url:'https://webappcontent.telegram.org/cafe/?mode=menu#tgWebAppData=query_id%3DAAHFY2V2AgAAAMVjZXb0KFJb%26user%3D%257B%2522id%2522%253A6281323461%252C%2522first_name%2522%253A%2522Wai%2522%252C%2522last_name%2522%253A%2522Chat%2522%252C%2522username%2522%253A%2522wai_chat%2522%252C%2522language_code%2522%253A%2522en%2522%257D%26auth_date%3D1680293757%26hash%3D513a7167671bc1e80c1d95c168231a1a4f32511942a2bfae25c2640e1c925a7f&tgWebAppVersion=6.4&tgWebAppPlatform=webz&tgWebAppThemeParams=%7B"bg_color"%3A"%23212121"%2C"text_color"%3A"%23ffffff"%2C"hint_color"%3A"%23aaaaaa"%2C"link_color"%3A"%238774e1"%2C"button_color"%3A"%238774e1"%2C"button_text_color"%3A"%23ffffff"%2C"secondary_bg_color"%3A"%230f0f0f"%7D',queryId:"sss"}}async function is({bot:e,url:t,theme:n}){const s=await(0,p.RE)(new f.Api.messages.RequestSimpleWebView({url:t,bot:(0,y.h6)(e.id,e.accessHash),themeParams:n?(0,y.VC)(n):void 0,platform:"webz"}));return s?.url}function as({isSilent:e,peer:t,bot:n,queryId:s,replyToMessageId:i,threadId:a,sendAs:o}){return(0,p.RE)(new f.Api.messages.ProlongWebView({silent:e||void 0,peer:(0,y.h6)(t.id,t.accessHash),bot:(0,y.h6)(n.id,n.accessHash),queryId:c()(s),replyToMsgId:i,...a&&{topMsgId:a},...o&&{sendAs:(0,y.h6)(o.id,o.accessHash)}}))}async function os({bot:e,buttonText:t,data:n}){const s=(0,y.bJ)();await(0,p.RE)(new f.Api.messages.SendWebViewData({bot:(0,y.h6)(e.id,e.accessHash),buttonText:t,data:n,randomId:s}),!0)}async function rs({hash:e}){const t=await(0,p.RE)(new f.Api.messages.GetAttachMenuBots({hash:e?c()(e):void 0}));if(t instanceof f.Api.AttachMenuBots)return(0,A.eQ)(t.users),{hash:t.hash.toString(),bots:(0,g.ee)(t.bots.map(Wn.Ll),"id"),users:t.users.map(m.PH).filter(Boolean)}}async function ds({bot:e}){const t=await(0,p.RE)(new f.Api.messages.GetAttachMenuBot({bot:(0,y.h6)(e.id,e.accessHash)}));if(t instanceof f.Api.AttachMenuBotsBot)return(0,A.eQ)(t.users),{bot:(0,Wn.Ll)(t.bot),users:t.users.map(m.PH).filter(Boolean)}}function us({bot:e,isWriteAllowed:t,isEnabled:n}){return(0,p.RE)(new f.Api.messages.ToggleBotInAttachMenu({bot:(0,y.h6)(e.id,e.accessHash),writeAllowed:t||void 0,enabled:n}))}async function cs({chat:e,buttonId:t,messageId:n}){const s=await(0,p.RE)(new f.Api.messages.RequestUrlAuth({peer:(0,y.h6)(e.id,e.accessHash),buttonId:t,msgId:n}));if(!s)return;const i=(0,Jn.fi)(s);return"request"===i?.type&&zn({"@type":"updateUser",id:i.bot.id,user:i.bot}),i}async function fs({chat:e,messageId:t,buttonId:n,isWriteAllowed:s}){const i=await(0,p.RE)(new f.Api.messages.AcceptUrlAuth({peer:(0,y.h6)(e.id,e.accessHash),msgId:t,buttonId:n,writeAllowed:s||void 0}));if(!i)return;const a=(0,Jn.fi)(i);return"request"===a?.type&&zn({"@type":"updateUser",id:a.bot.id,user:a.bot}),a}async function ps({url:e}){const t=await(0,p.RE)(new f.Api.messages.RequestUrlAuth({url:e}));if(!t)return;const n=(0,Jn.fi)(t);return"request"===n?.type&&zn({"@type":"updateUser",id:n.bot.id,user:n.bot}),n}async function ls({url:e,isWriteAllowed:t}){const n=await(0,p.RE)(new f.Api.messages.AcceptUrlAuth({url:e,writeAllowed:t||void 0}));if(!n)return;const s=(0,Jn.fi)(n);return"request"===s?.type&&zn({"@type":"updateUser",id:s.bot.id,user:s.bot}),s}var hs=n(14288),ms=n(48764).Buffer;let gs;async function ys({call:e}){const t=await(0,p.RE)(new f.Api.phone.GetGroupCall({call:(0,y.xU)(e)}));if(!t)return;(0,A.eQ)(t.users),(0,A.eQ)(t.chats);const n=t.users.map(m.PH).filter(Boolean),s=t.chats.map((e=>(0,l.vX)(e))).filter(Boolean);return{groupCall:(0,hs.vp)(t.call),users:n,chats:s}}function As({call:e}){return(0,p.RE)(new f.Api.phone.DiscardGroupCall({call:(0,y.xU)(e)}),!0)}function ws({call:e,participant:t,muted:n,presentationPaused:s,videoStopped:i,videoPaused:a,volume:o,raiseHand:r}){return(0,p.RE)(new f.Api.phone.EditGroupCallParticipant({call:(0,y.xU)(e),participant:(0,y.h6)(t.id,t.accessHash),...void 0!==i&&{videoStopped:i},...void 0!==a&&{videoPaused:a},...void 0!==n&&{muted:n},...void 0!==s&&{presentationPaused:s},...void 0!==r&&{raiseHand:r},...void 0!==o&&{volume:o}}),!0)}function vs({groupCall:e,title:t}){return(0,p.RE)(new f.Api.phone.EditGroupCallTitle({title:t,call:(0,y.xU)(e)}),!0)}async function bs({call:e,canSelfUnmute:t}){const n=await(0,p.RE)(new f.Api.phone.ExportGroupCallInvite({canSelfUnmute:t||void 0,call:(0,y.xU)(e)}));if(n)return n.link}async function Is({call:e,offset:t}){const n=await(0,p.RE)(new f.Api.phone.GetGroupParticipants({call:(0,y.xU)(e),ids:[],sources:[],offset:t||"",limit:i.ASX}));if(!n)return;(0,A.eQ)(n.users),(0,A.eQ)(n.chats);const s=n.users.map(m.PH).filter(Boolean),a=n.chats.map((e=>(0,l.vX)(e))).filter(Boolean);return gs({"@type":"updateGroupCallParticipants",groupCallId:e.id,participants:n.participants.map(hs.Au),nextOffset:n.nextOffset}),{users:s,chats:a}}function Cs({call:e}){return(0,p.RE)(new f.Api.phone.LeaveGroupCall({call:(0,y.xU)(e)}),!0)}async function Ss({call:e,inviteHash:t,params:n}){const s=await(0,p.RE)(new f.Api.phone.JoinGroupCall({call:(0,y.xU)(e),joinAs:new f.Api.InputPeerSelf,muted:!0,videoStopped:!0,params:new f.Api.DataJSON({data:JSON.stringify(n)}),inviteHash:t}));if(s&&s instanceof f.Api.Updates){const e=s.updates.find((e=>e instanceof f.Api.UpdateGroupCall));if(!(e instanceof f.Api.UpdateGroupCall))return;return(0,hs.vp)(e.call)}}async function Ps({peer:e}){const t=(0,y.HD)(),n=await(0,p.RE)(new f.Api.phone.CreateGroupCall({peer:(0,y.h6)(e.id,e.accessHash),randomId:t}));if(n&&n instanceof f.Api.Updates){const e=n.updates[0];if(e instanceof f.Api.UpdateGroupCall)return(0,hs.vp)(e.call)}}function Ms({call:e,params:t}){return(0,p.RE)(new f.Api.phone.JoinGroupCallPresentation({call:(0,y.xU)(e),params:new f.Api.DataJSON({data:JSON.stringify(t)})}),!0)}function Rs({call:e,subscribed:t}){return(0,p.RE)(new f.Api.phone.ToggleGroupCallStartSubscription({call:(0,y.xU)(e),subscribed:t}),!0,void 0,void 0,void 0,!0)}function Es({call:e}){return(0,p.RE)(new f.Api.phone.LeaveGroupCallPresentation({call:(0,y.xU)(e)}),!0)}async function Ds(){const e=await(0,p.RE)(new f.Api.messages.GetDhConfig({}));if(e&&!(e instanceof f.Api.messages.DhConfigNotModified))return{g:e.g,p:Array.from(e.p),random:Array.from(e.random)}}function Us({call:e,isBusy:t}){return(0,p.RE)(new f.Api.phone.DiscardCall({peer:(0,y.AY)(e),reason:t?new f.Api.PhoneCallDiscardReasonBusy:new f.Api.PhoneCallDiscardReasonHangup}),!0)}async function ks({user:e,gAHash:t,isVideo:n}){const s=await(0,p.RE)(new f.Api.phone.RequestCall({randomId:(0,y.HD)(),userId:(0,y.h6)(e.id,e.accessHash),gAHash:ms.from(t),...n&&{video:!0},protocol:(0,hs.n$)()}));if(!s)return;const i=(0,hs.eP)(s.phoneCall);return gs({"@type":"updatePhoneCall",call:i}),(0,A.eQ)(s.users),{users:s.users.map(m.PH).filter(Boolean)}}function Ts({call:e,rating:t,comment:n}){return(0,p.RE)(new f.Api.phone.SetCallRating({rating:t,peer:(0,y.AY)(e),comment:n}),!0)}function Bs({call:e}){return(0,p.RE)(new f.Api.phone.ReceivedCall({peer:(0,y.AY)(e)}))}async function _s({call:e,gB:t}){const n=await(0,p.RE)(new f.Api.phone.AcceptCall({peer:(0,y.AY)(e),gB:ms.from(t),protocol:(0,hs.n$)()}));if(n)return e=(0,hs.eP)(n.phoneCall),gs({"@type":"updatePhoneCall",call:e}),(0,A.eQ)(n.users),{users:n.users.map(m.PH).filter(Boolean)}}async function xs({call:e,gA:t,keyFingerprint:n}){const s=await(0,p.RE)(new f.Api.phone.ConfirmCall({peer:(0,y.AY)(e),gA:ms.from(t),keyFingerprint:c()(n),protocol:(0,hs.n$)()}));if(s)return e=(0,hs.eP)(s.phoneCall),gs({"@type":"updatePhoneCall",call:e}),(0,A.eQ)(s.users),{users:s.users.map(m.PH).filter(Boolean)}}function Ns({data:e,call:t}){return(0,p.RE)(new f.Api.phone.SendSignalingData({data:ms.from(e),peer:(0,y.AY)(t)}))}var Hs=n(81900);function qs(e){if(e)return Object.values(e).map((e=>({id:e.id,title:e.title,amount:e.prices.reduce(((e,t)=>e+t.amount.toJSNumber()),0),prices:e.prices.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()})))})))}function Gs(e){const{invoice:t,info:n,shipping:s,currency:i,totalAmount:a,credentialsTitle:o,tipAmount:r}=e,{shippingAddress:d,phone:u,name:c}=n||{},{prices:f}=t,p=f.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()})));let l,h;return s&&(l=s.prices.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()}))),h=s.title),{currency:i,prices:p,info:{shippingAddress:d,phone:u,name:c},totalAmount:a.toJSNumber(),credentialsTitle:o,shippingPrices:l,shippingMethod:h,tipAmount:r?r.toJSNumber():0}}function js(e){const{formId:t,canSaveCredentials:n,passwordMissing:s,providerId:i,nativeProvider:a,nativeParams:o,savedInfo:r,invoice:d,savedCredentials:u}=e,{test:c,nameRequested:f,phoneRequested:p,emailRequested:l,shippingAddressRequested:h,flexible:m,phoneToProvider:g,emailToProvider:y,currency:A,prices:w}=d,v=w.map((({label:e,amount:t})=>({label:e,amount:t.toJSNumber()}))),{shippingAddress:b}=r||{},I=r?(0,Hs.f)(r):void 0;I&&b&&(I.shippingAddress=(0,Hs.f)(b));const C=o?JSON.parse(o.data):{};return{canSaveCredentials:n,isPasswordMissing:s,formId:String(t),providerId:String(i),nativeProvider:a,savedInfo:I,invoiceContainer:{isTest:c,isNameRequested:f,isPhoneRequested:p,isEmailRequested:l,isShippingAddressRequested:h,isFlexible:m,shouldSendPhoneToProvider:g,shouldSendEmailToProvider:y,currency:A,prices:v},nativeParams:{needCardholderName:Boolean(C?.need_cardholder_name),needCountry:Boolean(C?.need_country),needZip:Boolean(C?.need_zip),publishableKey:C?.publishable_key,publicToken:C?.public_token},...u&&{savedCredentials:(S=u,S.map((({id:e,title:t})=>({id:e,title:t}))))}};var S}function Os(e){const{invoice:t,description:n,title:s,photo:i}=e,{test:a,currency:o,prices:r,recurring:d,recurringTermsUrl:u,maxTipAmount:c,suggestedTipAmounts:f}=t,p=r.reduce(((e,t)=>e+t.amount.toJSNumber()),0);return{text:n,title:s,photo:(0,h.Bc)(i),amount:p,currency:o,isTest:a,isRecurring:d,recurringTermsUrl:u,maxTipAmount:c?.toJSNumber(),...f&&{suggestedTipAmounts:f.map((e=>e.toJSNumber()))}}}function Fs(e){const{statusText:t,statusEntities:n,videos:s,videoSections:i,periodOptions:a}=e;return{statusText:t,statusEntities:n.map(h.Pb),videoSections:i,videos:s.map(h.Qu).filter(Boolean),options:a.map(Ls)}}function Ls(e){const{current:t,canPurchaseUpgrade:n,currency:s,amount:i,botUrl:a,months:o}=e;return{isCurrent:t,canPurchaseUpgrade:n,currency:s,amount:i.toString(),botUrl:a,months:o}}let Vs;async function Zs({inputInvoice:e,requestInfo:t,shouldSave:n}){const s=await(0,p.RE)(new f.Api.payments.ValidateRequestedInfo({invoice:(0,y.Oh)(e),save:n||void 0,info:(0,y.ZV)(t)}));if(!s)return;const{id:i,shippingOptions:a}=s;return i?{id:i,shippingOptions:qs(a)}:void 0}async function Ks({inputInvoice:e,formId:t,requestedInfoId:n,shippingOptionId:s,credentials:i,savedCredentialId:a,temporaryPassword:o,tipAmount:r}){const d=o&&a?new f.Api.InputPaymentCredentialsSaved({id:a,tmpPassword:(0,A.Tf)(o)}):new f.Api.InputPaymentCredentials({save:i.save,data:new f.Api.DataJSON({data:JSON.stringify(i.data)})}),u=await(0,p.RE)(new f.Api.payments.SendPaymentForm({formId:c()(t),invoice:(0,y.Oh)(e),requestedInfoId:n,shippingOptionId:s,credentials:d,...r&&{tipAmount:c()(r)}}));if(!(u instanceof f.Api.payments.PaymentVerificationNeeded))return Boolean(u);Vs({"@type":"updatePaymentVerificationNeeded",url:u.url})}async function Ws(e){const t=await(0,p.RE)(new f.Api.payments.GetPaymentForm({invoice:(0,y.Oh)(e)}));if(t)return t.photo&&(o.ZP.webDocuments[t.photo.url]=t.photo),(0,A.eQ)(t.users),{form:js(t),invoice:Os(t),users:t.users.map(m.PH).filter(Boolean)}}async function Js(e,t){const n=await(0,p.RE)(new f.Api.payments.GetPaymentReceipt({peer:(0,y.h6)(e.id,e.accessHash),msgId:t}));if(n)return(0,A.eQ)(n.users),{receipt:Gs(n),users:n.users.map(m.PH).filter(Boolean)}}async function Xs(){const e=await(0,p.RE)(new f.Api.help.GetPremiumPromo);if(!e)return;(0,A.eQ)(e.users);const t=e.users.map(m.PH).filter(Boolean);return e.videos.forEach((e=>{e instanceof f.Api.Document&&(o.ZP.documents[e.id.toString()]=e)})),{promo:Fs(e),users:t}}async function zs(e){const t=await function(e,t){return(0,p.un)(e,void 0)}(e);if(t)return"error"in t?t:{value:(0,A.TC)(t.tmpPassword),validUntil:t.validUntil}}async function Qs({peer:e,reason:t,description:n}){return await(0,p.RE)(new f.Api.account.ReportPeer({peer:(0,y.h6)(e.id,e.accessHash),reason:(0,y.bQ)(t),message:n}))}async function $s({peer:e,photo:t,reason:n,description:s}){const i=(0,y.NA)(t);if(i)return await(0,p.RE)(new f.Api.account.ReportProfilePhoto({peer:(0,y.h6)(e.id,e.accessHash),photoId:i,reason:(0,y.bQ)(n),message:s}))}async function Ys({hash:e,areCallsEnabled:t,areSecretChatsEnabled:n}){return await(0,p.RE)(new f.Api.account.ChangeAuthorizationSettings({hash:c()(e),...void 0!==t?{callRequestsDisabled:!t}:void 0,...void 0!==n?{encryptedRequestsDisabled:!n}:void 0}))}async function ei({days:e}){return await(0,p.RE)(new f.Api.account.SetAuthorizationTTL({authorizationTtlDays:e}))}var ti=n(48764).Buffer;function ni(e){const{emojies_sounds:t}=e;return t?Object.keys(t).reduce(((e,n)=>{const s=t[n];return o.ZP.documents[s.id]=new f.Api.Document({id:c()(s.id),accessHash:c()(s.access_hash),dcId:1,mimeType:"audio/ogg",fileReference:ti.from(atob(s.file_reference_base64.replace(/-/g,"+").replace(/_/g,"/"))),size:c()(0)}),e[n]=s.id,e}),{}):{}}function si(e,t,n){return[e[`${t}_default`]||i.prK[n][0],e[`${t}_premium`]||i.prK[n][1]]}var ii=n(58569);const ai=["ar","fa","id","ko","uz","en"];async function oi({firstName:e,lastName:t,about:n}){let s=await(I.Z.getCurrentAccount()?.sendPduWithCallback(new ii.Z9({firstName:e||"",lastName:t||"",about:n||""}).pack()));if(!s)return!1;const{err:i}=ii.Ns.parseMsg(s);return i===R.wb.NO_ERROR}async function ri(e){try{return{result:await(0,p.RE)(new f.Api.account.CheckUsername({username:e}),void 0,!0),error:void 0}}catch(e){const t=e.message;if(Cn.has(t))return{result:!1,error:t};throw e}}async function di(e){const t=await(I.Z.getCurrentAccount()?.sendPduWithCallback(new ii.nv({username:e}).pack()));if(!t)return!1;const{err:n}=ii.AL.parseMsg(t);return n===R.wb.NO_ERROR}async function ui(e,t){const n=e?(0,y.NA)(e):new f.Api.InputPhotoEmpty,s=await(0,p.RE)(new f.Api.photos.UpdateProfilePhoto({id:n,...t?{fallback:!0}:void 0}));if(s)return(0,A.eQ)(s.users),s.photo instanceof f.Api.Photo?((0,A.Hh)(s.photo),{users:s.users.map(m.PH).filter(Boolean),photo:(0,v.lq)(s.photo)}):void 0}async function ci(e,t,n=!1,s=0,a){const o=await(0,He.uploadFileV1)({file:e,workers:i.eLN}),r=o.id.toString();if(I.Z.getCurrentAccount()?.getSession())return{avatarHash:r,photos:[{id:r,thumbnail:{dataUri:a,width:640,height:640},sizes:[{width:160,height:160,type:"s"},{width:320,height:320,type:"m"},{width:640,height:640,type:"x"}]}]};let d=await(I.Z.getCurrentAccount()?.sendPduWithCallback(new ii.CZ({id:o.id.toString(),is_video:n,thumbnail:a}).pack()));if(!d)return!1;const{err:u,payload:c}=ii.U$.parseMsg(d);return u==R.wb.NO_ERROR&&JSON.parse(c)}async function fi({file:e,isSuggest:t,user:n,thumbnail:s}){const i=e?await(0,He.uploadFileV1)({file:e}):void 0;if(I.Z.getCurrentAccount()?.getSession()){const e=i?.id.toString();return{users:[{...n,avatarHash:e,photos:[{id:e,thumbnail:{dataUri:s,width:640,height:640},sizes:[{width:160,height:160,type:"s"},{width:320,height:320,type:"m"},{width:640,height:640,type:"x"}]}]}]}}const a=await(0,p.RE)(new f.Api.photos.UploadContactProfilePhoto({userId:(0,y.yA)(n.id,n.accessHash),file:i,...t?{suggest:!0}:{save:!0}}));if(!a)return;(0,A.eQ)(a.users);const o=a.users.map(m.PH).filter(Boolean);return a.photo instanceof f.Api.Photo?((0,A.Hh)(a.photo),{users:o,photo:(0,v.lq)(a.photo)}):{users:o,photo:void 0}}async function pi(e){const t=e.map(y.NA).filter(Boolean),n=await(0,p.RE)(new f.Api.photos.DeletePhotos({id:t}),!0);return n&&e.forEach((e=>{delete o.ZP.photos[e.id]})),n}async function li(){const e=await(0,p.RE)(new f.Api.account.GetWallPapers({hash:c()("0")}));if(!e||e instanceof f.Api.account.WallPapersNotModified)return;const t=e.wallpapers.filter((e=>e instanceof f.Api.WallPaper&&e.document instanceof f.Api.Document&&!e.pattern&&"application/x-tgwallpattern"!==e.document.mimeType));return t.forEach((e=>{o.ZP.documents[String(e.document.id)]=e.document})),{wallpapers:t.map(Jn.Y6).filter(Boolean)}}async function hi(e){const t=await(0,p.cT)(e),n=await(0,p.RE)(new f.Api.account.UploadWallPaper({file:t,mimeType:e.type,settings:new f.Api.WallPaperSettings}));if(!(n&&n instanceof f.Api.WallPaper))return;const s=(0,Jn.Y6)(n);return s?(o.ZP.documents[String(n.document.id)]=n.document,{wallpaper:s}):void 0}async function mi(){const e=await(0,p.RE)(new f.Api.contacts.GetBlocked({limit:i.LCd}));if(e)return ji(e),{users:e.users.map(m.PH).filter(Boolean),chats:e.chats.map((e=>(0,l.vX)(e))).filter(Boolean),blockedIds:e.blocked.map((e=>(0,w.iC)(e.peerId))),totalCount:e instanceof f.Api.contacts.BlockedSlice?e.count:e.blocked.length}}function gi(e,t){return(0,p.RE)(new f.Api.contacts.Block({id:(0,y.h6)(e,t)}))}function yi(e,t){return(0,p.RE)(new f.Api.contacts.Unblock({id:(0,y.h6)(e,t)}))}async function Ai(){const e=await(0,p.RE)(new f.Api.account.GetAuthorizations);if(e)return{authorizations:(0,g.ee)(e.authorizations.map(Jn.HX),"hash"),ttlDays:e.authorizationTtlDays}}function wi(e){return(0,p.RE)(new f.Api.account.ResetAuthorization({hash:c()(e)}))}function vi(){return(0,p.RE)(new f.Api.auth.ResetAuthorizations)}async function bi(){const e=await(0,p.RE)(new f.Api.account.GetWebAuthorizations);if(e)return(0,A.eQ)(e.users),{users:e.users.map(m.PH).filter(Boolean),webAuthorizations:(0,g.ee)(e.authorizations.map(Jn.ni),"hash")}}function Ii(e){return(0,p.RE)(new f.Api.account.ResetWebAuthorization({hash:c()(e)}))}function Ci(){return(0,p.RE)(new f.Api.account.ResetWebAuthorizations)}async function Si(){const e=await(0,p.RE)(new f.Api.account.GetNotifyExceptions({compareSound:!0}),void 0,void 0,!0);if(e instanceof f.Api.Updates||e instanceof f.Api.UpdatesCombined)return ji(e),e.updates.reduce(((e,t)=>t instanceof f.Api.UpdateNotifySettings&&t.peer instanceof f.Api.NotifyPeer?(e.push((0,Jn.hc)(t.notifySettings,t.peer.peer)),e):e),[])}async function Pi(){const[e,t,n,s]=await Promise.all([(0,p.RE)(new f.Api.account.GetContactSignUpNotification),(0,p.RE)(new f.Api.account.GetNotifySettings({peer:new f.Api.InputNotifyUsers})),(0,p.RE)(new f.Api.account.GetNotifySettings({peer:new f.Api.InputNotifyChats})),(0,p.RE)(new f.Api.account.GetNotifySettings({peer:new f.Api.InputNotifyBroadcasts}))]);if(!t||!n||!s)return!1;const{silent:i,muteUntil:a,showPreviews:o}=t,{silent:r,muteUntil:d,showPreviews:u}=n,{silent:c,muteUntil:l,showPreviews:h}=s;return{hasContactJoinedNotifications:!e,hasPrivateChatsNotifications:!(i||"number"==typeof a&&(0,Ne.bp)()<a),hasPrivateChatsMessagePreview:o,hasGroupNotifications:!(r||"number"==typeof d&&(0,Ne.bp)()<d),hasGroupMessagePreview:u,hasBroadcastNotifications:!(c||"number"==typeof l&&(0,Ne.bp)()<l),hasBroadcastMessagePreview:h}}function Mi(e){return(0,p.RE)(new f.Api.account.SetContactSignUpNotification({silent:e}))}function Ri(e,{isSilent:t,shouldShowPreviews:n}){let s;s="contact"===e?new f.Api.InputNotifyUsers:"group"===e?new f.Api.InputNotifyChats:new f.Api.InputNotifyBroadcasts;const a={showPreviews:n,silent:t,muteUntil:t?i.PT8:0};return(0,p.RE)(new f.Api.account.UpdateNotifySettings({peer:s,settings:new f.Api.InputPeerNotifySettings(a)}))}async function Ei(){const e=await(0,p.RE)(new f.Api.langpack.GetLanguages({langPack:i.$OQ}));if(e)return e.map(Hs.f)}async function Di({sourceLangPacks:e,langCode:t}){const n=(await Promise.all(e.map((e=>(0,p.RE)(new f.Api.langpack.GetLangPack({langPack:e,langCode:ai.includes(t)?`${t}-raw`:t})))))).filter(Boolean).map((e=>(0,g.ee)(e.strings.map(Hs.f),"key")));if(n.length)return{langPack:Object.assign({},...n.reverse())}}async function Ui({langPack:e,langCode:t,keys:n}){const s=await(0,p.RE)(new f.Api.langpack.GetStrings({langPack:e,langCode:ai.includes(t)?`${t}-raw`:t,keys:n}));if(s)return s.map(Hs.f)}async function ki(e){const t=(0,y.fV)(e),n=await(0,p.RE)(new f.Api.account.GetPrivacy({key:t}));if(n)return ji(n),{users:n.users.map(m.PH).filter(Boolean),rules:(0,Jn.jv)(n.rules)}}function Ti(e){const t=(0,p.s3)().session.getAuthKey().getKey();return(0,p.RE)(new f.Api.account.RegisterDevice({tokenType:10,secret:t,appSandbox:!1,otherUids:[],token:e}))}function Bi(e){return(0,p.RE)(new f.Api.account.UnregisterDevice({tokenType:10,otherUids:[],token:e}))}async function _i(e,t){const n=(0,y.fV)(e),s=[];switch(t.allowedUsers&&s.push(new f.Api.InputPrivacyValueAllowUsers({users:t.allowedUsers.map((({id:e,accessHash:t})=>(0,y.yA)(e,t)))})),t.allowedChats&&s.push(new f.Api.InputPrivacyValueAllowChatParticipants({chats:t.allowedChats.map((({id:e})=>(0,y.yA)(e)))})),t.blockedUsers&&s.push(new f.Api.InputPrivacyValueDisallowUsers({users:t.blockedUsers.map((({id:e,accessHash:t})=>(0,y.yA)(e,t)))})),t.blockedChats&&s.push(new f.Api.InputPrivacyValueDisallowChatParticipants({chats:t.blockedChats.map((({id:e})=>(0,y.yA)(e)))})),t.visibility){case"everybody":s.push(new f.Api.InputPrivacyValueAllowAll);break;case"contacts":s.push(new f.Api.InputPrivacyValueAllowContacts);break;case"nonContacts":s.push(new f.Api.InputPrivacyValueDisallowContacts);break;case"nobody":s.push(new f.Api.InputPrivacyValueDisallowAll)}const i=await(0,p.RE)(new f.Api.account.SetPrivacy({key:n,rules:s}));if(i)return ji(i),{users:i.users.map(m.PH).filter(Boolean),rules:(0,Jn.jv)(i.rules)}}async function xi(e){await(0,p.RE)(new f.Api.account.UpdateStatus({offline:!e}))}async function Ni(){const e=await(0,p.RE)(new f.Api.account.GetContentSettings);if(e)return{isSensitiveEnabled:Boolean(e.sensitiveEnabled),canChangeSensitive:Boolean(e.sensitiveCanChange)}}function Hi(e){return(0,p.RE)(new f.Api.account.SetContentSettings({sensitiveEnabled:e||void 0}))}async function qi(){const e=await(0,p.RE)(new f.Api.help.GetAppConfig);if(e)return function(e){const t=(0,Jn.JA)(e);return{emojiSounds:ni(t),seenByMaxChatMembers:t.chat_read_mark_size_threshold,seenByExpiresAt:t.chat_read_mark_expire_period,autologinDomains:t.autologin_domains||[],autologinToken:t.autologin_token||"",urlAuthDomains:t.url_auth_domains||[],maxUniqueReactions:t.reactions_uniq_max,premiumBotUsername:t.premium_bot_username,premiumInvoiceSlug:t.premium_invoice_slug,premiumPromoOrder:t.premium_promo_order,isPremiumPurchaseBlocked:t.premium_purchase_blocked,defaultEmojiStatusesStickerSetId:t.default_emoji_statuses_stickerset_id,topicsPinnedLimit:t.topics_pinned_limit,maxUserReactionsDefault:t.reactions_user_max_default,maxUserReactionsPremium:t.reactions_user_max_premium,hiddenMembersMinCount:t.hidden_members_group_size_min,canDisplayAutoarchiveSetting:t.autoarchive_setting_available,limits:{uploadMaxFileparts:si(t,"upload_max_fileparts","uploadMaxFileparts"),stickersFaved:si(t,"stickers_faved_limit","stickersFaved"),savedGifs:si(t,"saved_gifs_limit","savedGifs"),dialogFiltersChats:si(t,"dialog_filters_chats_limit","dialogFiltersChats"),dialogFilters:si(t,"dialog_filters_limit","dialogFilters"),dialogFolderPinned:si(t,"dialogs_pinned_limit","dialogFolderPinned"),captionLength:si(t,"caption_length_limit","captionLength"),channels:si(t,"channels_limit","channels"),channelsPublic:si(t,"channels_public_limit","channelsPublic"),aboutLength:si(t,"about_length_limit","aboutLength")}}}(e)}async function Gi(){const e=await(0,p.RE)(new f.Api.help.GetConfig);if(e)return(0,Jn.me)(e)}function ji(e){(0,A.eQ)(e.users),(0,A.eQ)(e.chats)}async function Oi({langCode:e="en"}){const t=await(0,p.RE)(new f.Api.help.GetCountriesList({langCode:e}));if(t instanceof f.Api.help.CountriesList)return(0,Jn.OH)(t.countries)}async function Fi(){const e=await(0,p.RE)(new f.Api.account.GetGlobalPrivacySettings);if(e)return{shouldArchiveAndMuteNewNonContact:Boolean(e.archiveAndMuteNewNoncontactPeers)}}async function Li({shouldArchiveAndMuteNewNonContact:e}){const t=await(0,p.RE)(new f.Api.account.SetGlobalPrivacySettings({settings:new f.Api.GlobalPrivacySettings({archiveAndMuteNewNoncontactPeers:e})}));if(t)return{shouldArchiveAndMuteNewNonContact:Boolean(t.archiveAndMuteNewNoncontactPeers)}}function Vi({chatId:e,accessHash:t,username:n,isActive:s}){return e?(0,p.RE)(new f.Api.channels.ToggleUsername({channel:(0,y.yA)(e,t),username:n,active:s})):(0,p.RE)(new f.Api.account.ToggleUsername({username:n,active:s}))}function Zi({chatId:e,accessHash:t,usernames:n}){return e?(0,p.RE)(new f.Api.channels.ReorderUsernames({channel:(0,y.yA)(e,t),order:n})):(0,p.RE)(new f.Api.account.ReorderUsernames({order:n}))}function Ki({chat:e,emoticon:t}){return(0,p.RE)(new f.Api.messages.SetTyping({peer:(0,y.h6)(e.id,e.accessHash),action:new f.Api.SendMessageEmojiInteractionSeen({emoticon:t})}))}function Wi({chat:e,emoticon:t,messageId:n,timestamps:s}){return(0,p.RE)(new f.Api.messages.SetTyping({peer:(0,y.h6)(e.id,e.accessHash),action:new f.Api.SendMessageEmojiInteraction({emoticon:t,msgId:n,interaction:new f.Api.DataJSON({data:JSON.stringify({v:1,a:s.map((e=>({t:e,i:1})))})})})}))}async function Ji(){const e=await(0,p.RE)(new f.Api.messages.GetAvailableReactions({}));if(e&&!(e instanceof f.Api.messages.AvailableReactionsNotModified))return e.reactions.forEach((e=>{e.staticIcon instanceof f.Api.Document&&(o.ZP.documents[String(e.staticIcon.id)]=e.staticIcon),e.selectAnimation instanceof f.Api.Document&&(o.ZP.documents[String(e.selectAnimation.id)]=e.selectAnimation),e.aroundAnimation instanceof f.Api.Document&&(o.ZP.documents[String(e.aroundAnimation.id)]=e.aroundAnimation),e.centerIcon instanceof f.Api.Document&&(o.ZP.documents[String(e.centerIcon.id)]=e.centerIcon)})),e.reactions.map(h.wo)}function Xi({chat:e,messageId:t,reactions:n}){return(0,p.RE)(new f.Api.messages.SendReaction({reaction:n?.map((e=>(0,y.y7)(e))),peer:(0,y.h6)(e.id,e.accessHash),msgId:t}),!0)}function zi({ids:e,chat:t}){return(0,p.RE)(new f.Api.messages.GetMessagesReactions({id:e,peer:(0,y.h6)(t.id,t.accessHash)}),!0)}async function Qi({chat:e,messageId:t,reaction:n,offset:s}){const a=await(0,p.RE)(new f.Api.messages.GetMessageReactionsList({peer:(0,y.h6)(e.id,e.accessHash),id:t,...n&&{reaction:(0,y.y7)(n)},limit:i.Q8I,...s&&{offset:s}}));if(!a)return;(0,A.eQ)(a.users);const{nextOffset:o,reactions:r,count:d}=a;return{users:a.users.map(m.PH).filter(Boolean),nextOffset:o,reactions:r.map(h.Rj).filter(Boolean),count:d}}function $i({reaction:e}){return(0,p.RE)(new f.Api.messages.SetDefaultReaction({reaction:(0,y.y7)(e)}))}function Yi(e,t){if(e.error)return;const n=JSON.parse(e.json.data),[s,...i]=n.columns,a=n.y_scaled;return{type:t?"area":n.types.y0,zoomToken:e.zoomToken,labelFormatter:n.xTickFormatter,tooltipFormatter:n.xTooltipFormatter,labels:s.slice(1),hideCaption:!n.subchart.show,hasSecondYAxis:a,isStacked:n.stacked&&!a,isPercentage:t,datasets:i.map((e=>{const t=e[0];return{name:n.names[t],color:(s=n.colors[t],s.substring(s.indexOf("#"))),values:e.slice(1)};var s})),...ea(n.subchart.defaultZoom,s.slice(1))}}function ea(e,t){const[n,s]=e;let i=0,a=t.length-1;return t.forEach(((e,t)=>{!i&&e>=n&&(i=t),!a&&e>=s&&(a=t)})),{minimapRange:{begin:Math.max(0,i/(t.length-1)),end:Math.min(1,a/(t.length-1))},labelFromIndex:i,labelToIndex:a}}function ta({current:e,previous:t}){const n=e-t;return{current:e,change:n,...t&&{percentage:(n?Math.abs(n)/t*100:0).toFixed(2)}}}async function na({chat:e}){const t=await(0,p.RE)(new f.Api.stats.GetBroadcastStats({channel:(0,y.yA)(e.id,e.accessHash)}),void 0,void 0,void 0,e.fullInfo.statisticsDcId);var n,s;if(t)return{stats:(n=t,{growthGraph:Yi(n.growthGraph),followersGraph:Yi(n.followersGraph),muteGraph:Yi(n.muteGraph),topHoursGraph:Yi(n.topHoursGraph),languagesGraph:n.languagesGraph.token,viewsBySourceGraph:n.viewsBySourceGraph.token,newFollowersBySourceGraph:n.newFollowersBySourceGraph.token,interactionsGraph:n.interactionsGraph.token,followers:ta(n.followers),viewsPerPost:ta(n.viewsPerPost),sharesPerPost:ta(n.sharesPerPost),enabledNotifications:(s=n.enabledNotifications,{percentage:(s.part/s.total*100).toFixed(2)}),recentTopMessages:n.recentMessageInteractions}),users:[]}}async function sa({chat:e}){const t=await(0,p.RE)(new f.Api.stats.GetMegagroupStats({channel:(0,y.yA)(e.id,e.accessHash)}),void 0,void 0,void 0,e.fullInfo.statisticsDcId);var n,s;if(t)return(0,A.eQ)(t.users),{users:t.users.map(m.PH).filter(Boolean),stats:(n=t,{growthGraph:Yi(n.growthGraph),membersGraph:Yi(n.membersGraph),topHoursGraph:Yi(n.topHoursGraph),languagesGraph:n.languagesGraph.token,messagesGraph:n.messagesGraph.token,actionsGraph:n.actionsGraph.token,period:(s=n.period,{maxDate:s.maxDate,minDate:s.minDate}),members:ta(n.members),viewers:ta(n.viewers),messages:ta(n.messages),posters:ta(n.posters)})}}async function ia({chat:e,messageId:t}){const n=await(0,p.RE)(new f.Api.stats.GetMessageStats({channel:(0,y.yA)(e.id,e.accessHash),msgId:t}),void 0,void 0,void 0,e.fullInfo.statisticsDcId);if(n)return{viewsGraph:Yi(n.viewsGraph)}}async function aa({chat:e,messageId:t,dcId:n}){const s=await(0,p.RE)(new f.Api.stats.GetMessagePublicForwards({channel:(0,y.yA)(e.id,e.accessHash),msgId:t,offsetPeer:new f.Api.InputPeerEmpty}),void 0,void 0,void 0,n);if(s)return"chats"in s&&(0,A.eQ)(s.chats),function(e){if(e&&"messages"in e)return e.messages.map((t=>{const n=(0,w.Xo)(t.peerId.channelId,"channel"),s=e.chats.find((e=>(0,w.Xo)(e.id,"channel")===n));return{messageId:t.id,views:t.views,title:s.title,chat:{id:n,type:"chatTypeChannel",title:s.title,username:s.username,avatarHash:(0,l.eb)(s.photo)}}}))}(s)}async function oa({token:e,x:t,isPercentage:n,dcId:s}){const i=await(0,p.RE)(new f.Api.stats.LoadAsyncGraph({token:e,...t&&{x:c()(t)}}),void 0,void 0,void 0,s);if(i)return Yi(i,n)}var ra=n(59109),da=n.n(ra),ua=n(96748),ca=n.n(ua),fa=n(89618),pa=n.n(fa),la=n(13302),ha=n.n(la),ma=n(48764).Buffer;function ga(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}let ya,Aa;class wa{constructor(e){this.isOutgoing=e,ga(this,"state",void 0),ga(this,"seq",0),ga(this,"gA",void 0),ga(this,"gB",void 0),ga(this,"p",void 0),ga(this,"random",void 0),ga(this,"waitForState",void 0),ga(this,"resolveState",void 0),this.waitForState=new Promise((e=>{this.resolveState=e}))}async requestCall({p:e,g:t,random:n}){const s=pa().readBigIntFromBuffer(ma.from(e),!1),i=pa().readBigIntFromBuffer(ma.from(n),!1),a=pa().modExp(c()(t),i,s);this.gA=a,this.p=s,this.random=i;const o=await pa().sha256(pa().getByteArray(a));return Array.from(o)}acceptCall({p:e,g:t,random:n}){const s=pa().readBigIntFromBuffer(e,!1),i=pa().readBigIntFromBuffer(n,!1),a=pa().modExp(c()(t),i,s);return this.gB=a,this.p=s,this.random=i,Array.from(pa().getByteArray(a))}async confirmCall(e,t,n){this.isOutgoing?this.gB=pa().readBigIntFromBuffer(ma.from(e),!1):this.gA=pa().readBigIntFromBuffer(ma.from(e),!1);const s=pa().modExp(this.isOutgoing?this.gB:this.gA,this.random,this.p),i=await pa().sha1(pa().getByteArray(s)),a=pa().readBigIntFromBuffer(i.slice(-8).reverse(),!1),o=await async function(e,t,n,s){const i=await pa().sha256(ma.concat([new Uint8Array(e),new Uint8Array(t)])),a=[],o=s.length-1;for(let e=0;e!==i.byteLength;e+=8){const t=(r=i.subarray(e,e+8),c()(r[0]).and(127).shiftLeft(56).or(c()(r[1]).shiftLeft(48)).or(c()(r[2]).shiftLeft(40)).or(c()(r[3]).shiftLeft(32)).or(c()(r[4]).shiftLeft(24)).or(c()(r[5]).shiftLeft(16)).or(c()(r[6]).shiftLeft(8)).or(c()(r[7]))).modPow(1,o).toJSNumber(),d=s[t],u=s[t+1]-d;a.push(String.fromCharCode(...n.subarray(d,d+u)))}var r;return a.join("")}(pa().getByteArray(s),pa().getByteArray(this.gA),t,n),r=new(ha());return await r.setKey(pa().getByteArray(s)),this.state=new(da())(r,new(ca()),!0,this.isOutgoing),this.resolveState(),{gA:Array.from(pa().getByteArray(this.gA)),keyFingerprint:a.toString(),emojis:o}}async encode(e){if(!this.state)return;const t=new Uint32Array(1);t[0]=this.seq++;const n=await this.state.encryptMessageData(ma.concat([pa().convertToLittle(t),ma.from(e)]));return Array.from(n)}async decode(e){if(!this.state)return this.waitForState.then((()=>this.decode(e)));const t=await this.state.decryptMessageData(ma.from(e));return JSON.parse(t.toString())}}function va(e){ya=new wa(...e)}function ba(){ya=void 0}function Ia(e){return ya.encode(...e)}function Ca(e){return ya.decode(...e)}function Sa(e){return ya.confirmCall(...e)}function Pa(e){return ya.acceptCall(...e)}function Ma(e){return ya.requestCall(...e)}const Ra=(0,a.$6)((function(e){if(!Ua||e!==Da)return;const t=Ua;Ua=void 0,t.forEach(Aa)}));let Ea,Da,Ua;function ka(e){Ua?Ua.push(e):Ua=[e],Ea&&!i.bGP.has(e["@type"])||(Ea=(0,a.P2)(Ra,i.M3V,!0),Da=Math.random()),Ea(Da)}var Ta=n(60054);self.onerror=e=>{console.error(e),xa({type:"unhandledError",error:{message:e.error.message||"Uncaught exception in worker"}})},self.addEventListener("unhandledrejection",(e=>{console.error(e),xa({type:"unhandledError",error:{message:e.reason.message||"Uncaught rejection in worker"}})}));const Ba=new Map;function _a(e){xa({type:"update",update:e}),i.eMD&&"updateUserStatus"!==e["@type"]&&"updateServerTimeOffset"!==e["@type"]&&(0,A.cM)("UPDATE",e["@type"],e)}function xa(e,t){t?postMessage(e,[t]):postMessage(e)}i.eMD&&console.log(">>> FINISH LOAD WORKER"),onmessage=async e=>{const{data:t}=e;switch(t.type){case"initApi":await async function(e,t,n){Aa=e,(0,r.S)(ka),(0,d.S1)(ka),function(e){E=e}(ka),function(e){Fe=e}(ka),function(e){Tt=e}(ka),function(e){Bt=e}(ka),function(e){xt=e}(ka),function(e){qn=e}(ka),function(e){zn=e}(ka),function(e){gs=e}(ka),function(e){Vs=e}(ka),n&&(0,o.Zf)(n),await(0,p.S1)(ka,t)}(_a,t.args[0],t.args[1]);break;case"callMethod":{const{messageId:e,name:n,args:a,withCallback:o}=t;try{if(e&&o){const t=(...t)=>{const n=t[t.length-1];xa({type:"methodCallback",messageId:e,callbackArgs:t},n instanceof ArrayBuffer?n:void 0)};Ba.set(e,t),a.push(t)}if(!Ta.hV.includes(n))return void(i.eMD&&console.log(`xxx callApi('${n}'`));const t=await function(e,...t){return s[e](...t)}(n,...a);i.eMD&&"object"==typeof t&&"CONSTRUCTOR_ID"in t&&(0,A.cM)("UNEXPECTED RESPONSE",`${n}: ${t.className}`);const{arrayBuffer:r}="object"==typeof t&&"arrayBuffer"in t&&t||{};e&&xa({type:"methodResponse",messageId:e,response:t},r)}catch(t){i.eMD&&console.error(t),e&&xa({type:"methodResponse",messageId:e,error:{message:t.message}})}e&&Ba.delete(e);break}case"cancelProgress":{const e=Ba.get(t.messageId);e&&(e.isCanceled=!0);break}case"ping":xa({type:"methodResponse",messageId:t.messageId})}}},59187:(e,t,n)=>{"use strict";n.d(t,{IU:()=>o,Vv:()=>s,_f:()=>i,_Q:()=>a});let s=function(e){return e.Bold="MessageEntityBold",e.Typing="MessageEntityTyping",e.Blockquote="MessageEntityBlockquote",e.BotCommand="MessageEntityBotCommand",e.Cashtag="MessageEntityCashtag",e.Code="MessageEntityCode",e.Email="MessageEntityEmail",e.Hashtag="MessageEntityHashtag",e.Italic="MessageEntityItalic",e.MentionName="MessageEntityMentionName",e.Mention="MessageEntityMention",e.Phone="MessageEntityPhone",e.Pre="MessageEntityPre",e.Strike="MessageEntityStrike",e.TextUrl="MessageEntityTextUrl",e.Url="MessageEntityUrl",e.Underline="MessageEntityUnderline",e.Spoiler="MessageEntitySpoiler",e.CustomEmoji="MessageEntityCustomEmoji",e.Unknown="MessageEntityUnknown",e}({});const i=-1,a="MESSAGE_DELETED";let o=function(e){return e[e.BlobUrl=0]="BlobUrl",e[e.Progressive=1]="Progressive",e[e.Stream=2]="Stream",e[e.DownloadUrl=3]="DownloadUrl",e[e.Text=4]="Text",e}({})},83716:(e,t,n)=>{"use strict";let s;n.d(t,{$OQ:()=>Z,ASX:()=>b,C1M:()=>P,CJw:()=>S,CyD:()=>u,F9T:()=>c,JiC:()=>o,KzG:()=>x,LCd:()=>A,M3V:()=>D,MPN:()=>R,MW8:()=>B,NfV:()=>L,Ngd:()=>_,O58:()=>T,OxA:()=>K,PT8:()=>E,Q8I:()=>I,SGw:()=>p,WfZ:()=>j,YUe:()=>w,ZOc:()=>M,awM:()=>O,bGP:()=>U,deL:()=>V,e74:()=>G,eLN:()=>h,eMD:()=>r,eyL:()=>a,hT6:()=>m,jr7:()=>d,lWA:()=>f,mVS:()=>F,mok:()=>g,oGt:()=>H,pCG:()=>C,prK:()=>W,qHj:()=>i,s11:()=>N,tK3:()=>k,tRq:()=>v,tiD:()=>y,tuy:()=>l,wGh:()=>q});try{s=localStorage.getItem("adr"),s||(s="0")}catch(e){s="0"}const i="https://wai-worker.ptp-ai.workers.dev",a="",o="1.60.75",r=!1,d=!1,u=!1,c="wai-media",f="tt-media",p="tt-media-avatars",l="tt-global",h=16,m="undefined"!=typeof window&&window.innerHeight>=900?60:40,g=200,y=50,A=100,w=40,v=100,b=100,I=100,C=100,S=100,P=20,M=3e5,R=5e9,E=2**31-1,D=Math.round(425),U=new Set(["newMessage","newScheduledMessage","deleteMessages","deleteScheduledMessages","deleteHistory"]),k=20,T=20,B="status-default-icon",_="video/quicktime",x="video/webm",N="image/gif",H=new Set(["image/png","image/jpeg",N]),q=new Set(["video/mp4"]),G=new Set(["audio/mp3","audio/ogg","audio/wav","audio/mpeg","audio/flac","audio/aac","audio/m4a","audio/mp4","audio/x-m4a"]),j=(new Set([...H,...q]),"USERNAME_PURCHASE_AVAILABLE"),O=(new Set(["t.me","web.t.me","k.t.me","z.t.me"]),new Set(["AU","BD","CA","CO","EG","HN","IE","IN","JO","MX","MY","NI","NZ","PH","PK","SA","SV","US"]),"777000"),F="gif",L=0,V="-777",Z="android",K=1,W={uploadMaxFileparts:[4e3,8e3],stickersFaved:[5,10],savedGifs:[200,400],dialogFiltersChats:[100,200],dialogFilters:[10,20],dialogFolderPinned:[5,10],captionLength:[1024,2048],channels:[500,1e3],channelsPublic:[10,20],aboutLength:[70,140]}},78058:(e,t,n)=>{"use strict";n.d(t,{k:()=>a});var s=n(59187),i=n(94462);function a(e,t){if(e.text)return!t&&1===Object.keys(e).length&&!e.text.entities?.some((e=>e.type!==s.Vv.CustomEmoji))&&(0,i.Z)(e.text.text)||void 0}},74766:(e,t,n)=>{"use strict";n.r(t),n.d(t,{uploadFile:()=>P,uploadFileV1:()=>S});var s=n(77150),i=n.n(s),a=n(89618),o=n(48960),r=n(87873),d=n.n(r),u=n(16039),c=n(51184),f=n(83716),p=n(15023),l=n(83579),h=n(49524),m=n(2133),g=n(63024),y=n(48764).Buffer;const A=1024,w=10485760,v=1e3,b=3,I=6,C=Array(I).fill(void 0).map((()=>new u.J(10)));async function S(e){const{file:t,onProgress:n}=e,{name:s,size:r}=t;let d=(0,a.readBigIntFromBuffer)((0,a.generateRandomBytes)(8),!0,!0).toString().replace("-","").replace("n","");const u=Number(d);d=String(u),p.ZP.cache[d]=t;const v=r>w,I=(0,o.getUploadPartSize)(r)*A,S=Math.floor((r+I-1)/I),P=C.map((({activeWorkers:e})=>e));let M=P.indexOf(Math.min(...P)),R=0;n&&n(R);const E=await(0,m.z1)(t),D=new c.dZ({file:{id:d,part:0,part_total:1,buf:E,size:r,type:t.type},err:g.wb.NO_ERROR}).pack().getPbData(),U=new Blob([D]);await h.save(f.F9T,d,U);const k=[];for(let e=0;e<S;e++){const s=M%b;if(await C[s].requestWorker(),n?.isCanceled){C[s].releaseWorker();break}const i=t.slice(e*I,(e+1)*I);k.push((async(e,i)=>{for(;;){try{if(f.qHj&&l.Z.getCurrentAccount()?.getSession()){f.eMD&&console.log("uploadProfilePhoto",d,e,S);const n=await i.arrayBuffer(),s=y.from(n),a={id:d,size:r,type:t.type,part:e,part_total:S,buf:s},o=new c.US({file:a}),u=y.from(o.pack().getPbData());await fetch(`${f.qHj}/proto`,{method:"POST",body:u,headers:{Authorization:`Bearer ${l.Z.getCurrentAccount()?.getSession()}`}})}}catch(e){throw C[s].releaseWorker(),e}if(C[s].releaseWorker(),n){if(n.isCanceled)throw new Error("USER_CANCELED");R+=1/S,n(R)}break}})(e,i)),M++}return v?new(i().InputFileBig)({id:u,parts:S,name:s}):new(i().InputFile)({id:u,parts:S,name:s,md5Checksum:""})}async function P(e,t){const{file:n,onProgress:s}=t,r=Boolean(e.isPremium),{name:u,size:c}=n,f=(0,a.readBigIntFromBuffer)((0,a.generateRandomBytes)(8),!0,!0),p=c>w,l=(0,o.getUploadPartSize)(c)*A,h=Math.floor((c+l-1)/l),m=C.map((({activeWorkers:e})=>e));let g=m.indexOf(Math.min(...m)),S=0;s&&s(S);const P=[];for(let t=0;t<h;t++){const o=g%(r?I:b);if(await C[o].requestWorker(),s?.isCanceled){C[o].releaseWorker();break}const u=n.slice(t*l,(t+1)*l);P.push((async(t,n)=>{for(;;){let u;try{u=await e.getSender(e.session.dcId,o,r);const s=await n.arrayBuffer();await u.send(p?new(i().upload.SaveBigFilePart)({fileId:f,filePart:t,fileTotalParts:h,bytes:y.from(s)}):new(i().upload.SaveFilePart)({fileId:f,filePart:t,bytes:y.from(s)}))}catch(e){if(u&&!u.isConnected()){await(0,a.sleep)(v);continue}if(e instanceof d().FloodWaitError){await(0,a.sleep)(1e3*e.seconds);continue}throw C[o].releaseWorker(),e}if(C[o].releaseWorker(),s){if(s.isCanceled)throw new Error("USER_CANCELED");S+=1/h,s(S)}break}})(t,u)),g++}return await Promise.all(P),p?new(i().InputFileBig)({id:f,parts:h,name:u}):new(i().InputFile)({id:f,parts:h,name:u,md5Checksum:""})}},87873:(e,t,n)=>{const{RPCError:s}=n(86952),{rpcErrorRe:i}=n(65651),a=n(48187),o=n(86952),r=n(65651);e.exports={RPCMessageToError:function(e,t){for(const[n,s]of i){const i=e.errorMessage.match(n);if(i)return new s({request:t,capture:2===i.length?parseInt(i[1],10):void 0})}return new s(e.errorMessage,t)},...a,...o,...r}},77150:(e,t,n)=>{var s=n(48764).Buffer;function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{parseTl:a,serializeBytes:o,serializeDate:r}=n(51436),{toSignedLittleBuffer:d}=n(89618),u=n(84779),c=n(48106),f="undefined"!=typeof self&&void 0!==self.localStorage,p="GramJs:apiCache";function l(e){const t=a(e),n=[],s=[];for(const e of t)e.isFunction?s.push(e):n.push(e);return[n,s]}function h(e,t){switch(t){case"int":{const t=s.alloc(4);return t.writeInt32LE(e,0),t}case"long":return d(e,8);case"int128":return d(e,16);case"int256":return d(e,32);case"double":{const t=s.alloc(8);return t.writeDoubleLE(e,0),t}case"string":case"bytes":return o(e);case"Bool":return e?s.from("b5757299","hex"):s.from("379779bc","hex");case"true":return s.alloc(0);case"date":return r(e);default:return e.getBytes()}}function m(e,t){if(t.isVector){t.useVectorId&&e.readInt();const n=[],s=e.readInt();t.isVector=!1;for(let i=0;i<s;i++)n.push(m(e,t));return t.isVector=!0,n}if(t.flagIndicator)return e.readInt();switch(t.type){case"int":return e.readInt();case"long":return e.readLong();case"int128":return e.readLargeInt(128);case"int256":return e.readLargeInt(256);case"double":return e.readDouble();case"string":return e.tgReadString();case"Bool":return e.tgReadBool();case"true":return!0;case"bytes":return e.tgReadBytes();case"date":return e.tgReadDate();default:if(t.skipConstructorId)throw new Error(`Unknown type ${t}`);return e.tgReadObject()}}function g(e,t){const n={};for(const a of t){const{name:t,constructorId:o,subclassOfId:r,argsConfig:d,namespace:u,result:c}=a,f=[u,t].join(".").replace(/^\./,"");class p{constructor(t){i(this,"CONSTRUCTOR_ID",o),i(this,"SUBCLASS_OF_ID",r),i(this,"className",f),i(this,"classType",e),t=t||{},Object.keys(t).forEach((e=>{this[e]=t[e]}))}static fromReader(e){const t={};for(const n in d)if(d.hasOwnProperty(n)){const s=d[n];if(s.isFlag){const i=t[`flags${s.flagGroup>1?s.flagGroup:""}`]&1<<s.flagIndex;if("true"===s.type){t[n]=Boolean(i);continue}t[n]=i?m(e,s):void 0}else t[n]=m(e,s)}return new p(t)}getBytes(){const e=this.CONSTRUCTOR_ID,t=s.alloc(4);t.writeUInt32LE(e,0);const n=[t];for(const e in d)if(d.hasOwnProperty(e)){if(d[e].isFlag&&(!1===this[e]&&"true"===d[e].type||void 0===this[e]))continue;if(d[e].isVector){d[e].useVectorId&&n.push(s.from("15c4b51c","hex"));const t=s.alloc(4);t.writeInt32LE(this[e].length,0),n.push(t,s.concat(this[e].map((t=>h(t,d[e].type)))))}else if(d[e].flagIndicator)if(Object.values(d).some((e=>e.isFlag))){let e=0;for(const t in d)d[t].isFlag&&(!1===this[t]&&"true"===d[t].type||void 0===this[t]?e|=0:e|=1<<d[t].flagIndex);const t=s.alloc(4);t.writeUInt32LE(e,0),n.push(t)}else n.push(s.alloc(4));else if(n.push(h(this[e],d[e].type)),this[e]&&"function"==typeof this[e].getBytes){let t=d[e].type.charAt(d[e].type.indexOf(".")+1);t=t===t.toUpperCase(),t||n.shift()}}return s.concat(n)}readResult(t){if("request"!==e)throw new Error("`readResult()` called for non-request instance");const n=c.match(/Vector<(int|long)>/);if(n){t.readInt();const e=[],s=t.readInt();if("int"===n[1])for(let n=0;n<s;n++)e.push(t.readInt());else for(let n=0;n<s;n++)e.push(t.readLong());return e}return t.tgReadObject()}}i(p,"CONSTRUCTOR_ID",o),i(p,"SUBCLASS_OF_ID",r),i(p,"className",f),i(p,"classType",e),u?(n[u]||(n[u]={}),n[u][t]=p):n[t]=p}return n}e.exports=function(){let e;const t=f&&function(){const e=localStorage.getItem(p);return e&&JSON.parse(e)}();return t?e=t:(e=function(){const[e,t]=l(u),[n,s]=l(c);return{constructors:[].concat(e,n),requests:[].concat(t,s)}}(),f&&localStorage.setItem(p,JSON.stringify(e))),function(e,t){const n={...e};return Object.keys(t).forEach((e=>{"function"!=typeof t[e]&&n[e]?Object.assign(n[e],t[e]):n[e]=t[e]})),n}(g("constructor",e.constructors),g("request",e.requests))}()},44107:(e,t,n)=>{"use strict";n.d(t,{Qx:()=>s,ZS:()=>a});let s=function(e){return e[e.CID_AuthLoginReq=1001]="CID_AuthLoginReq",e[e.CID_AuthLoginRes=1002]="CID_AuthLoginRes",e[e.CID_AuthNativeReq=1003]="CID_AuthNativeReq",e[e.CID_AuthNativeRes=1004]="CID_AuthNativeRes",e[e.CID_AuthPreLoginReq=1005]="CID_AuthPreLoginReq",e[e.CID_AuthPreLoginRes=1006]="CID_AuthPreLoginRes",e[e.CID_AuthStep1Req=1007]="CID_AuthStep1Req",e[e.CID_AuthStep1Res=1008]="CID_AuthStep1Res",e[e.CID_AuthStep2Req=1009]="CID_AuthStep2Req",e[e.CID_AuthStep2Res=1010]="CID_AuthStep2Res",e[e.CID_UpdateProfileReq=1011]="CID_UpdateProfileReq",e[e.CID_UpdateProfileRes=1012]="CID_UpdateProfileRes",e[e.CID_UpdateUsernameReq=1013]="CID_UpdateUsernameReq",e[e.CID_UpdateUsernameRes=1014]="CID_UpdateUsernameRes",e[e.CID_UploadProfilePhotoReq=1015]="CID_UploadProfilePhotoReq",e[e.CID_UploadProfilePhotoRes=1016]="CID_UploadProfilePhotoRes",e[e.CID_LoadChatsReq=2001]="CID_LoadChatsReq",e[e.CID_LoadChatsRes=2002]="CID_LoadChatsRes",e[e.CID_DownloadReq=3001]="CID_DownloadReq",e[e.CID_DownloadRes=3002]="CID_DownloadRes",e[e.CID_UploadReq=3003]="CID_UploadReq",e[e.CID_UploadRes=3004]="CID_UploadRes",e[e.CID_AnswerCallbackButtonReq=4001]="CID_AnswerCallbackButtonReq",e[e.CID_AnswerCallbackButtonRes=4002]="CID_AnswerCallbackButtonRes",e[e.CID_DownloadMsgReq=4003]="CID_DownloadMsgReq",e[e.CID_DownloadMsgRes=4004]="CID_DownloadMsgRes",e[e.CID_GenMsgIdReq=4005]="CID_GenMsgIdReq",e[e.CID_GenMsgIdRes=4006]="CID_GenMsgIdRes",e[e.CID_MsgDeleteReq=4007]="CID_MsgDeleteReq",e[e.CID_MsgDeleteRes=4008]="CID_MsgDeleteRes",e[e.CID_MsgListReq=4009]="CID_MsgListReq",e[e.CID_MsgListRes=4010]="CID_MsgListRes",e[e.CID_MsgUpdateReq=4011]="CID_MsgUpdateReq",e[e.CID_MsgUpdateRes=4012]="CID_MsgUpdateRes",e[e.CID_RemoveMessagesReq=4013]="CID_RemoveMessagesReq",e[e.CID_RemoveMessagesRes=4014]="CID_RemoveMessagesRes",e[e.CID_SendReq=4015]="CID_SendReq",e[e.CID_SendRes=4016]="CID_SendRes",e[e.CID_UploadMsgReq=4017]="CID_UploadMsgReq",e[e.CID_UploadMsgRes=4018]="CID_UploadMsgRes",e[e.CID_OtherNotify=5001]="CID_OtherNotify",e[e.CID_StopChatStreamReq=5002]="CID_StopChatStreamReq",e[e.CID_SyncReq=6001]="CID_SyncReq",e[e.CID_SyncRes=6002]="CID_SyncRes",e[e.CID_DownloadUserReq=7001]="CID_DownloadUserReq",e[e.CID_DownloadUserRes=7002]="CID_DownloadUserRes",e[e.CID_GenUserIdReq=7003]="CID_GenUserIdReq",e[e.CID_GenUserIdRes=7004]="CID_GenUserIdRes",e[e.CID_UploadUserReq=7005]="CID_UploadUserReq",e[e.CID_UploadUserRes=7006]="CID_UploadUserRes",e}({});const i={1001:"CID_AuthLoginReq",1002:"CID_AuthLoginRes",1003:"CID_AuthNativeReq",1004:"CID_AuthNativeRes",1005:"CID_AuthPreLoginReq",1006:"CID_AuthPreLoginRes",1007:"CID_AuthStep1Req",1008:"CID_AuthStep1Res",1009:"CID_AuthStep2Req",1010:"CID_AuthStep2Res",1011:"CID_UpdateProfileReq",1012:"CID_UpdateProfileRes",1013:"CID_UpdateUsernameReq",1014:"CID_UpdateUsernameRes",1015:"CID_UploadProfilePhotoReq",1016:"CID_UploadProfilePhotoRes",2001:"CID_LoadChatsReq",2002:"CID_LoadChatsRes",3001:"CID_DownloadReq",3002:"CID_DownloadRes",3003:"CID_UploadReq",3004:"CID_UploadRes",4001:"CID_AnswerCallbackButtonReq",4002:"CID_AnswerCallbackButtonRes",4003:"CID_DownloadMsgReq",4004:"CID_DownloadMsgRes",4005:"CID_GenMsgIdReq",4006:"CID_GenMsgIdRes",4007:"CID_MsgDeleteReq",4008:"CID_MsgDeleteRes",4009:"CID_MsgListReq",4010:"CID_MsgListRes",4011:"CID_MsgUpdateReq",4012:"CID_MsgUpdateRes",4013:"CID_RemoveMessagesReq",4014:"CID_RemoveMessagesRes",4015:"CID_SendReq",4016:"CID_SendRes",4017:"CID_UploadMsgReq",4018:"CID_UploadMsgRes",5001:"CID_OtherNotify",5002:"CID_StopChatStreamReq",6001:"CID_SyncReq",6002:"CID_SyncRes",7001:"CID_DownloadUserReq",7002:"CID_DownloadUserRes",7003:"CID_GenUserIdReq",7004:"CID_GenUserIdRes",7005:"CID_UploadUserReq",7006:"CID_UploadUserRes"},a=e=>i[e]||e.toString()},58569:(e,t,n)=>{"use strict";n.d(t,{Yw:()=>a,Z9:()=>o,Ns:()=>r,nv:()=>d,AL:()=>u,CZ:()=>c,U$:()=>f}),n(77729),n(50043);var s=n(82752),i=n(44107);class a extends s.ZP{constructor(e){var t,n,s;super("PTP.Auth.AuthNativeReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_AuthNativeReq),this.msg=e}static parseMsg(e){return(new a).decode(e.body())}}n(73805),n(90845),n(62333),n(76598),n(69910),n(84917),n(1249);class o extends s.ZP{constructor(e){var t,n,s;super("PTP.Auth.UpdateProfileReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_UpdateProfileReq),this.msg=e}static parseMsg(e){return(new o).decode(e.body())}}class r extends s.ZP{constructor(e){var t,n,s;super("PTP.Auth.UpdateProfileRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_UpdateProfileRes),this.msg=e}static parseMsg(e){return(new r).decode(e.body())}}class d extends s.ZP{constructor(e){var t,n,s;super("PTP.Auth.UpdateUsernameReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_UpdateUsernameReq),this.msg=e}static parseMsg(e){return(new d).decode(e.body())}}class u extends s.ZP{constructor(e){var t,n,s;super("PTP.Auth.UpdateUsernameRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_UpdateUsernameRes),this.msg=e}static parseMsg(e){return(new u).decode(e.body())}}class c extends s.ZP{constructor(e){var t,n,s;super("PTP.Auth.UploadProfilePhotoReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_UploadProfilePhotoReq),this.msg=e}static parseMsg(e){return(new c).decode(e.body())}}class f extends s.ZP{constructor(e){var t,n,s;super("PTP.Auth.UploadProfilePhotoRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_UploadProfilePhotoRes),this.msg=e}static parseMsg(e){return(new f).decode(e.body())}}},37753:(e,t,n)=>{"use strict";n.d(t,{ql:()=>i,UV:()=>a}),n(975),n(79441),n(37729),n(56106),n(83551),n(35585),n(46008),n(68991),n(60014),n(82621),n(54373),n(88605),n(37717),n(9541);var s=n(82752);class i extends s.ZP{constructor(e){var t,n,s;super("PTP.Common.PbMsg",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.msg=e}static parseMsg(e){return(new i).decode(e.body())}}n(12901),n(99061),n(30888),n(4199),n(84212);class a extends s.ZP{constructor(e){var t,n,s;super("PTP.Common.PbUser",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.msg=e}static parseMsg(e){return(new a).decode(e.body())}}n(83630),n(91965),n(42183),n(94595),n(5328),n(97631)},63024:(e,t,n)=>{"use strict";n.d(t,{PS:()=>s,wb:()=>i});let s=function(e){return e[e.EncryptType_Wallet=0]="EncryptType_Wallet",e[e.EncryptType_Group=1]="EncryptType_Group",e[e.EncryptType_Message=2]="EncryptType_Message",e[e.EncryptType_Media=3]="EncryptType_Media",e}({}),i=function(e){return e[e.NO_ERROR=0]="NO_ERROR",e[e.ERR_SYSTEM=1]="ERR_SYSTEM",e[e.ERR_AUTH_LOGIN=2]="ERR_AUTH_LOGIN",e[e.ERR_AUTH_NEED=3]="ERR_AUTH_NEED",e}({})},51184:(e,t,n)=>{"use strict";n.d(t,{ju:()=>a,dZ:()=>o.Z,US:()=>r.Z});var s=n(82752),i=n(44107);class a extends s.ZP{constructor(e){var t,n,s;super("PTP.File.DownloadReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_DownloadReq),this.msg=e}static parseMsg(e){return(new a).decode(e.body())}}var o=n(86038),r=n(14229);n(45340)},93844:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(82752),i=n(44107);class a extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.AnswerCallbackButtonRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_AnswerCallbackButtonRes),this.msg=e}static parseMsg(e){return(new a).decode(e.body())}}},50488:(e,t,n)=>{"use strict";n.d(t,{NJ:()=>a,cw:()=>o,Bw:()=>r,qK:()=>d,DJ:()=>u,Pt:()=>c,P5:()=>f});var s=n(82752),i=n(44107);class a extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.AnswerCallbackButtonReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_AnswerCallbackButtonReq),this.msg=e}static parseMsg(e){return(new a).decode(e.body())}}n(93844);class o extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.DownloadMsgRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_DownloadMsgRes),this.msg=e}static parseMsg(e){return(new o).decode(e.body())}}class r extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.GenMsgIdReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_GenMsgIdReq),this.msg=e}static parseMsg(e){return(new r).decode(e.body())}}class d extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.GenMsgIdRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_GenMsgIdRes),this.msg=e}static parseMsg(e){return(new d).decode(e.body())}}n(48011),n(42407);class u extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.MsgListReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_MsgListReq),this.msg=e}static parseMsg(e){return(new u).decode(e.body())}}class c extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.MsgListRes",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_MsgListRes),this.msg=e}static parseMsg(e){return(new c).decode(e.body())}}n(2214),n(58529),n(15230),n(85374),n(50823),n(16178);class f extends s.ZP{constructor(e){var t,n,s;super("PTP.Msg.UploadMsgReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_UploadMsgReq),this.msg=e}static parseMsg(e){return(new f).decode(e.body())}}n(60219)},97376:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(82752),i=n(44107);class a extends s.ZP{constructor(e){var t,n,s;super("PTP.Other.StopChatStreamReq",e),t=this,s=void 0,(n=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(n="msg"))in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.setCommandId(i.Qx.CID_StopChatStreamReq),this.msg=e}static parseMsg(e){return(new a).decode(e.body())}}},79153:(e,t,n)=>{"use strict";n.d(t,{Sl:()=>s.Z,U0:()=>i.Z}),n(82752),n(44107);var s=n(63360),i=(n(14879),n(3552),n(80086));n(88320)},93968:(e,t,n)=>{"use strict";n.d(t,{Z:()=>a});var s=n(2153);function i(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class a{constructor(e,t){i(this,"lang",void 0),i(this,"words",void 0),t||(t="english"),Object.defineProperty(this,"lang",{value:t,writable:!1}),(0,s.XE)(this.lang),e||(e=(0,s.OF)()),Object.defineProperty(this,"words",{value:e,writable:!1})}getLang(){return this.lang}getWords(){return this.words}checkMnemonic(){return(0,s._I)(this.words)}toSeedBuffer(e){return e||(e=""),(0,s.Z1)(this.getWords(),e)}toSeedHex(e){return this.toSeedBuffer(e).toString("hex")}toEntropy(){return(0,s.oy)(this.getWords())}static fromEntropy(e,t){const n=(0,s.JJ)(e);return new a(n,t)}}},33681:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s}),String.fromCharCode(8205);const s=/(?:\ud83c[\udd70\udd71\udd7e\udd7f]\ufe0f)|(?:\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83d\udc68\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc68\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc68\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc68\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffc-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffd-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb\udffc\udffe\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffd\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc68\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83d\udc69\ud83c[\udffb-\udfff]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc68\ud83c[\udffb-\udffe]|\ud83d\udc69\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83d\udc69\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udffb\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffc-\udfff]|\ud83e\uddd1\ud83c\udffb\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffd-\udfff]|\ud83e\uddd1\ud83c\udffc\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\uddd1\ud83c\udffd\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffd\udfff]|\ud83e\uddd1\ud83c\udffe\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83e\uddd1\ud83c\udfff\u200d\u2764\ufe0f\u200d\ud83e\uddd1\ud83c[\udffb-\udffe]|\ud83e\uddd1\ud83c\udfff\u200d\ud83e\udd1d\u200d\ud83e\uddd1\ud83c[\udffb-\udfff]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d\udc8b\u200d\ud83d[\udc68\udc69]|\ud83e\udef1\ud83c\udffb\u200d\ud83e\udef2\ud83c[\udffc-\udfff]|\ud83e\udef1\ud83c\udffc\u200d\ud83e\udef2\ud83c[\udffb\udffd-\udfff]|\ud83e\udef1\ud83c\udffd\u200d\ud83e\udef2\ud83c[\udffb\udffc\udffe\udfff]|\ud83e\udef1\ud83c\udffe\u200d\ud83e\udef2\ud83c[\udffb-\udffd\udfff]|\ud83e\udef1\ud83c\udfff\u200d\ud83e\udef2\ud83c[\udffb-\udffe]|\ud83d\udc68\u200d\u2764\ufe0f\u200d\ud83d\udc68|\ud83d\udc69\u200d\u2764\ufe0f\u200d\ud83d[\udc68\udc69]|\ud83e\uddd1\u200d\ud83e\udd1d\u200d\ud83e\uddd1|\ud83d\udc6b\ud83c[\udffb-\udfff]|\ud83d\udc6c\ud83c[\udffb-\udfff]|\ud83d\udc6d\ud83c[\udffb-\udfff]|\ud83d\udc8f\ud83c[\udffb-\udfff]|\ud83d\udc91\ud83c[\udffb-\udfff]|\ud83e\udd1d\ud83c[\udffb-\udfff]|\ud83d[\udc6b-\udc6d\udc8f\udc91]|\ud83e\udd1d)|(?:\ud83d[\udc68\udc69]|\ud83e\uddd1)(?:\ud83c[\udffb-\udfff])?\u200d(?:\u2695\ufe0f|\u2696\ufe0f|\u2708\ufe0f|\ud83c[\udf3e\udf73\udf7c\udf84\udf93\udfa4\udfa8\udfeb\udfed]|\ud83d[\udcbb\udcbc\udd27\udd2c\ude80\ude92]|\ud83e[\uddaf-\uddb3\uddbc\uddbd])|(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75]|\u26f9)((?:\ud83c[\udffb-\udfff]|\ufe0f)\u200d[\u2640\u2642]\ufe0f)|(?:\ud83c[\udfc3\udfc4\udfca]|\ud83d[\udc6e\udc70\udc71\udc73\udc77\udc81\udc82\udc86\udc87\ude45-\ude47\ude4b\ude4d\ude4e\udea3\udeb4-\udeb6]|\ud83e[\udd26\udd35\udd37-\udd39\udd3d\udd3e\uddb8\uddb9\uddcd-\uddcf\uddd4\uddd6-\udddd])(?:\ud83c[\udffb-\udfff])?\u200d[\u2640\u2642]\ufe0f|(?:\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc68\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc68\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc66\u200d\ud83d\udc66|\ud83d\udc69\u200d\ud83d\udc67\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83c\udff3\ufe0f\u200d\u26a7\ufe0f|\ud83c\udff3\ufe0f\u200d\ud83c\udf08|\ud83d\ude36\u200d\ud83c\udf2b\ufe0f|\u2764\ufe0f\u200d\ud83d\udd25|\u2764\ufe0f\u200d\ud83e\ude79|\ud83c\udff4\u200d\u2620\ufe0f|\ud83d\udc15\u200d\ud83e\uddba|\ud83d\udc3b\u200d\u2744\ufe0f|\ud83d\udc41\u200d\ud83d\udde8|\ud83d\udc68\u200d\ud83d[\udc66\udc67]|\ud83d\udc69\u200d\ud83d[\udc66\udc67]|\ud83d\udc6f\u200d\u2640\ufe0f|\ud83d\udc6f\u200d\u2642\ufe0f|\ud83d\ude2e\u200d\ud83d\udca8|\ud83d\ude35\u200d\ud83d\udcab|\ud83e\udd3c\u200d\u2640\ufe0f|\ud83e\udd3c\u200d\u2642\ufe0f|\ud83e\uddde\u200d\u2640\ufe0f|\ud83e\uddde\u200d\u2642\ufe0f|\ud83e\udddf\u200d\u2640\ufe0f|\ud83e\udddf\u200d\u2642\ufe0f|\ud83d\udc08\u200d\u2b1b)|[#*0-9]\ufe0f?\u20e3|(?:[\u2122\u265f]\ufe0f)|(?:\ud83c[\udc04\ude02\ude1a\ude2f\ude37\udf21\udf24-\udf2c\udf36\udf7d\udf96\udf97\udf99-\udf9b\udf9e\udf9f\udfcd\udfce\udfd4-\udfdf\udff3\udff5\udff7]|\ud83d[\udc3f\udc41\udcfd\udd49\udd4a\udd6f\udd70\udd73\udd76-\udd79\udd87\udd8a-\udd8d\udda5\udda8\uddb1\uddb2\uddbc\uddc2-\uddc4\uddd1-\uddd3\udddc-\uddde\udde1\udde3\udde8\uddef\uddf3\uddfa\udecb\udecd-\udecf\udee0-\udee5\udee9\udef0\udef3]|[\u203c\u2049\u2139\u2194-\u2199\u21a9\u21aa\u231a\u231b\u2328\u23cf\u23ed-\u23ef\u23f1\u23f2\u23f8-\u23fa\u24c2\u25aa\u25ab\u25b6\u25c0\u25fb-\u25fe\u2600-\u2604\u260e\u2611\u2614\u2615\u2618\u2620\u2622\u2623\u2626\u262a\u262e\u262f\u2638-\u263a\u2640\u2642\u2648-\u2653\u2660\u2663\u2665\u2666\u2668\u267b\u267f\u2692-\u2697\u2699\u269b\u269c\u26a0\u26a1\u26a7\u26aa\u26ab\u26b0\u26b1\u26bd\u26be\u26c4\u26c5\u26c8\u26cf\u26d1\u26d3\u26d4\u26e9\u26ea\u26f0-\u26f5\u26f8\u26fa\u26fd\u2702\u2708\u2709\u270f\u2712\u2714\u2716\u271d\u2721\u2733\u2734\u2744\u2747\u2757\u2763\u2764\u27a1\u2934\u2935\u2b05-\u2b07\u2b1b\u2b1c\u2b50\u2b55\u3030\u303d\u3297\u3299])(?:\ufe0f|(?!\ufe0e))|(?:(?:\ud83c[\udfcb\udfcc]|\ud83d[\udd74\udd75\udd90]|[\u261d\u26f7\u26f9\u270c\u270d])(?:\ufe0f|(?!\ufe0e))|(?:\ud83c[\udf85\udfc2-\udfc4\udfc7\udfca]|\ud83d[\udc42\udc43\udc46-\udc50\udc66-\udc69\udc6e\udc70-\udc78\udc7c\udc81-\udc83\udc85-\udc87\udcaa\udd7a\udd95\udd96\ude45-\ude47\ude4b-\ude4f\udea3\udeb4-\udeb6\udec0\udecc]|\ud83e[\udd0c\udd0f\udd18-\udd1c\udd1e\udd1f\udd26\udd30-\udd39\udd3d\udd3e\udd77\uddb5\uddb6\uddb8\uddb9\uddbb\uddcd-\uddcf\uddd1-\udddd\udec3-\udec5\udef0-\udef6]|[\u270a\u270b]))(?:\ud83c[\udffb-\udfff])?|(?:\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc65\udb40\udc6e\udb40\udc67\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc73\udb40\udc63\udb40\udc74\udb40\udc7f|\ud83c\udff4\udb40\udc67\udb40\udc62\udb40\udc77\udb40\udc6c\udb40\udc73\udb40\udc7f|\ud83c\udde6\ud83c[\udde8-\uddec\uddee\uddf1\uddf2\uddf4\uddf6-\uddfa\uddfc\uddfd\uddff]|\ud83c\udde7\ud83c[\udde6\udde7\udde9-\uddef\uddf1-\uddf4\uddf6-\uddf9\uddfb\uddfc\uddfe\uddff]|\ud83c\udde8\ud83c[\udde6\udde8\udde9\uddeb-\uddee\uddf0-\uddf5\uddf7\uddfa-\uddff]|\ud83c\udde9\ud83c[\uddea\uddec\uddef\uddf0\uddf2\uddf4\uddff]|\ud83c\uddea\ud83c[\udde6\udde8\uddea\uddec\udded\uddf7-\uddfa]|\ud83c\uddeb\ud83c[\uddee-\uddf0\uddf2\uddf4\uddf7]|\ud83c\uddec\ud83c[\udde6\udde7\udde9-\uddee\uddf1-\uddf3\uddf5-\uddfa\uddfc\uddfe]|\ud83c\udded\ud83c[\uddf0\uddf2\uddf3\uddf7\uddf9\uddfa]|\ud83c\uddee\ud83c[\udde8-\uddea\uddf1-\uddf4\uddf6-\uddf9]|\ud83c\uddef\ud83c[\uddea\uddf2\uddf4\uddf5]|\ud83c\uddf0\ud83c[\uddea\uddec-\uddee\uddf2\uddf3\uddf5\uddf7\uddfc\uddfe\uddff]|\ud83c\uddf1\ud83c[\udde6-\udde8\uddee\uddf0\uddf7-\uddfb\uddfe]|\ud83c\uddf2\ud83c[\udde6\udde8-\udded\uddf0-\uddff]|\ud83c\uddf3\ud83c[\udde6\udde8\uddea-\uddec\uddee\uddf1\uddf4\uddf5\uddf7\uddfa\uddff]|\ud83c\uddf4\ud83c\uddf2|\ud83c\uddf5\ud83c[\udde6\uddea-\udded\uddf0-\uddf3\uddf7-\uddf9\uddfc\uddfe]|\ud83c\uddf6\ud83c\udde6|\ud83c\uddf7\ud83c[\uddea\uddf4\uddf8\uddfa\uddfc]|\ud83c\uddf8\ud83c[\udde6-\uddea\uddec-\uddf4\uddf7-\uddf9\uddfb\uddfd-\uddff]|\ud83c\uddf9\ud83c[\udde6\udde8\udde9\uddeb-\udded\uddef-\uddf4\uddf7\uddf9\uddfb\uddfc\uddff]|\ud83c\uddfa\ud83c[\udde6\uddec\uddf2\uddf3\uddf8\uddfe\uddff]|\ud83c\uddfb\ud83c[\udde6\udde8\uddea\uddec\uddee\uddf3\uddfa]|\ud83c\uddfc\ud83c[\uddeb\uddf8]|\ud83c\uddfd\ud83c\uddf0|\ud83c\uddfe\ud83c[\uddea\uddf9]|\ud83c\uddff\ud83c[\udde6\uddf2\uddfc]|\ud83c[\udccf\udd8e\udd91-\udd9a\udde6-\uddff\ude01\ude32-\ude36\ude38-\ude3a\ude50\ude51\udf00-\udf20\udf2d-\udf35\udf37-\udf7c\udf7e-\udf84\udf86-\udf93\udfa0-\udfc1\udfc5\udfc6\udfc8\udfc9\udfcf-\udfd3\udfe0-\udff0\udff4\udff8-\udfff]|\ud83d[\udc00-\udc3e\udc40\udc44\udc45\udc51-\udc65\udc6a\udc6f\udc79-\udc7b\udc7d-\udc80\udc84\udc88-\udc8e\udc90\udc92-\udca9\udcab-\udcfc\udcff-\udd3d\udd4b-\udd4e\udd50-\udd67\udda4\uddfb-\ude44\ude48-\ude4a\ude80-\udea2\udea4-\udeb3\udeb7-\udebf\udec1-\udec5\uded0-\uded2\uded5-\uded7\udedd-\udedf\udeeb\udeec\udef4-\udefc\udfe0-\udfeb\udff0]|\ud83e[\udd0d\udd0e\udd10-\udd17\udd20-\udd25\udd27-\udd2f\udd3a\udd3c\udd3f-\udd45\udd47-\udd76\udd78-\uddb4\uddb7\uddba\uddbc-\uddcc\uddd0\uddde-\uddff\ude70-\ude74\ude78-\ude7c\ude80-\ude86\ude90-\udeac\udeb0-\udeba\udec0-\udec2\uded0-\uded9\udee0-\udee7]|[\u23e9-\u23ec\u23f0\u23f3\u267e\u26ce\u2705\u2728\u274c\u274e\u2753-\u2755\u2795-\u2797\u27b0\u27bf\ue50a])|\ufe0f/g},49524:(e,t,n)=>{"use strict";n.r(t),n.d(t,{Type:()=>i,clear:()=>d,fetch:()=>a,remove:()=>r,save:()=>o});const s=self.caches;let i=function(e){return e[e.Text=0]="Text",e[e.Blob=1]="Blob",e[e.Json=2]="Json",e[e.ArrayBuffer=3]="ArrayBuffer",e}({});async function a(e,t,n,a=!1){if(s)try{const o=new Request(t.replace(/:/g,"_")),r=await s.open(e),d=await r.match(o);if(!d)return;const u=d.headers.get("Content-Type");switch(n){case i.Text:return await d.text();case i.Blob:{if(t.startsWith("avatar")&&u&&u.startsWith("text"))return;const e=await d.blob(),n=!e.type||!a&&e.type.includes("html");let s=e.type||u;return n&&s?(a||(s=s.replace(/html/gi,"")),new Blob([e],{type:s})):e}case i.Json:return await d.json();case i.ArrayBuffer:return await d.arrayBuffer();default:return}}catch(e){return void console.warn(e)}}async function o(e,t,n){if(s)try{const i="string"==typeof n||n instanceof Blob||n instanceof ArrayBuffer?n:JSON.stringify(n),a=new Request(t.replace(/:/g,"_")),o=new Response(i),r=await s.open(e);return await r.put(a,o)}catch(e){return void console.warn(e)}}async function r(e,t){try{if(!s)return;const n=await s.open(e);return await n.delete(t)}catch(e){return void console.warn(e)}}async function d(e){try{if(!s)return;return await s.delete(e)}catch(e){return void console.warn(e)}}},71394:(e,t,n)=>{"use strict";function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e){return new Promise(((t,n)=>{const s=new FileReader;s.onload=e=>{const{result:s}=e.target||{};"string"==typeof s&&t(s),n(new Error("Failed to read blob"))},s.onerror=n,s.readAsDataURL(e)}))}async function a(e){return(await fetch(e)).blob()}async function o(e,t){return function(e,t){return new File([e],t,{lastModified:Date.now(),type:e.type})}(await a(e),t)}n.d(t,{YJ:()=>i,dc:()=>o,gm:()=>a}),n(83716),n(48764).Buffer,"undefined"==typeof File&&(self.File=class extends Blob{constructor(e,t,n){if(n){const{type:t,...i}=n;super(e,{type:t}),s(this,"name",void 0),Object.assign(this,i)}else super(e),s(this,"name",void 0);this.name=t}})},60782:(e,t,n)=>{"use strict";function s(e,t){return e.reduce(((e,n)=>(e[n[t]]=n,e)),{})}function i(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function a(e,t){return t.reduce(((t,n)=>(e[n]&&(t[n]=e[n]),t)),{})}function o(e,t){const n=new Set(t.map(String));return i(e,Object.keys(e).filter((e=>!n.has(e))))}function r(e){return e.filter(Boolean)}n.d(t,{CE:()=>o,ee:()=>s,ei:()=>i,oA:()=>r,q0:()=>a})},69118:(e,t,n)=>{"use strict";function s(e,t,n=!0){let s,i,a;return(...o)=>{i=!0,a=o,s||(n&&(i=!1,e(...a)),s=self.setInterval((()=>{if(!i)return self.clearInterval(s),void(s=void 0);i=!1,e(...a)}),t))}}function i(e){return function(e,t){let n,s=!1;return(...i)=>{n=i,s||(s=!0,e((()=>{s=!1,t(...n)})))}}(r,e)}let a,o;function r(e,t=!1){a?t?o.push(e):a.push(e):(a=t?[]:[e],o=t?[e]:[],Promise.resolve().then((()=>{const e=a,t=o;a=void 0,o=void 0,t.forEach((e=>e())),e.forEach((e=>e()))})))}n.d(t,{$6:()=>i,P2:()=>s})},82267:(e,t,n)=>{"use strict";n.d(t,{Qj:()=>a,Y$:()=>i,bp:()=>o});let s=0;function i(e){s=e}function a(){return s}function o(){return Math.floor(Date.now()/1e3)+s}},1735:(e,t,n)=>{"use strict";function s(e,t){let n=0;const s=new Array(t),i=e.length/t,a=e[0],o=e[e.length-1];for(let c=0;c<t;c++){var r,d,u;const t=Math.floor(c*i),f=((null!==(r=e[t-1])&&void 0!==r?r:a)+(null!==(d=e[t])&&void 0!==d?d:a)+(null!==(u=e[t+1])&&void 0!==u?u:o))/3;s[c]=f,n<f&&(n=f)}return{data:s,peak:n}}n.d(t,{C:()=>s})},60054:(e,t,n)=>{"use strict";n.d(t,{UI:()=>a,ep:()=>i,hV:()=>o,iu:()=>s});const s="",i={model:"gpt-3.5-turbo",temperature:1,max_tokens:2e3,presence_penalty:0},a={id:"1",accessHash:"",firstName:"",lastName:"",canBeInvitedToGroup:!1,hasVideoAvatar:!1,isMin:!1,isPremium:!1,noStatus:!0,fullInfo:{isBlocked:!1,noVoiceMessages:!1,bio:""},usernames:[{username:"my-self",isActive:!0,isEditable:!0}],type:"userTypeBot",phoneNumber:"",avatarHash:"",isSelf:!0},o=["editChatFolder","sortChatFolders","deleteChatFolder","requestWebView","uploadContactProfilePhoto","sendMessage","editMessage","deleteMessages","downloadMedia","destroy","fetchMessages","answerCallbackButton","uploadProfilePhoto","fetchChats","sendWithCallback","msgClientLogin","updateProfile","updateUsername"]},83579:(e,t,n)=>{"use strict";n.d(t,{Z:()=>de});var s=n(74237),i=n(86266);const a=n(55835),{Buffer:o}=n(48764),r=new i.ec("secp256k1");var d=n(95053),u=n(93968),c=n(1372),f=n(63024);const p="m/44'/60'/1'";class l{constructor(e,t){var n,s,i;n=this,i=void 0,(s=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(s="__masterKey"))in n?Object.defineProperty(n,s,{value:i,enumerable:!0,configurable:!0,writable:!0}):n[s]=i;const a=e.toSeedBuffer(t);this.__masterKey=c.hdkey.fromMasterSeed(a),Object.defineProperty(this,"__masterKey",{value:c.hdkey.fromMasterSeed(a),writable:!1})}getMashKey(){return this.__masterKey}static fromEntropy(e,t,n){const s=u.Z.fromEntropy(e,n);return new l(s,t)}getChild(e,t=0,n=0,s=!1){const i=`${e}/${n}/${t}`,a=this.getMashKey().derivePath(i),o=a.getWallet().getAddressString(),r=a._hdkey.privateKey,d=a._hdkey.publicKey,u=a.getWallet().getPublicKey();return s?{path:i,address:o,prvKey:l.bufferToHex(r),pubKey:l.bufferToHex(d),pubKey_:l.bufferToHex(u)}:{path:i,address:o,prvKey:r,pubKey:d,pubKey_:u}}static bufferToHex(e){return"0x"+e.toString("hex")}getEthWallet(e,t){return this.getChild("m/44'/60'/0'",e,0,!!t)}getPTPWallet(e,t){return this.getChild(p,e,f.PS.EncryptType_Wallet,!!t)}getPTPEncryptWallet(e,t){return this.getChild(p,e,t,!1)}getGroupWallet(e,t){return this.getChild("m/44'/60'/1'",e,f.PS.EncryptType_Group,!!t)}}var h=n(69282),m=n.n(h),g=n(13550),y=n.n(g);function A(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const{Buffer:w}=n(48764),{keccak224:v,keccak384:b,keccak256:I,keccak512:C}=n(82192),{ecdsaRecover:S,publicKeyConvert:P,ecdsaSign:M}=n(95053);let R=function(e){return e[e.SignMsgType_eth=1e3]="SignMsgType_eth",e[e.SignMsgType_ptp=1001]="SignMsgType_ptp",e[e.SignMsgType_ptp_group=1002]="SignMsgType_ptp_group",e}({});const E=function(e){if(!w.isBuffer(e))throw new Error(`This method only supports Buffer but input was: ${e}`)},D=function(e){return"0x"+e.toString("hex")},U=function(e,t=256){switch(E(e),t){case 224:return v(e);case 256:return I(e);case 384:return b(e);case 512:return C(e);default:throw new Error(`Invald algorithm: keccak${t}`)}},k=function(e){return new(y())(e).toNumber()};function T(e){let t=e;if("string"!=typeof t)throw new Error("[padToEven] value must be type 'string', received "+typeof t);return t.length%2&&(t=`0${t}`),t}const B=function(e,t){return E(e),_(e,t,!1)},_=function(e,t,n){const s=(i=t,w.allocUnsafe(i).fill(0));var i;return n?e.length<t?(e.copy(s),s):e.slice(0,t):e.length<t?(e.copy(s,t-e.length),s):e.slice(-t)};let x=function(e){return e[e.Number=0]="Number",e[e.BN=1]="BN",e[e.Buffer=2]="Buffer",e[e.PrefixedHexString=3]="PrefixedHexString",e}({});function N(e){const t=new(y())(e);return t.eqn(0)||t.eqn(1)}const H=function(e){const t=function(e){if(!Number.isSafeInteger(e)||e<0)throw new Error(`Received an invalid integer type: ${e}`);return`0x${e.toString(16)}`}(e);return w.from(T(t.slice(2)),"hex")},q=function(e){if(null==e)return w.allocUnsafe(0);if(w.isBuffer(e))return w.from(e);if(Array.isArray(e)||e instanceof Uint8Array)return w.from(e);if("string"==typeof e){if(!G(e))throw new Error(`Cannot convert string to buffer. toBuffer only supports 0x-prefixed hex strings and this string was given: ${e}`);return w.from(T((e=>{if("string"!=typeof e)throw new Error("[stripHexPrefix] input must be type 'string', received "+typeof e);return function(e){if("string"!=typeof e)throw new Error("[isHexPrefixed] input must be type 'string', received type "+typeof e);return"0"===e[0]&&"x"===e[1]}(e)?e.slice(2):e})(e)),"hex")}if("number"==typeof e)return H(e);if(y().isBN(e)){if(e.isNeg())throw new Error(`Cannot convert negative BN to buffer. Given: ${e}`);return e.toArrayLike(w)}if(e.toArray)return w.from(e.toArray());if(e.toBuffer)return w.from(e.toBuffer());throw new Error("invalid type")};function G(e,t){return!("string"!=typeof e||!e.match(/^0x[0-9A-Fa-f]*$/)||t&&e.length!==2+2*t)}function j(e,t){if(null===e)return null;if(void 0===e)return;if("string"==typeof e&&!G(e))throw new Error(`A string must be provided with a 0x-prefix, given: ${e}`);if("number"==typeof e&&!Number.isSafeInteger(e))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative input type)");const n=q(e);if(t===x.Buffer)return n;if(t===x.BN)return new(y())(n);if(t===x.Number){const e=new(y())(n),t=new(y())(Number.MAX_SAFE_INTEGER.toString());if(e.gt(t))throw new Error("The provided number is greater than MAX_SAFE_INTEGER (please use an alternative output type)");return e.toNumber()}return`0x${n.toString("hex")}`}function O(e,t){const n=j(e,x.BN);if(n.eqn(0)||n.eqn(1))return j(e,x.BN);if(!t)return n.subn(27);const s=j(t,x.BN);return n.sub(s.muln(2).addn(35))}const F=function(e){let t,n,s;if(e.length>=65)t=e.slice(0,32),n=e.slice(32,64),s=k(e.slice(64));else{if(64!==e.length)throw new Error("Invalid signature length");t=e.slice(0,32),n=e.slice(32,64),s=k(e.slice(32,33))>>7,n[0]&=127}return s<27&&(s+=27),{v:s,r:t,s:n}},L=function(e,t=!1){return E(e),t&&64!==e.length&&(e=w.from(P(e,!1).slice(1))),m()(64===e.length),U(e).slice(-20)};class V{constructor({pubKey:e,prvKey:t}){A(this,"pubKey",void 0),A(this,"prvKey",void 0),Object.defineProperty(this,"pubKey",{value:e,writable:!1}),Object.defineProperty(this,"prvKey",{value:t,writable:!1})}static getSignMsgData(e,t=R.SignMsgType_ptp){const n=w.from(e,"utf-8");let s;return s=t==R.SignMsgType_eth?w.from(`Ethereum Signed Message:\n${n.length}`,"utf-8"):t==R.SignMsgType_ptp_group?w.from(`PTP GROUP Signed Message:\n${n.length}`,"utf-8"):w.from(`PTP Signed Message:\n${n.length}`,"utf-8"),w.concat([s,n])}sign(e){const t=function(e,t,n){const{signature:s,recid:i}=M(e,t,{recovered:!0});return{r:w.from(s.slice(0,32)),s:w.from(s.slice(32,64)),v:i+27}}(U(V.getSignMsgData(e)),this.prvKey);return w.concat([t.r,t.s,H(t.v)])}static recoverAddress({sig:e,message:t}){const n=function(e,t){const n=U(e),s=F(t);return function(e,t,n,s,i){const a=w.concat([B(n,32),B(s,32)],64),o=O(t,i);if(!N(o))throw new Error("Invalid signature v value");const r=S(a,o.toNumber(),e);return w.from(P(r,!1).slice(1))}(n,s.v,s.r,s.s)}(V.getSignMsgData(t),e),s=L(n);return D(s)}static recoverAddressAndPubKey({sig:e,message:t}){const n=function(e,t){const n=U(e),s=F(t);return function(e,t,n,s,i){const a=w.concat([B(n,32),B(s,32)],64),o=O(t,i);if(!N(o))throw new Error("Invalid signature v value");const r=S(a,o.toNumber(),e);return P(r,!1)}(n,s.v,s.r,s.s)}(V.getSignMsgData(t),e),s=L(w.from(n.slice(1)));return{address:D(s),pubKey:w.from(n)}}}const{Buffer:Z}=n(48764),K=n(55835),W="aes-256-gcm";class J{static encrypt(e,t,n,s){const i=K.createCipheriv(W,t,n);s&&i.setAAD(s);let a=i.update(e,"utf8","binary");a+=i.final("binary");const o=i.getAuthTag();return Z.concat([Z.from(o),Z.from(a,"binary")])}static decrypt(e,t,n,s){const i=Z.from(e.subarray(0,16)),a=K.createDecipheriv(W,t,n);let o;s&&a.setAAD(s),o=Z.from(e.subarray(16,e.length)),a.setAuthTag(i);let r=a.update(o.toString("hex"),"hex","hex");return r+=a.final("hex"),Z.from(r,"hex")}}var X=n(61465),z=n(44567),Q=n(29423),$=n(48764).Buffer;function Y(e,t,n){return(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const ee="a-k-",te="a-ks",ne="a-ss";let se,ie,ae,oe=[],re={};class de{constructor(e){Y(this,"accountId",void 0),Y(this,"uid",void 0),Y(this,"userInfo",void 0),Y(this,"shareKey",void 0),Y(this,"iv",void 0),Y(this,"aad",void 0),Y(this,"entropy",void 0),Y(this,"session",void 0),this.accountId=e,this.uid=""}static getServerKv(){return ie}static getClientKv(){return ae}static setServerKv(e){ie=e}static setClientKv(e){ae=e}static formatSession({sign:e,ts:t,address:n}){return`${e.toString("hex")}_${t}_${n}`}static parseSession(e){if(e){const[t,n,s]=e.split("_");return{sign:t,time:n,address:s}}}saveSession(e){const t=de.parseSession(e);t&&(de.getClientKv().put("adr",t.address),de.saveSessionByAddr(t.address,e))}getSession(){if(this.session)return this.session;{const e=de.getClientKv().get("adr");return e?(this.session=de.getSessionByAddr(e),this.session):void 0}}delSession(){this.session=void 0,de.getClientKv().delete("adr")}static saveSessionByAddr(e,t){const n=de.getSessions();n[e]=t,de.getClientKv().put(`${ne}`,JSON.stringify(n))}static getSessionByAddr(e){const t=de.getSessions();return t[e]?t[e]:void 0}static getSessions(){const e=de.getClientKv().get(`${ne}`);return e?JSON.parse(e):{}}async saveUidFromCacheByAddress(e,t){await de.getServerKv().put(`ADR_UID_${e}`,t)}async getUidFromCacheByAddress(e){return await de.getServerKv().get(`ADR_UID_${e}`)||void 0}async afterServerLoginOk({uid:e,address:t}){this.setUid(e),await de.getServerKv().get(`ADR_UID_${t}`)||await de.getServerKv().put(`ADR_UID_${t}`,e)}getShareKey(){return this.shareKey}getIv(){return this.iv}getAad(){return this.aad}getAccountId(){return this.accountId}setUid(e){this.uid=e}setUserInfo(e){this.userInfo=e}getUserInfo(){return this.userInfo}getUid(){return this.uid}async verifyPwd(e,t){const n=(0,z.n)(e),s=await this.getEntropy();return t===de.getAddressFromEntropy(s,n)}static getAddressFromEntropy(e,t){return new l(u.Z.fromEntropy(e),t).getPTPWallet(0).address}genEntropy(){let e=new u.Z;this.entropy=e.toEntropy()}async encryptData(e,t){const n=await this.getEntropy();t&&(t=(0,z.n)(t));let s=new l(u.Z.fromEntropy(n)),{prvKey:i,pubKey:a}=s.getPTPWallet(f.PS.EncryptType_Message);a=a.slice(1);const o=$.from(t,"hex");return J.encrypt(e,o,i,a)}async decryptData(e,t){const n=await this.getEntropy();t=(0,z.n)(t);let s=new l(u.Z.fromEntropy(n)),{prvKey:i,pubKey:a}=s.getPTPWallet(f.PS.EncryptType_Message);a=a.slice(1);const o=$.from(t,"hex");return J.decrypt(e,o,i,a)}async encryptByPubKey(e,t){const n=await this.getEntropy();let s=new l(u.Z.fromEntropy(n),t),{pubKey_:i}=s.getPTPWallet(0);return((e,t,n={})=>{if(64!==e.length)throw new Error("pubKeyTo len must 64");const s=n.ephemPrivKey||a.randomBytes(32),i=r.keyFromPrivate(s),d=i.getPublic(),u=o.from(d.encode("array",!1)),c=o.concat([o.from([4]),e]),f=r.keyFromPublic(c),p=i.derive(f.getPublic()),l=a.createHash("sha512").update(p.toArrayLike(o)).digest(),h=n.iv||a.randomBytes(16),m=l.slice(0,32),g=l.slice(32),y=((e,t,n)=>{const s=a.createCipheriv("aes-256-cbc",t,e),i=s.update(n),r=s.final();return o.concat([i,r])})(h,m,t),A=o.concat([h,u,y]),w=a.createHmac("sha256",g).update(A).digest();return o.concat([h,u,w,y])})(i,e)}async decryptByPrvKey(e,t){const n=await this.getEntropy();let s=new l(u.Z.fromEntropy(n),t),{prvKey:i}=s.getPTPWallet(0);return((e,t,n={})=>{let s,i,d=0;(n=n||{}).ephemPrivKey?(d=65,i=r.keyFromPrivate(n.ephemPrivKey).getPublic(),s=o.from(i.encode("array",!1))):(s=t.slice(16,81),i=r.keyFromPublic(s).getPublic());const u=t.slice(0,16),c=t.slice(81-d,113-d),f=t.slice(113-d),p=r.keyFromPrivate(e).derive(i),l=a.createHash("sha512").update(p.toArrayLike(o)).digest(),h=l.slice(0,32),m=l.slice(32),g=o.concat([u,s,f]);if(!((e,t)=>{if(e.length!==t.length)return!1;let n=0;for(let s=0;s<e.length;s++)n|=e[s]^t[s];return 0===n})(a.createHmac("sha256",m).update(g).digest(),c))throw new Error("MAC mismatch");return((e,t,n)=>{const s=a.createDecipheriv("aes-256-cbc",t,e),i=s.update(n),r=s.final();return o.concat([i,r])})(u,h,f)})(i,e)}static getEntropyList(){const e=de.getKeys();for(let t=0;t<Object.keys(e).length;t++){const n=Object.keys(e)[t],i=e[n],a=de.getClientKv().get("a-as");if(a){const e=JSON.parse(a);for(let t=0;t<e.length;t++){const a=(0,s.sha256)($.from(`${ee}${e[t]}`)).toString("hex");if(`${ee}${a}`===n){const s=(0,X.pe)($.from(i.substring(64),"hex"),$.from(n.substring(0,16)),$.from(n.substring(16,32))).toString("hex"),a=u.Z.fromEntropy(s);console.log("entropy:",e[t],s,a.getWords())}}}}return null}static getAccountIdByEntropy(e){const t=de.getKeys();for(let n=0;n<Object.keys(t).length;n++){const s=Object.keys(t)[n];if(e===t[s])return parseInt(s)}return null}static saveKey(e,t){const n=de.getKeys();n[e]=t,de.getClientKv().put(`${te}`,JSON.stringify(n))}static getKey(e){const t=de.getKeys();return t[e]?t[e]:void 0}static getKeys(){const e=de.getClientKv().get(`${te}`);return e?JSON.parse(e):{}}async setEntropy(e,t){this.entropy=e,t||await de.saveKey(this.getAccountId(),e)}async getEntropy(){if(this.entropy)return this.entropy;let e=await de.getKey(this.getAccountId());return e||(e=(new u.Z).toEntropy(),await de.saveKey(this.getAccountId(),e)),this.entropy=e,e}async initEcdh(e,t,n){const s=await this.getEntropy(),i=new l(u.Z.fromEntropy(s)).getPTPWallet(0);this.shareKey=$.from((0,d.ecdh)(e,i.prvKey)),this.aad=n,this.iv=t}aesEncrypt(e){return J.encrypt(e,this.getShareKey(),this.getIv(),this.getAad())}aesDecrypt(e){return J.decrypt(e,this.getShareKey(),this.getIv(),this.getAad())}async signMessage(e,t){const n=await this.getEntropy(),s=new l(u.Z.fromEntropy(n),t).getPTPWallet(0),i=new V({pubKey:s.pubKey,prvKey:s.prvKey});return{address:s.address,sign:i.sign(e)}}verifyRecoverAddress(e,t){return V.recoverAddress({message:t,sig:e})}async verifySession(e,t){const{address:n}=this.recoverAddressAndPubKey($.from(e.split("_")[0],"hex"),e.split("_")[1]);return await this.verifyPwd(t,n)?n:""}recoverAddressAndPubKey(e,t){return V.recoverAddressAndPubKey({message:t,sig:e})}static setCurrentAccount(e){se=e.getAccountId()}static getCurrentAccount(){return se?de.getInstance(se):null}static genAccountId(){return+new Date}static getCurrentAccountId(){if(se)return se;{let e=de.getClientKv().get("a-c-id");return e?("string"==typeof e&&(e=parseInt(e)),de.getClientKv().put("a-c-id",String(e))):e=de.genAccountId(),de.setCurrentAccountId(e),e}}static setCurrentAccountId(e){se=e;const t=de.getClientKv().get("a-as");oe=t?JSON.parse(t):[],oe.includes(e)||(oe.push(e),de.getClientKv().put("a-as",JSON.stringify(oe))),de.getClientKv().put("a-c-id",String(e))}static getInstance(e){return re[e]||(re[e]=new de(e)),re[e]}static randomBuff(e){return $.from((0,Q.Nu)(e))}}},8384:(e,t,n)=>{"use strict";n.d(t,{Z:()=>s});class s{constructor(){var e,t,n;e=this,n=void 0,(t=function(e){var t=function(e,t){if("object"!=typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var s=n.call(e,"string");if("object"!=typeof s)return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}(e);return"symbol"==typeof t?t:String(t)}(t="db"))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}init(e){this.db=e}put(e,t){this.db.cache[e]=t}get(e){return this.db.cache[e]}delete(e){delete this.db.cache[e]}}},44567:(e,t,n)=>{"use strict";n.d(t,{n:()=>o}),n(54155);var s=n(74237),i=n(48764).Buffer;const a="wai ai blockchain auto bot";function o(e){return(0,s.sha256)(i.from(`${e}${a}`)).toString("hex")}},2133:(e,t,n)=>{"use strict";n.d(t,{K:()=>a,q9:()=>i,z1:()=>o});var s=n(48764).Buffer;function i(){return Math.ceil(+new Date/1e3)}function a(){return Math.ceil(+new Date)}async function o(e){return new Promise(((t,n)=>{const i=new FileReader;i.onload=()=>{const e=s.from(i.result);t(e)},i.onerror=n,i.readAsArrayBuffer(e)}))}},46601:()=>{},89214:()=>{},71922:()=>{},2363:()=>{},27790:()=>{},81922:()=>{},52361:()=>{},94616:()=>{},6567:()=>{}},s={};function i(e){var t=s[e];if(void 0!==t)return t.exports;var a=s[e]={id:e,loaded:!1,exports:{}};return n[e].call(a.exports,a,a.exports,i),a.loaded=!0,a.exports}i.m=n,i.x=()=>{var e=i.O(void 0,[5433,3760,9521,2752,7282,4036],(()=>i(2049)));return i.O(e)},e=[],i.O=(t,n,s,a)=>{if(!n){var o=1/0;for(c=0;c<e.length;c++){for(var[n,s,a]=e[c],r=!0,d=0;d<n.length;d++)(!1&a||o>=a)&&Object.keys(i.O).every((e=>i.O[e](n[d])))?n.splice(d--,1):(r=!1,a<o&&(o=a));if(r){e.splice(c--,1);var u=s();void 0!==u&&(t=u)}}return t}a=a||0;for(var c=e.length;c>0&&e[c-1][2]>a;c--)e[c]=e[c-1];e[c]=[n,s,a]},i.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return i.d(t,{a:t}),t},i.d=(e,t)=>{for(var n in t)i.o(t,n)&&!i.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},i.f={},i.e=e=>Promise.all(Object.keys(i.f).reduce(((t,n)=>(i.f[n](e,t),t)),[])),i.u=e=>e+"."+{2752:"931cf8903d663f7596d9",3760:"92293361e75e95e04498",4036:"85e802ac2bd12620738f",5433:"dc756fbfbd427f32dedf",7282:"0042ce7159501c429e5a",9521:"c8a86c17990ad5260dba"}[e]+".js",i.miniCssF=e=>{},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),i.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.nmd=e=>(e.paths=[],e.children||(e.children=[]),e),(()=>{var e;i.g.importScripts&&(e=i.g.location+"");var t=i.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var n=t.getElementsByTagName("script");n.length&&(e=n[n.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e})(),(()=>{var e={1758:1};i.f.i=(t,n)=>{e[t]||importScripts(i.p+i.u(t))};var t=self.webpackChunkwai=self.webpackChunkwai||[],n=t.push.bind(t);t.push=t=>{var[s,a,o]=t;for(var r in a)i.o(a,r)&&(i.m[r]=a[r]);for(o&&o(i);s.length;)e[s.pop()]=1;n(t)}})(),t=i.x,i.x=()=>Promise.all([5433,3760,9521,2752,7282,4036].map(i.e,i)).then(t),i.x()})();
//# sourceMappingURL=1758.1ecb71799427e9621b20.js.map